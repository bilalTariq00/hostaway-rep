import{D as de,r as o,j as e,B as n,T as a,a as c,a4 as S,e as i,C as E,I as R}from"./index-DlK49mD9.js";import{D as he}from"./content-BncdO-AK.js";import{T as xe,a as f}from"./Tabs-CawWx8bN.js";import{F as h}from"./FormControl-DsPW8NaL.js";import{I as x}from"./InputLabel-vBrrCZYs.js";import{S as u}from"./Select-hkki-_gR.js";import{E as ue}from"./ellipsis-CQq7RJFV.js";import{C as je}from"./Card-C2DhIU3E.js";import{C as pe}from"./CardContent-CO_bIGDJ.js";import{T as me}from"./TableContainer-1FovwQIv.js";import{T as ge,a as ve,b as H,c as t,d as fe}from"./TableHead-BbeVJGli.js";import{P as N}from"./pencil-Cv1S77MX.js";import{E as be}from"./ellipsis-vertical-DGip_Yx0.js";import{D as V,a as G,b as q,c as $}from"./DialogContent-BrwwiAlS.js";import{T as K}from"./TextField-DGQVylbQ.js";import{M as Ce}from"./Menu-Cd2TK2zY.js";import{T as ye}from"./trash-2-CA6qpQWl.js";import"./KeyboardArrowRight-B0juUeOl.js";const De=[{id:1,title:"Property Inspection",description:"Conduct thorough inspection of Villa Del Sol",status:"In Progress",priority:"High",assignee:"John Doe",supervisor:"Jane Smith",dueDate:"2024-02-15",channel:"Airbnb",listing:"Villa Del Sol",createdAt:"2024-01-15"},{id:2,title:"Guest Check-in",description:"Prepare welcome package for incoming guests",status:"Pending",priority:"Medium",assignee:"Mike Johnson",supervisor:"Sarah Wilson",dueDate:"2024-02-10",channel:"Booking.com",listing:"Navigli Apartment",createdAt:"2024-01-20"},{id:3,title:"Maintenance Request",description:"Fix air conditioning unit in bedroom",status:"Completed",priority:"High",assignee:"Tom Brown",supervisor:"Jane Smith",dueDate:"2024-01-30",channel:"Direct",listing:"Polacchi42",createdAt:"2024-01-10"}];function Ve(){const j=de(),[Q,U]=o.useState(0),[p,k]=o.useState(1),[b]=o.useState(50),[X,W]=o.useState(!1),[M,P]=o.useState(null),[w,I]=o.useState(null),[Y,C]=o.useState(!1),[m,y]=o.useState(null),[l,z]=o.useState({listing:"",channel:"",assignee:"",supervisor:"",status:[],priority:[],fromDate:"",toDate:""}),[Z,_]=o.useState(De),[F,ee]=o.useState("dueDate"),se=(s,r)=>{U(r),r===1&&j.push("/tasks/manage-auto-tasks"),r===2&&j.push("/tasks/checklist-templates"),r===3&&j.push("/tasks/archive")},ie=(s,r)=>{P(s.currentTarget),I(r)},B=()=>{P(null),I(null)},O=()=>{j.push("/tasks/new")},D=s=>{j.push(`/tasks/${s.id}/edit`)},le=()=>{y(w),C(!0),B()},ne=()=>{m&&_(s=>s.filter(r=>r.id!==m.id)),C(!1),y(null)},J=()=>{C(!1),y(null)},d=(s,r)=>{z(v=>({...v,[s]:r}))},te=()=>{W(!0)},T=()=>{W(!1)},re=()=>{T()},ae=()=>{z({listing:"",channel:"",assignee:"",supervisor:"",status:[],priority:[],fromDate:"",toDate:""})},g=[...Z.filter(s=>(!l.listing||s.listing===l.listing)&&(!l.channel||s.channel===l.channel)&&(!l.assignee||s.assignee===l.assignee)&&(!l.supervisor||s.supervisor===l.supervisor)&&(l.status.length===0||l.status.includes(s.status))&&(l.priority.length===0||l.priority.includes(s.priority))&&(!l.fromDate||s.dueDate>=l.fromDate)&&(!l.toDate||s.dueDate<=l.toDate))].sort((s,r)=>{switch(F){case"dueDate":return new Date(s.dueDate).getTime()-new Date(r.dueDate).getTime();case"priority":{const v={High:3,Medium:2,Low:1};return v[r.priority]-v[s.priority]}case"status":return s.status.localeCompare(r.status);case"createdAt":return new Date(s.createdAt).getTime()-new Date(r.createdAt).getTime();default:return 0}}),oe=Math.ceil(g.length/b),A=(p-1)*b,L=A+b,ce=g.slice(A,L);return e.jsxs(he,{maxWidth:"xl",children:[e.jsxs(n,{sx:{mb:3},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(a,{variant:"h4",sx:{fontWeight:600},children:"Tasks"}),e.jsx(c,{variant:"contained",onClick:O,children:"Add Tasks"})]}),e.jsxs(xe,{value:Q,onChange:se,sx:{borderBottom:1,borderColor:"divider","& .MuiTab-root":{textTransform:"none",fontWeight:500},"& .Mui-selected":{color:"primary.main",fontWeight:600},"& .MuiTabs-indicator":{bgcolor:"primary.main"}},children:[e.jsx(f,{label:"Manage Tasks"}),e.jsx(f,{label:"Manage Auto-tasks"}),e.jsx(f,{label:"Checklist Templates"}),e.jsx(f,{label:"Archive"})]})]}),e.jsx(S,{sx:{p:2,mb:3},children:e.jsxs(n,{sx:{display:"flex",flexWrap:"wrap",gap:2,alignItems:"center"},children:[e.jsx(n,{sx:{minWidth:200,flex:"1 1 200px"},children:e.jsxs(h,{fullWidth:!0,size:"small",children:[e.jsx(x,{children:"Listing"}),e.jsxs(u,{value:l.listing,label:"Listing",onChange:s=>d("listing",s.target.value),children:[e.jsx(i,{value:"",children:"All Listings"}),e.jsx(i,{value:"Villa Del Sol",children:"Villa Del Sol"}),e.jsx(i,{value:"Navigli Apartment",children:"Navigli Apartment"}),e.jsx(i,{value:"Polacchi42",children:"Polacchi42"})]})]})}),e.jsx(n,{sx:{minWidth:200,flex:"1 1 200px"},children:e.jsxs(h,{fullWidth:!0,size:"small",children:[e.jsx(x,{children:"Channel"}),e.jsxs(u,{value:l.channel,label:"Channel",onChange:s=>d("channel",s.target.value),children:[e.jsx(i,{value:"",children:"All Channels"}),e.jsx(i,{value:"Airbnb",children:"Airbnb"}),e.jsx(i,{value:"Booking.com",children:"Booking.com"}),e.jsx(i,{value:"Direct",children:"Direct"})]})]})}),e.jsx(n,{sx:{minWidth:200,flex:"1 1 200px"},children:e.jsxs(h,{fullWidth:!0,size:"small",children:[e.jsx(x,{children:"Assignee"}),e.jsxs(u,{value:l.assignee,label:"Assignee",onChange:s=>d("assignee",s.target.value),children:[e.jsx(i,{value:"",children:"All Assignees"}),e.jsx(i,{value:"John Doe",children:"John Doe"}),e.jsx(i,{value:"Mike Johnson",children:"Mike Johnson"}),e.jsx(i,{value:"Tom Brown",children:"Tom Brown"})]})]})}),e.jsx(n,{sx:{minWidth:200,flex:"1 1 200px"},children:e.jsxs(h,{fullWidth:!0,size:"small",children:[e.jsx(x,{children:"Supervisor"}),e.jsxs(u,{value:l.supervisor,label:"Supervisor",onChange:s=>d("supervisor",s.target.value),children:[e.jsx(i,{value:"",children:"All Supervisors"}),e.jsx(i,{value:"Jane Smith",children:"Jane Smith"}),e.jsx(i,{value:"Sarah Wilson",children:"Sarah Wilson"})]})]})}),e.jsx(n,{sx:{minWidth:200,flex:"1 1 200px"},children:e.jsxs(h,{fullWidth:!0,size:"small",children:[e.jsx(x,{children:"Sort Order"}),e.jsxs(u,{value:F,label:"Sort Order",onChange:s=>ee(s.target.value),children:[e.jsx(i,{value:"dueDate",children:"Due Date"}),e.jsx(i,{value:"priority",children:"Priority"}),e.jsx(i,{value:"status",children:"Status"}),e.jsx(i,{value:"createdAt",children:"Created Date"})]})]})}),e.jsx(n,{sx:{minWidth:200,flex:"1 1 200px"},children:e.jsx(c,{variant:"outlined",onClick:te,startIcon:e.jsx(ue,{size:16}),fullWidth:!0,children:"More Filter"})})]})}),g.length===0?e.jsx(je,{sx:{p:4,textAlign:"center",mb:3},children:e.jsxs(pe,{children:[e.jsx(a,{variant:"h6",sx:{mb:2,color:"text.secondary"},children:"No tasks found"}),e.jsx(a,{variant:"body2",sx:{mb:3,color:"text.secondary"},children:"Get started by creating your first task"}),e.jsx(c,{variant:"contained",onClick:O,children:"Add Task"})]})}):e.jsx(S,{sx:{mb:3},children:e.jsx(me,{children:e.jsxs(ge,{children:[e.jsx(ve,{children:e.jsxs(H,{children:[e.jsx(t,{children:"Task"}),e.jsx(t,{children:"Status"}),e.jsx(t,{children:"Priority"}),e.jsx(t,{children:"Assignee"}),e.jsx(t,{children:"Supervisor"}),e.jsx(t,{children:"Due Date"}),e.jsx(t,{children:"Channel"}),e.jsx(t,{children:"Listing"}),e.jsx(t,{align:"center",children:"Actions"})]})}),e.jsx(fe,{children:ce.map(s=>e.jsxs(H,{hover:!0,children:[e.jsx(t,{children:e.jsxs(n,{children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500,cursor:"pointer",color:"primary.main"},onClick:()=>D(s),children:s.title}),e.jsx(a,{variant:"caption",color:"text.secondary",children:s.description})]})}),e.jsx(t,{children:e.jsx(E,{label:s.status,size:"small",color:s.status==="Completed"?"success":s.status==="In Progress"?"warning":"default"})}),e.jsx(t,{children:e.jsx(E,{label:s.priority,size:"small",color:s.priority==="High"?"error":s.priority==="Medium"?"warning":"success"})}),e.jsx(t,{children:e.jsx(a,{variant:"body2",children:s.assignee})}),e.jsx(t,{children:e.jsx(a,{variant:"body2",children:s.supervisor})}),e.jsx(t,{children:e.jsx(a,{variant:"body2",children:s.dueDate})}),e.jsx(t,{children:e.jsx(a,{variant:"body2",children:s.channel})}),e.jsx(t,{children:e.jsx(a,{variant:"body2",children:s.listing})}),e.jsx(t,{align:"center",children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(R,{size:"small",onClick:()=>D(s),sx:{"&:hover":{bgcolor:"primary.lighter"}},children:e.jsx(N,{size:16})}),e.jsx(R,{size:"small",onClick:r=>ie(r,s),sx:{"&:hover":{bgcolor:"grey.100"}},children:e.jsx(be,{size:16})})]})})]},s.id))})]})})}),e.jsx(S,{sx:{p:2},children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(a,{variant:"body2",color:"text.secondary",children:"Show 50 per page"}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsxs(a,{variant:"body2",color:"text.secondary",children:[A+1,"-",Math.min(L,g.length)," of ",g.length]}),e.jsxs(n,{sx:{display:"flex",gap:.5},children:[e.jsx(c,{size:"small",disabled:p===1,onClick:()=>k(p-1),children:"Previous"}),e.jsx(c,{size:"small",disabled:p===oe,onClick:()=>k(p+1),children:"Next"})]})]})]})}),e.jsxs(V,{open:X,onClose:T,maxWidth:"md",fullWidth:!0,children:[e.jsx(G,{children:"More Filters"}),e.jsx(q,{children:e.jsxs(n,{sx:{display:"flex",flexWrap:"wrap",gap:2,mt:1},children:[e.jsx(n,{sx:{minWidth:200,flex:"1 1 200px"},children:e.jsxs(h,{fullWidth:!0,children:[e.jsx(x,{children:"Status"}),e.jsxs(u,{label:"Status",multiple:!0,value:l.status,onChange:s=>d("status",s.target.value),children:[e.jsx(i,{value:"Pending",children:"Pending"}),e.jsx(i,{value:"In Progress",children:"In Progress"}),e.jsx(i,{value:"Completed",children:"Completed"})]})]})}),e.jsx(n,{sx:{minWidth:200,flex:"1 1 200px"},children:e.jsxs(h,{fullWidth:!0,children:[e.jsx(x,{children:"Priority"}),e.jsxs(u,{label:"Priority",multiple:!0,value:l.priority,onChange:s=>d("priority",s.target.value),children:[e.jsx(i,{value:"Low",children:"Low"}),e.jsx(i,{value:"Medium",children:"Medium"}),e.jsx(i,{value:"High",children:"High"})]})]})}),e.jsx(n,{sx:{minWidth:200,flex:"1 1 200px"},children:e.jsx(K,{fullWidth:!0,type:"date",label:"From Date",value:l.fromDate,onChange:s=>d("fromDate",s.target.value),InputLabelProps:{shrink:!0}})}),e.jsx(n,{sx:{minWidth:200,flex:"1 1 200px"},children:e.jsx(K,{fullWidth:!0,type:"date",label:"To Date",value:l.toDate,onChange:s=>d("toDate",s.target.value),InputLabelProps:{shrink:!0}})})]})}),e.jsxs($,{children:[e.jsx(c,{onClick:ae,children:"Reset Filters"}),e.jsx(c,{onClick:T,children:"Cancel"}),e.jsx(c,{variant:"contained",onClick:re,children:"Apply Filters"})]})]}),e.jsxs(Ce,{anchorEl:M,open:!!M,onClose:B,children:[e.jsxs(i,{onClick:()=>D(w),children:[e.jsx(N,{size:16,style:{marginRight:8}}),"Edit"]}),e.jsxs(i,{onClick:le,sx:{color:"error.main"},children:[e.jsx(ye,{size:16,style:{marginRight:8}}),"Delete"]})]}),e.jsxs(V,{open:Y,onClose:J,children:[e.jsx(G,{children:"Delete Task"}),e.jsx(q,{children:e.jsxs(a,{children:['Are you sure you want to delete "',m==null?void 0:m.title,'"? This action cannot be undone.']})}),e.jsxs($,{children:[e.jsx(c,{onClick:J,children:"Cancel"}),e.jsx(c,{onClick:ne,variant:"contained",color:"error",children:"Delete"})]})]})]})}export{Ve as ManageTasksView};
