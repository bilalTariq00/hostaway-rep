import{D as ie,r as s,j as e,B as r,e as n,a as l,a4 as f,I as re,T as g,P as te}from"./index-DlK49mD9.js";import{D as ne}from"./content-BncdO-AK.js";import{T as se,a as v}from"./Tabs-CawWx8bN.js";import{F as S}from"./FormControl-DsPW8NaL.js";import{I as j}from"./InputLabel-vBrrCZYs.js";import{S as F}from"./Select-hkki-_gR.js";import{D as le}from"./download-Cf74o_52.js";import{M as ce}from"./Menu-Cd2TK2zY.js";import{E as de}from"./eye-CNWiU7qj.js";import{T as b}from"./TextField-DGQVylbQ.js";import{T as ge}from"./TableContainer-1FovwQIv.js";import{T as he,a as ue,b as P,c as p,d as me}from"./TableHead-BbeVJGli.js";import{C as pe}from"./chevron-up-Be3A51t0.js";import{C as xe}from"./chevron-down-CCU2oTw6.js";import{S as be}from"./settings-BgN3WhmC.js";import{S as ye}from"./search-C7TcvOao.js";import{F as Ce}from"./FormControlLabel-DYCM3_AA.js";import{C as ve}from"./Checkbox-Cws__oH0.js";import"./KeyboardArrowRight-B0juUeOl.js";import"./SwitchBase-D6K1hBX3.js";const ke=[{id:305034,listingName:"La Dimora Del Cavaliere",occupancyRate:85.5,occupancyTrend:"up",occupancyChange:5.2,cedolareSeccaAirbnb:255.37,cedolareSeccaBooking:0,cedolareSeccaDomus:107.82,cedolareSeccaTotale:363.19,cleaningFee:50,towelChangeFee:15,midstayCleaningFee:80,roomRequestFee:25,reservationChangeFee:30,checkinFee:20,lateCheckoutFee:40,otherFees:0,ivaBooking:55,ivaCommissioni:12.5,marginalitaProprietario:1200,percentualePropertyManager:15,ricavoBookingPrePMePulizie:1500,ricavoLordo:1800,tassaDiSoggiorno:45},{id:305225,listingName:"Polacchi42",occupancyRate:72.3,occupancyTrend:"down",occupancyChange:-3.1,cedolareSeccaAirbnb:0,cedolareSeccaBooking:198.84,cedolareSeccaDomus:103.96,cedolareSeccaTotale:302.8,cleaningFee:60,towelChangeFee:20,midstayCleaningFee:100,roomRequestFee:30,reservationChangeFee:35,checkinFee:25,lateCheckoutFee:50,otherFees:15,ivaBooking:65,ivaCommissioni:15,marginalitaProprietario:1400,percentualePropertyManager:18,ricavoBookingPrePMePulizie:1700,ricavoLordo:2e3,tassaDiSoggiorno:50},{id:305421,listingName:"Superattico - Via Del Corso 43",occupancyRate:91.8,occupancyTrend:"up",occupancyChange:8.7,cedolareSeccaAirbnb:112.35,cedolareSeccaBooking:219.59,cedolareSeccaDomus:184.03,cedolareSeccaTotale:515.97,cleaningFee:80,towelChangeFee:25,midstayCleaningFee:120,roomRequestFee:40,reservationChangeFee:45,checkinFee:30,lateCheckoutFee:60,otherFees:20,ivaBooking:85,ivaCommissioni:20,marginalitaProprietario:2e3,percentualePropertyManager:20,ricavoBookingPrePMePulizie:2500,ricavoLordo:3e3,tassaDiSoggiorno:75},{id:308582,listingName:"Monteverde - Quattroventi",occupancyRate:78.2,occupancyTrend:"stable",occupancyChange:0,cedolareSeccaAirbnb:228.6,cedolareSeccaBooking:0,cedolareSeccaDomus:140.6,cedolareSeccaTotale:369.2,cleaningFee:70,towelChangeFee:18,midstayCleaningFee:110,roomRequestFee:35,reservationChangeFee:40,checkinFee:28,lateCheckoutFee:55,otherFees:10,ivaBooking:75,ivaCommissioni:18,marginalitaProprietario:1600,percentualePropertyManager:16,ricavoBookingPrePMePulizie:2e3,ricavoLordo:2400,tassaDiSoggiorno:60},{id:317154,listingName:"[5 Min From Trastevere] Chic Apt",occupancyRate:88.9,occupancyTrend:"up",occupancyChange:4.3,cedolareSeccaAirbnb:305.59,cedolareSeccaBooking:83.29,cedolareSeccaDomus:262.41,cedolareSeccaTotale:651.29,cleaningFee:90,towelChangeFee:30,midstayCleaningFee:140,roomRequestFee:50,reservationChangeFee:55,checkinFee:35,lateCheckoutFee:70,otherFees:25,ivaBooking:95,ivaCommissioni:22,marginalitaProprietario:2200,percentualePropertyManager:22,ricavoBookingPrePMePulizie:2800,ricavoLordo:3400,tassaDiSoggiorno:85},{id:345603,listingName:"Via Dei Marruccini | San Lorenzo",occupancyRate:65.4,occupancyTrend:"down",occupancyChange:-7.2,cedolareSeccaAirbnb:241.4,cedolareSeccaBooking:0,cedolareSeccaDomus:115.76,cedolareSeccaTotale:357.16,cleaningFee:55,towelChangeFee:16,midstayCleaningFee:95,roomRequestFee:32,reservationChangeFee:38,checkinFee:26,lateCheckoutFee:52,otherFees:12,ivaBooking:70,ivaCommissioni:16,marginalitaProprietario:1500,percentualePropertyManager:17,ricavoBookingPrePMePulizie:1800,ricavoLordo:2200,tassaDiSoggiorno:55},{id:372243,listingName:"Luxury Stay in Rome - Steps from Metro A Cornelia",occupancyRate:94.1,occupancyTrend:"up",occupancyChange:2.8,cedolareSeccaAirbnb:360.66,cedolareSeccaBooking:0,cedolareSeccaDomus:176.14,cedolareSeccaTotale:536.8,cleaningFee:100,towelChangeFee:35,midstayCleaningFee:160,roomRequestFee:60,reservationChangeFee:65,checkinFee:40,lateCheckoutFee:80,otherFees:30,ivaBooking:110,ivaCommissioni:25,marginalitaProprietario:2800,percentualePropertyManager:25,ricavoBookingPrePMePulizie:3500,ricavoLordo:4200,tassaDiSoggiorno:105}];function $e(){const y=ie(),[N,q]=s.useState(1),[T,w]=s.useState("per-reservation"),[E,V]=s.useState(!1),[D,fe]=s.useState(1),[k]=s.useState(25),[z,R]=s.useState(null),[B,M]=s.useState(null),[A,O]=s.useState(""),[h,H]=s.useState(""),[x,L]=s.useState("asc"),u=[{key:"listingName",label:"Listing",sortable:!0,mandatory:!0},{key:"id",label:"Listing ID",sortable:!0,mandatory:!0},{key:"occupancyRate",label:"Occupancy Rate",sortable:!0,mandatory:!0},{key:"cedolareSeccaAirbnb",label:"Cedolare Secca Airbnb Classico",sortable:!0},{key:"cedolareSeccaBooking",label:"Cedolare Secca Booking Classico",sortable:!0},{key:"cedolareSeccaDomus",label:"Cedolare Secca Domus Feriae",sortable:!0},{key:"cedolareSeccaTotale",label:"Cedolare Secca Totale Classica",sortable:!0},{key:"cleaningFee",label:"Cleaning Fee Per Appartamento",sortable:!0},{key:"towelChangeFee",label:"Towel change fee",sortable:!0},{key:"midstayCleaningFee",label:"Midstay cleaning fee",sortable:!0},{key:"roomRequestFee",label:"Room request fee",sortable:!0},{key:"reservationChangeFee",label:"Reservation change fee",sortable:!0},{key:"checkinFee",label:"Checkin fee",sortable:!0},{key:"lateCheckoutFee",label:"Late checkout fee",sortable:!0},{key:"otherFees",label:"Other fees",sortable:!0},{key:"ivaBooking",label:"IVA Booking",sortable:!0},{key:"ivaCommissioni",label:"IVA Commissioni",sortable:!0},{key:"marginalitaProprietario",label:"Marginalita Proprietario",sortable:!0},{key:"percentualePropertyManager",label:"Percentuale Property Manager",sortable:!0},{key:"ricavoBookingPrePMePulizie",label:"Ricavo Booking Pre P Me Pulizie",sortable:!0},{key:"ricavoLordo",label:"Ricavo Lordo",sortable:!0},{key:"tassaDiSoggiorno",label:"Tassa Di Soggiorno",sortable:!0}],[m,$]=s.useState(["listingName","id","cedolareSeccaAirbnb","cedolareSeccaBooking","cedolareSeccaDomus","cedolareSeccaTotale"]),Q=(a,o)=>{q(o),o===0&&y.push("/financial-reportings/analytics"),o===2&&y.push("/financial-reportings/occupancy-report"),o===3&&y.push("/financial-reportings/quickbooks")},Z=a=>{R(a.currentTarget)},C=()=>{R(null)},U=a=>{M(a.currentTarget)},X=()=>{M(null)},Y=a=>{y.push(`/listings/${a}/edit`)},G=a=>{const o=u.find(i=>i.key===a);o!=null&&o.mandatory||$(i=>i.includes(a)?i.filter(t=>t!==a):[...i,a])},J=a=>{h===a?L(x==="asc"?"desc":"asc"):(H(a),L("asc"))},I=[...ke].sort((a,o)=>{if(!h)return 0;const i=a[h],t=o[h];if(typeof i=="number"&&typeof t=="number")return x==="asc"?i-t:t-i;const c=String(i).toLowerCase(),d=String(t).toLowerCase();return x==="asc"?c.localeCompare(d):d.localeCompare(c)}),W=(D-1)*k,_=W+k,K=I.slice(W,_),ee=u.filter(a=>a.label.toLowerCase().includes(A.toLowerCase())),ae=m.reduce((a,o)=>(u.find(t=>t.key===o)&&o!=="listingName"&&o!=="id"&&(a[o]=I.reduce((t,c)=>{const d=c[o];return t+(typeof d=="number"?d:0)},0)),a),{});return e.jsxs(ne,{maxWidth:"xl",children:[e.jsx(r,{sx:{mb:3},children:e.jsxs(se,{value:N,onChange:Q,sx:{borderBottom:1,borderColor:"divider","& .MuiTab-root":{textTransform:"none",fontWeight:500},"& .Mui-selected":{color:"primary.main",fontWeight:600},"& .MuiTabs-indicator":{bgcolor:"primary.main"}},children:[e.jsx(v,{label:"Analytics"}),e.jsx(v,{label:"Rental Activity"}),e.jsx(v,{label:"Occupancy Report"}),e.jsx(v,{label:"QuickBooks"})]})}),e.jsx(r,{sx:{mb:3},children:e.jsx(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs(S,{size:"small",sx:{minWidth:150},children:[e.jsx(j,{children:"Rental Activity"}),e.jsxs(F,{value:"rental-activity",label:"Rental Activity",children:[e.jsx(n,{value:"rental-activity",children:"Rental Activity"}),e.jsx(n,{value:"revenue",children:"Revenue"}),e.jsx(n,{value:"occupancy",children:"Occupancy"})]})]}),e.jsx(l,{variant:"outlined",onClick:Z,startIcon:e.jsx(le,{size:16}),children:"Download Report"}),e.jsxs(ce,{anchorEl:z,open:!!z,onClose:C,children:[e.jsx(n,{onClick:C,children:"Export CSV"}),e.jsx(n,{onClick:C,children:"Export Excel"}),e.jsx(n,{onClick:C,children:"Export PDF"})]})]})})}),e.jsxs(f,{sx:{p:2,mb:3},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2,mb:2,flexWrap:"wrap"},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(l,{variant:T==="per-reservation"?"contained":"outlined",size:"small",onClick:()=>w("per-reservation"),children:"Per Reservation"}),e.jsx(l,{variant:T==="per-listing"?"contained":"outlined",size:"small",onClick:()=>w("per-listing"),children:"Per Listing"})]}),e.jsx(l,{variant:"outlined",size:"small",onClick:()=>V(!E),startIcon:e.jsx(de,{size:16}),children:"Show Listings with 0 Reservations"})]}),e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[e.jsx(b,{size:"small",type:"date",label:"From",InputLabelProps:{shrink:!0},sx:{minWidth:120}}),e.jsx(b,{size:"small",type:"date",label:"To",InputLabelProps:{shrink:!0},sx:{minWidth:120}}),e.jsx(l,{variant:"outlined",size:"small",children:"MTD"}),e.jsx(b,{size:"small",placeholder:"Check-in",sx:{minWidth:120}}),e.jsxs(S,{size:"small",sx:{minWidth:120},children:[e.jsx(j,{children:"Status"}),e.jsxs(F,{label:"Status",children:[e.jsx(n,{value:"confirmed",children:"Confirmed"}),e.jsx(n,{value:"pending",children:"Pending"}),e.jsx(n,{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs(S,{size:"small",sx:{minWidth:120},children:[e.jsx(j,{children:"Status"}),e.jsxs(F,{label:"Status",children:[e.jsx(n,{value:"confirmed",children:"Confirmed"}),e.jsx(n,{value:"pending",children:"Pending"}),e.jsx(n,{value:"cancelled",children:"Cancelled"})]})]}),e.jsx(l,{variant:"outlined",size:"small",children:"Reset Filter"})]})]}),e.jsx(f,{sx:{mb:3},children:e.jsx(ge,{sx:{maxHeight:600,overflowX:"auto",overflowY:"auto"},children:e.jsxs(he,{sx:{minWidth:m.length*150},children:[e.jsx(ue,{children:e.jsxs(P,{children:[m.map(a=>{const o=u.find(i=>i.key===a);return o?e.jsx(p,{align:a==="listingName"?"left":"center",sx:{fontWeight:600,cursor:o.sortable?"pointer":"default",minWidth:a==="listingName"?200:150,whiteSpace:"nowrap","&:hover":o.sortable?{bgcolor:"grey.50"}:{}},onClick:()=>o.sortable&&J(a),children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[o.label,o.sortable&&e.jsxs(r,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(pe,{size:12,color:h===a&&x==="asc"?"#00A76F":"#666"}),e.jsx(xe,{size:12,color:h===a&&x==="desc"?"#00A76F":"#666"})]})]})},a):null}),e.jsx(p,{align:"center",sx:{minWidth:60,width:60,position:"sticky",right:0,bgcolor:"background.paper",borderLeft:"1px solid",borderColor:"divider",zIndex:1,px:0},children:e.jsx(re,{onClick:U,size:"small",sx:{color:"text.secondary","&:hover":{bgcolor:"grey.100",color:"text.primary"}},children:e.jsx(be,{size:16})})})]})}),e.jsxs(me,{children:[K.map((a,o)=>e.jsxs(P,{sx:{bgcolor:o%2===0?"white":"grey.50","&:hover":{bgcolor:"grey.100"}},children:[m.map(i=>{if(!u.find(oe=>oe.key===i))return null;const c=a[i],d=typeof c=="number";return e.jsx(p,{align:i==="listingName"?"left":"center",sx:{minWidth:i==="listingName"?200:150,whiteSpace:"nowrap"},children:i==="listingName"?e.jsx(g,{variant:"body2",sx:{fontWeight:500,cursor:"pointer",color:"primary.main","&:hover":{textDecoration:"underline"}},onClick:()=>Y(a.id),children:c}):e.jsx(g,{variant:"body2",sx:{fontWeight:d?500:400},children:d?`€${c.toFixed(2)}`:String(c)})},i)}),e.jsx(p,{align:"center",sx:{minWidth:60,width:60,position:"sticky",right:0,bgcolor:o%2===0?"white":"grey.50",borderLeft:"1px solid",borderColor:"divider",zIndex:1,px:0}})]},a.id)),e.jsxs(P,{sx:{bgcolor:"grey.100",fontWeight:600},children:[m.map(a=>{var i;return u.find(t=>t.key===a)?e.jsx(p,{align:a==="listingName"?"left":"center",sx:{fontWeight:600,minWidth:a==="listingName"?200:150,whiteSpace:"nowrap"},children:a==="listingName"?e.jsx(g,{variant:"body2",sx:{fontWeight:600},children:"Total"}):a==="id"?e.jsx(g,{variant:"body2",sx:{fontWeight:600},children:"-"}):e.jsxs(g,{variant:"body2",sx:{fontWeight:600},children:["€",((i=ae[a])==null?void 0:i.toFixed(2))||"0.00"]})},`total-${a}`):null}),e.jsx(p,{align:"center",sx:{minWidth:60,width:60,position:"sticky",right:0,bgcolor:"grey.100",borderLeft:"1px solid",borderColor:"divider",zIndex:1,px:0}})]})]})]})})}),e.jsx(f,{sx:{p:2},children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(g,{variant:"body2",color:"text.secondary",children:"Show"}),e.jsx(b,{size:"small",value:k,sx:{width:60},inputProps:{style:{textAlign:"center"}}}),e.jsx(g,{variant:"body2",color:"text.secondary",children:"per page"})]}),e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(l,{size:"small",variant:"outlined",children:"FIRST"}),e.jsx(l,{size:"small",variant:"outlined",children:"<"}),e.jsx(l,{size:"small",variant:"contained",children:D}),e.jsx(l,{size:"small",variant:"outlined",children:">"}),e.jsx(l,{size:"small",variant:"outlined",children:"LAST"})]})]})}),e.jsx(te,{open:!!B,anchorEl:B,onClose:X,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{"& .MuiPopover-paper":{width:300,maxHeight:400,overflow:"auto"}},children:e.jsxs(r,{sx:{p:2},children:[e.jsx(b,{fullWidth:!0,size:"small",placeholder:"Find column",value:A,onChange:a=>O(a.target.value),InputProps:{startAdornment:e.jsx(ye,{size:16,color:"#666",style:{marginRight:8}})},sx:{mb:2}}),e.jsx(r,{sx:{display:"flex",flexDirection:"column",gap:1},children:ee.map(a=>e.jsx(Ce,{control:e.jsx(ve,{checked:m.includes(a.key),onChange:()=>G(a.key),disabled:a.mandatory,size:"small",sx:{color:"primary.main","&.Mui-checked":{color:"primary.main"},"&.Mui-disabled":{color:"grey.400"}}}),label:e.jsxs(g,{variant:"body2",sx:{fontSize:"0.875rem",color:a.mandatory?"grey.500":"text.primary",fontWeight:a.mandatory?500:400},children:[a.label,a.mandatory&&" (Required)"]}),sx:{margin:0}},a.key))})]})})]})}export{$e as RentalActivityView};
