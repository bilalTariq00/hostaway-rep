import{D as H,r as o,j as e,B as r,a as d,T as t,a4 as w,I as f,a5 as S,V as Y,e as l}from"./index-DDMGUD-_.js";import{D as $}from"./content-DAzX26cm.js";import{A as q}from"./arrow-left-DVLbOZnK.js";import{P as G}from"./plus-0dYUhXY5.js";import{T as U}from"./TableContainer-Cp4gnwML.js";import{T as X,a as J,b as W,c as a,d as K}from"./TableHead-CMCmgIDA.js";import{S as Q}from"./square-pen-BNpSXi0l.js";import{P as Z}from"./Pagination-Dusx6Zp7.js";import{I as F}from"./info-_UHBnIlD.js";import{T as ee}from"./TextField-BZcg-6kp.js";import{F as se}from"./FormControl-BRgYzLHi.js";import{S as re}from"./Select-DixiLax7.js";import{S as te}from"./Switch-CS1Ni3s3.js";import{D as ie,a as ne,b as ae,c as oe}from"./DialogContent-CkHDAA-B.js";import"./LastPage-K8Xc1QT_.js";import"./InputLabel-B_w9HMQG.js";import"./Menu-Bm1ShPnp.js";import"./SwitchBase-s8UEUZOy.js";const le=[{id:1,name:"Video",type:"Text",public:!0,variable:"{{listing_video}}"},{id:2,name:"Property Type",type:"Dropdown",public:!0,variable:"property_type"},{id:3,name:"Max Guests",type:"Number",public:!1,variable:"max_guests"},{id:4,name:"Check-in Instructions",type:"Text Area",public:!0,variable:"checkin_instructions"},{id:5,name:"Amenities",type:"Checkbox",public:!0,variable:"amenities"},{id:6,name:"House Rules",type:"Text Area",public:!1,variable:"house_rules"}];function Se(){const I=H(),[P,m]=o.useState(!1),[v,A]=o.useState(1),[p]=o.useState(20),[C,b]=o.useState(le),[h,g]=o.useState(null),[M,j]=o.useState(!1),[x,y]=o.useState(null),[i,c]=o.useState({name:"",type:"Text",public:!0}),z=()=>{I.push("/listings")},B=()=>{g(null),c({name:"",type:"Text",public:!0}),m(!0)},u=()=>{m(!1),g(null),c({name:"",type:"Text",public:!0})},_=()=>{if(h)b(s=>s.map(n=>n.id===h.id?{...n,...i,variable:`{{${i.name.toLowerCase().replace(/\s+/g,"_")}}}`}:n));else{const s={id:Math.max(...C.map(n=>n.id))+1,...i,variable:`{{${i.name.toLowerCase().replace(/\s+/g,"_")}}}`};b(n=>[...n,s])}u()},N=s=>{g(s),c({name:s.name,type:s.type,public:s.public}),m(!0)},R=s=>{y(s),j(!0)},E=()=>{x&&b(s=>s.filter(n=>n.id!==x.id)),j(!1),y(null)},T=()=>{j(!1),y(null)},k=C,L=Math.ceil(k.length/p),D=(v-1)*p,O=D+p,V=k.slice(D,O);return e.jsxs($,{maxWidth:"xl",children:[e.jsxs(r,{sx:{bgcolor:"grey.50",minHeight:"100vh",p:3},children:[e.jsx(r,{sx:{display:"flex",alignItems:"center",mb:3},children:e.jsx(d,{startIcon:e.jsx(q,{size:16}),onClick:z,sx:{color:"text.secondary",textTransform:"none","&:hover":{bgcolor:"transparent"}},children:"Listings"})}),e.jsx(t,{variant:"h4",sx:{fontWeight:600,color:"text.primary",mb:3},children:"Custom fields"}),e.jsx(r,{sx:{display:"flex",justifyContent:"flex-end",mb:3},children:e.jsx(d,{variant:"contained",startIcon:e.jsx(G,{size:16}),onClick:B,sx:{bgcolor:"primary.main","&:hover":{bgcolor:"primary.dark"}},children:"Add custom field"})}),e.jsx(w,{sx:{mb:3,bgcolor:"white"},children:e.jsx(U,{children:e.jsxs(X,{children:[e.jsx(J,{children:e.jsxs(W,{children:[e.jsx(a,{sx:{fontWeight:600},children:"Name"}),e.jsx(a,{sx:{fontWeight:600},children:"Type"}),e.jsx(a,{sx:{fontWeight:600},children:"Public"}),e.jsx(a,{sx:{fontWeight:600},children:"Variable"}),e.jsx(a,{align:"center",sx:{fontWeight:600},children:"Actions"})]})}),e.jsx(K,{children:V.map(s=>e.jsxs(W,{hover:!0,children:[e.jsx(a,{children:e.jsx(t,{variant:"body2",sx:{fontWeight:500},children:s.name})}),e.jsx(a,{children:e.jsx(t,{variant:"body2",children:s.type})}),e.jsx(a,{children:e.jsx(t,{variant:"body2",color:s.public?"success.main":"text.secondary",children:s.public?"Yes":"No"})}),e.jsx(a,{children:e.jsx(t,{variant:"body2",sx:{fontFamily:"monospace",bgcolor:"grey.100",px:1,py:.5,borderRadius:.5,fontSize:"0.875rem"},children:s.variable})}),e.jsx(a,{align:"center",children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(f,{size:"small",onClick:()=>N(s),sx:{color:"primary.main"},children:e.jsx(Q,{size:16})}),e.jsx(f,{size:"small",onClick:()=>R(s),sx:{color:"error.main"},children:e.jsx(S,{size:16})})]})})]},s.id))})]})})}),e.jsx(w,{sx:{p:2,bgcolor:"white"},children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(t,{variant:"body2",color:"text.secondary",children:"Show 20 per page"}),e.jsx(Z,{count:L,page:v,onChange:(s,n)=>A(n),color:"primary"})]})})]}),e.jsx(Y,{anchor:"right",open:P,onClose:u,sx:{"& .MuiDrawer-paper":{width:400,bgcolor:"white"}},children:e.jsxs(r,{sx:{p:3,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[e.jsx(t,{variant:"h6",sx:{fontWeight:600},children:h?"Edit custom field":"Add custom field"}),e.jsx(f,{onClick:u,sx:{color:"text.secondary"},children:e.jsx(S,{size:20})})]}),e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:3,flex:1},children:[e.jsxs(r,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(t,{variant:"body2",sx:{fontWeight:500},children:"Custom field name"}),e.jsx(t,{variant:"body2",sx:{color:"error.main"},children:"*"}),e.jsx(F,{size:16,color:"#666"})]}),e.jsx(ee,{fullWidth:!0,placeholder:"Name",value:i.name,onChange:s=>c({...i,name:s.target.value}),sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}})]}),e.jsxs(r,{children:[e.jsx(t,{variant:"body2",sx:{fontWeight:500,mb:1},children:"Type"}),e.jsx(se,{fullWidth:!0,children:e.jsxs(re,{value:i.type,onChange:s=>c({...i,type:s.target.value}),sx:{borderRadius:1},children:[e.jsx(l,{value:"Text",children:"Text"}),e.jsx(l,{value:"Number",children:"Number"}),e.jsx(l,{value:"Dropdown",children:"Dropdown"}),e.jsx(l,{value:"Checkbox",children:"Checkbox"}),e.jsx(l,{value:"Text Area",children:"Text Area"}),e.jsx(l,{value:"Date",children:"Date"}),e.jsx(l,{value:"Time",children:"Time"})]})})]}),e.jsxs(r,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(t,{variant:"body2",sx:{fontWeight:500},children:"Public"}),e.jsx(F,{size:16,color:"#666"})]}),e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(te,{checked:i.public,onChange:s=>c({...i,public:s.target.checked}),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"success.main"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"success.main"}}}),e.jsx(t,{variant:"body2",color:i.public?"success.main":"text.secondary",children:i.public?"Yes":"No"})]})]})]}),e.jsxs(r,{sx:{display:"flex",gap:2,mt:"auto"},children:[e.jsx(d,{fullWidth:!0,variant:"outlined",onClick:u,sx:{borderColor:"grey.300",color:"text.secondary","&:hover":{borderColor:"grey.400",bgcolor:"grey.50"}},children:"Cancel"}),e.jsx(d,{fullWidth:!0,variant:"contained",onClick:_,disabled:!i.name.trim(),sx:{bgcolor:"success.main","&:hover":{bgcolor:"success.dark"},"&:disabled":{bgcolor:"grey.300"}},children:h?"Update":"Save"})]})]})}),e.jsxs(ie,{open:M,onClose:T,maxWidth:"sm",fullWidth:!0,children:[e.jsx(ne,{children:e.jsx(t,{variant:"h6",sx:{fontWeight:600},children:"Delete Custom Field"})}),e.jsx(ae,{children:e.jsxs(t,{variant:"body1",children:['Are you sure you want to delete the custom field "',x==null?void 0:x.name,'"? This action cannot be undone.']})}),e.jsxs(oe,{sx:{p:3},children:[e.jsx(d,{onClick:T,variant:"outlined",sx:{borderColor:"grey.300",color:"text.secondary","&:hover":{borderColor:"grey.400",bgcolor:"grey.50"}},children:"Cancel"}),e.jsx(d,{onClick:E,variant:"contained",sx:{bgcolor:"error.main","&:hover":{bgcolor:"error.dark"}},children:"Yes, Delete"})]})]})]})}export{Se as ListingsCustomFieldsView};
