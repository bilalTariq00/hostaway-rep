import{G as xe,r as d,j as e,B as g,T as n,a as f,a4 as me,A as ge,C as p,I as C,e as M}from"./index-DDMGUD-_.js";import{D as ue}from"./content-DAzX26cm.js";import{CreateAccountPage as V}from"./create-account-ButI0pan.js";import{C as pe}from"./Card-C1fEEBVz.js";import{T as je}from"./TableContainer-Cp4gnwML.js";import{T as fe,a as ve,b as N,c as s,d as Ce}from"./TableHead-CMCmgIDA.js";import{C as O}from"./Checkbox-DrgNyHeB.js";import{C as be}from"./chevron-down-B-CwXX_-.js";import{E as ye}from"./eye-BdeNJELB.js";import{S as Se}from"./square-pen-BNpSXi0l.js";import{T as Pe}from"./trash-2-C_X8cVKe.js";import{F as Ue}from"./FormControlLabel-nlFIIXjS.js";import{a as we}from"./TablePagination-BG9ejIfr.js";import{D as b,b as y,a as F,c as H}from"./DialogContent-CkHDAA-B.js";import{M as ke}from"./Menu-Bm1ShPnp.js";import"./CardContent-Bmb6KKQR.js";import"./Breadcrumbs-C4RG1gWe.js";import"./camera-DQrW7rKh.js";import"./upload-DcK8EMNO.js";import"./Switch-CS1Ni3s3.js";import"./SwitchBase-s8UEUZOy.js";import"./TextField-BZcg-6kp.js";import"./Select-DixiLax7.js";import"./InputLabel-B_w9HMQG.js";import"./FormControl-BRgYzLHi.js";import"./eye-off-DfyncgOK.js";import"./Autocomplete-C54stYXw.js";import"./search-BrcmRr-v.js";import"./KeyboardArrowRight-D6UvfiY9.js";import"./LastPage-K8Xc1QT_.js";const Ie=[{id:"client1",name:"Luxury Rentals LLC",email:"contact@luxuryrentals.com"},{id:"client2",name:"Vacation Homes Inc",email:"info@vacationhomes.com"},{id:"client3",name:"Premium Properties",email:"hello@premiumprops.com"},{id:"client4",name:"Elite Stays",email:"support@elitestays.com"}],De=[{id:"305034",name:"La Dimora Del Cavaliere",location:"Anguillara Sabazia, Italy",clientId:"client1"},{id:"305035",name:"Navigli",location:"Milano, Italy",clientId:"client1"},{id:"305225",name:"Polacchi42",location:"Roma, Italy",clientId:"client2"},{id:"305421",name:"Superattico - Via Del Corso 43",location:"Roma, Italy",clientId:"client2"},{id:"306532",name:"Montecatini Terme",location:"Montecatini Terme, Italy",clientId:"client3"},{id:"306533",name:"Tuscany Villa",location:"Florence, Italy",clientId:"client3"},{id:"306534",name:"Coastal Retreat",location:"Amalfi, Italy",clientId:"client4"}],Te=a=>{switch(a){case"associate":return"primary";case"supervisor":return"warning";case"manager":return"success";case"user":return"default";case"team":return"secondary";default:return"default"}},We=a=>{switch(a){case"associate":return"Associate";case"supervisor":return"Supervisor";case"manager":return"Manager";case"user":return"User";case"team":return"Team";default:return a}},Me=(a=[])=>a.map(o=>{var l;return((l=Ie.find(h=>h.id===o))==null?void 0:l.name)||`Client ${o}`}).join(", "),Ne=(a=[])=>a.map(o=>{var l;return((l=De.find(h=>h.id===o))==null?void 0:l.name)||`Property ${o}`}).join(", "),Oe=(a=[])=>{const o=JSON.parse(localStorage.getItem("createdUsers")||"[]");return a.map(l=>{var h;return((h=o.find(j=>j.id===l))==null?void 0:h.name)||`User ${l}`}).join(", ")},ze=a=>{if(!a)return"No manager assigned";const l=JSON.parse(localStorage.getItem("createdUsers")||"[]").find(h=>h.id===a);return l?l.name:`Manager ${a}`},Ae=a=>{if(!a)return"No supervisor assigned";const l=JSON.parse(localStorage.getItem("createdUsers")||"[]").find(h=>h.id===a);return l?l.name:`Supervisor ${a}`},q=a=>{switch(a){case"active":return"success";case"inactive":return"warning";case"suspended":return"error";default:return"default"}},G=a=>{switch(a){case"active":return"Active";case"inactive":return"Inactive";case"suspended":return"Suspended";default:return"Active"}};function mt(){const a=xe(),[o,l]=d.useState([]),[h,j]=d.useState(null),[K,z]=d.useState(!1),[Q,A]=d.useState(!1),[X,S]=d.useState(!1),[Y,P]=d.useState(!1),[R,U]=d.useState(null),[u,w]=d.useState(null),[k,Z]=d.useState("active"),[x,I]=d.useState([]),[D,E]=d.useState(0),[v,_]=d.useState(5),[$,ee]=d.useState(!1),[B,T]=d.useState(null);d.useEffect(()=>{const i=JSON.parse(localStorage.getItem("createdUsers")||"[]").map(c=>({...c,status:c.status||"active"}));l(i)},[]);const te=t=>{j(t),z(!0)},se=t=>{j(t),A(!0)},ne=t=>{T(t),S(!0)},ae=()=>{if(B){const t=o.filter(i=>i.id!==B);l(t),localStorage.setItem("createdUsers",JSON.stringify(t)),S(!1),T(null)}},m=()=>{z(!1),A(!1),S(!1),P(!1),j(null),T(null),w(null),U(null)},ie=(t,i)=>{t.stopPropagation(),U(t.currentTarget),w(i)},L=()=>{U(null)},W=t=>{u&&(Z(t),P(!0),L())},re=()=>{if(u){const t=o.map(i=>i.id===u.id?{...i,status:k}:i);l(t),localStorage.setItem("createdUsers",JSON.stringify(t)),P(!1),w(null)}},oe=t=>{if(t.target.checked){const i=o.map(c=>c.id);I(i);return}I([])},le=(t,i)=>{const c=x.indexOf(i);let r=[];c===-1?r=r.concat(x,i):c===0?r=r.concat(x.slice(1)):c===x.length-1?r=r.concat(x.slice(0,-1)):c>0&&(r=r.concat(x.slice(0,c),x.slice(c+1))),I(r)},ce=(t,i)=>{E(i)},de=t=>{_(parseInt(t.target.value,10)),E(0)},he=t=>x.indexOf(t)!==-1,J=o.slice(D*v,D*v+v);return e.jsxs(ue,{maxWidth:"xl",children:[e.jsxs(g,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(g,{children:[e.jsx(n,{variant:"h4",gutterBottom:!0,children:"User Management"}),e.jsx(n,{variant:"body2",color:"text.secondary",children:"Manage created user accounts and their property assignments"})]}),e.jsx(f,{variant:"contained",onClick:()=>a("/create-account"),sx:{height:"fit-content"},children:"Create Account"})]}),e.jsxs(pe,{children:[e.jsx(je,{component:me,sx:{boxShadow:"none"},children:e.jsxs(fe,{size:$?"small":"medium",children:[e.jsx(ve,{children:e.jsxs(N,{children:[e.jsx(s,{padding:"checkbox",children:e.jsx(O,{indeterminate:x.length>0&&x.length<o.length,checked:o.length>0&&x.length===o.length,onChange:oe})}),e.jsx(s,{children:e.jsx(n,{variant:"subtitle2",sx:{fontWeight:600},children:"Name"})}),e.jsx(s,{children:e.jsx(n,{variant:"subtitle2",sx:{fontWeight:600},children:"Email"})}),e.jsx(s,{children:e.jsx(n,{variant:"subtitle2",sx:{fontWeight:600},children:"Phone"})}),e.jsx(s,{children:e.jsx(n,{variant:"subtitle2",sx:{fontWeight:600},children:"Company"})}),e.jsx(s,{children:e.jsx(n,{variant:"subtitle2",sx:{fontWeight:600},children:"Clients"})}),e.jsx(s,{children:e.jsx(n,{variant:"subtitle2",sx:{fontWeight:600},children:"Properties"})}),e.jsx(s,{children:e.jsx(n,{variant:"subtitle2",sx:{fontWeight:600},children:"Managed Users"})}),e.jsx(s,{children:e.jsx(n,{variant:"subtitle2",sx:{fontWeight:600},children:"Manager"})}),e.jsx(s,{children:e.jsx(n,{variant:"subtitle2",sx:{fontWeight:600},children:"Supervisor"})}),e.jsx(s,{children:e.jsx(n,{variant:"subtitle2",sx:{fontWeight:600},children:"Role"})}),e.jsx(s,{children:e.jsx(n,{variant:"subtitle2",sx:{fontWeight:600},children:"Status"})}),e.jsx(s,{align:"right",children:e.jsx(n,{variant:"subtitle2",sx:{fontWeight:600},children:"Actions"})})]})}),e.jsx(Ce,{children:J.length===0?e.jsx(N,{children:e.jsx(s,{colSpan:13,align:"center",sx:{py:8},children:e.jsx(n,{variant:"body2",color:"text.secondary",children:"No users created yet. Create your first user account to get started."})})}):J.map(t=>{const i=he(t.id),c=`enhanced-table-checkbox-${t.id}`;return e.jsxs(N,{hover:!0,onClick:r=>le(r,t.id),role:"checkbox","aria-checked":i,selected:i,sx:{cursor:"pointer"},children:[e.jsx(s,{padding:"checkbox",children:e.jsx(O,{checked:i,inputProps:{"aria-labelledby":c}})}),e.jsx(s,{component:"th",id:c,scope:"row",children:e.jsxs(g,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(ge,{sx:{bgcolor:t.avatar?"transparent":"primary.main",width:40,height:40,backgroundImage:t.avatar?`url(${t.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:!t.avatar&&t.name.charAt(0).toUpperCase()}),e.jsx(g,{children:e.jsx(n,{variant:"body2",sx:{fontWeight:500},children:t.name})})]})}),e.jsx(s,{children:e.jsx(n,{variant:"body2",children:t.email})}),e.jsx(s,{children:e.jsx(n,{variant:"body2",color:"text.secondary",children:"+1 (555) 123-4567"})}),e.jsx(s,{children:e.jsx(n,{variant:"body2",color:"text.secondary",children:"Hostaway Inc"})}),e.jsx(s,{children:e.jsx(n,{variant:"body2",color:"text.secondary",sx:{maxWidth:150},children:t.assignedClients&&t.assignedClients.length>0?Me(t.assignedClients):"No clients assigned"})}),e.jsx(s,{children:e.jsx(n,{variant:"body2",color:"text.secondary",sx:{maxWidth:150},children:t.assignedProperties&&t.assignedProperties.length>0?Ne(t.assignedProperties):"No properties assigned"})}),e.jsx(s,{children:e.jsx(n,{variant:"body2",color:"text.secondary",sx:{maxWidth:150},children:t.assignedUsers&&t.assignedUsers.length>0?Oe(t.assignedUsers):"No users managed"})}),e.jsx(s,{children:e.jsx(n,{variant:"body2",color:"text.secondary",sx:{maxWidth:150},children:ze(t.assignedManager)})}),e.jsx(s,{children:e.jsx(n,{variant:"body2",color:"text.secondary",sx:{maxWidth:150},children:Ae(t.assignedSupervisor)})}),e.jsx(s,{children:e.jsx(p,{label:We(t.role),color:Te(t.role),size:"small",variant:"outlined"})}),e.jsx(s,{children:e.jsxs(g,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(p,{label:G(t.status),color:q(t.status),size:"small"}),e.jsx(C,{size:"small",onClick:r=>ie(r,t),sx:{ml:1},children:e.jsx(be,{size:14})})]})}),e.jsx(s,{align:"right",children:e.jsxs(g,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(C,{size:"small",onClick:r=>{r.stopPropagation(),te(t)},color:"primary",children:e.jsx(ye,{size:16})}),e.jsx(C,{size:"small",onClick:r=>{r.stopPropagation(),se(t)},color:"primary",children:e.jsx(Se,{size:16})}),e.jsx(C,{size:"small",onClick:r=>{r.stopPropagation(),ne(t.id)},color:"error",children:e.jsx(Pe,{size:16})})]})})]},t.id)})})]})}),e.jsxs(g,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2},children:[e.jsx(Ue,{control:e.jsx(O,{checked:$,onChange:t=>ee(t.target.checked)}),label:"Dense"}),e.jsx(we,{rowsPerPageOptions:[5,10,25],component:"div",count:o.length,rowsPerPage:v,page:D,onPageChange:ce,onRowsPerPageChange:de,labelRowsPerPage:"Rows per page:",labelDisplayedRows:({from:t,to:i,count:c})=>`${t}-${i} of ${c}`})]})]}),e.jsx(b,{open:K,onClose:m,maxWidth:"lg",fullWidth:!0,children:e.jsx(y,{sx:{p:0},children:e.jsx(V,{userToEdit:h||void 0,viewMode:!0,onClose:m})})}),e.jsx(b,{open:Q,onClose:m,maxWidth:"lg",fullWidth:!0,children:e.jsx(y,{sx:{p:0},children:e.jsx(V,{userToEdit:h||void 0,viewMode:!1,onClose:m})})}),e.jsxs(b,{open:X,onClose:m,children:[e.jsx(F,{children:"Confirm Delete"}),e.jsx(y,{children:e.jsx(n,{children:"Are you sure you want to delete this user? This action cannot be undone."})}),e.jsxs(H,{children:[e.jsx(f,{onClick:m,children:"Cancel"}),e.jsx(f,{onClick:ae,color:"error",variant:"contained",children:"Delete"})]})]}),e.jsxs(ke,{anchorEl:R,open:!!R,onClose:L,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:[e.jsxs(M,{onClick:()=>W("active"),children:[e.jsx(p,{label:"Active",color:"success",size:"small",sx:{mr:1}}),"Active"]}),e.jsxs(M,{onClick:()=>W("inactive"),children:[e.jsx(p,{label:"Inactive",color:"warning",size:"small",sx:{mr:1}}),"Inactive"]}),e.jsxs(M,{onClick:()=>W("suspended"),children:[e.jsx(p,{label:"Suspended",color:"error",size:"small",sx:{mr:1}}),"Suspended"]})]}),e.jsxs(b,{open:Y,onClose:m,children:[e.jsx(F,{children:"Confirm Status Change"}),e.jsx(y,{children:e.jsxs(n,{children:["Are you sure you want to change ",u==null?void 0:u.name,"'s status to"," ",e.jsx(p,{label:G(k),color:q(k),size:"small"}),"?"]})}),e.jsxs(H,{children:[e.jsx(f,{onClick:m,children:"Cancel"}),e.jsx(f,{onClick:re,color:"primary",variant:"contained",children:"Confirm"})]})]})]})}export{mt as UserManagementPage};
