import{D as F,a3 as B,bh as L,r as I,j as e,B as o,I as S,d as g,T as j,e as u,a as x}from"./index-DlK49mD9.js";import{D as W}from"./content-BncdO-AK.js";import{C as Q}from"./Card-C2DhIU3E.js";import{C as N}from"./CardContent-CO_bIGDJ.js";import{T as y}from"./TextField-DGQVylbQ.js";import{F as O}from"./FormControl-DsPW8NaL.js";import{I as J}from"./InputLabel-vBrrCZYs.js";import{S as P}from"./Select-hkki-_gR.js";import{F as E}from"./FormControlLabel-DYCM3_AA.js";import{S as G}from"./Switch-Bj_iObyt.js";import"./Menu-Cd2TK2zY.js";import"./SwitchBase-D6K1hBX3.js";const w=[{id:1,name:"Standard Review Template",description:"Basic template for general property reviews",category:"General",questions:["How was your overall experience?","Rate the cleanliness of the property","How was the communication with the host?","Would you recommend this property to others?"],createdAt:"2024-01-15",status:"Active",usageCount:45},{id:2,name:"Luxury Property Template",description:"Specialized template for high-end properties",category:"Luxury",questions:["Rate the luxury amenities provided","How was the quality of service?","Rate the property maintenance","How was the check-in/check-out process?","Rate the overall value for money"],createdAt:"2024-01-20",status:"Active",usageCount:23}];function te(){const p=F(),{id:c}=B(),v=L(),n=v.pathname.includes("/edit"),m=v.pathname.includes("/duplicate"),i=v.pathname.includes("/view"),[l,h]=I.useState({name:"",description:"",category:"General",questions:[""],status:"Active"});I.useEffect(()=>{if(c&&(n||m||i)){const t=localStorage.getItem("reviewTemplates");let a=w;t&&(a=JSON.parse(t));const s=a.find(r=>r.id===parseInt(c));s&&h({name:m?`${s.name} (Copy)`:s.name,description:s.description,category:s.category,questions:s.questions.length>0?s.questions:[""],status:m?"Draft":s.status})}},[c,n,m,i]);const f=(t,a)=>{h(s=>({...s,[t]:a}))},b=(t,a)=>{const s=[...l.questions];s[t]=a,h(r=>({...r,questions:s}))},D=()=>{h(t=>({...t,questions:[...t.questions,""]}))},q=t=>{if(l.questions.length>1){const a=l.questions.filter((s,r)=>r!==t);h(s=>({...s,questions:a}))}},R=()=>{var r,C;const t=localStorage.getItem("reviewTemplates");let a=w;t&&(a=JSON.parse(t));const s={...l,id:n?parseInt(c):Date.now(),createdAt:n?(r=a.find(d=>d.id===parseInt(c)))==null?void 0:r.createdAt:new Date().toISOString().split("T")[0],usageCount:n&&((C=a.find(d=>d.id===parseInt(c)))==null?void 0:C.usageCount)||0};if(n){const d=a.map(T=>T.id===parseInt(c)?s:T);localStorage.setItem("reviewTemplates",JSON.stringify(d))}else{const d=[...a,s];localStorage.setItem("reviewTemplates",JSON.stringify(d))}p.push("/reviews/templates")},k=()=>{if(n){const t=localStorage.getItem("reviewTemplates");let a=w;t&&(a=JSON.parse(t));const s=a.filter(r=>r.id!==parseInt(c));localStorage.setItem("reviewTemplates",JSON.stringify(s))}p.push("/reviews/templates")},A=()=>i?"View Review Template":n?"Edit Review Template":m?"Duplicate Review Template":"Create Review Template";return e.jsxs(W,{maxWidth:"lg",children:[e.jsx(o,{sx:{mb:3},children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(S,{onClick:()=>p.push("/reviews/templates"),sx:{mr:1},children:e.jsx(g,{icon:"eva:arrow-back-fill"})}),e.jsx(j,{variant:"h4",sx:{fontWeight:600},children:A()})]})}),e.jsx(Q,{children:e.jsx(N,{sx:{p:3},children:e.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(o,{children:[e.jsx(j,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Basic Information"}),e.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(y,{label:"Template Name",value:l.name,onChange:t=>f("name",t.target.value),disabled:i,fullWidth:!0}),e.jsx(y,{label:"Description",value:l.description,onChange:t=>f("description",t.target.value),disabled:i,multiline:!0,rows:3,fullWidth:!0}),e.jsxs(O,{fullWidth:!0,disabled:i,children:[e.jsx(J,{children:"Category"}),e.jsxs(P,{value:l.category,onChange:t=>f("category",t.target.value),label:"Category",children:[e.jsx(u,{value:"General",children:"General"}),e.jsx(u,{value:"Luxury",children:"Luxury"}),e.jsx(u,{value:"Business",children:"Business"}),e.jsx(u,{value:"Family",children:"Family"}),e.jsx(u,{value:"Pet-Friendly",children:"Pet-Friendly"}),e.jsx(u,{value:"Long-term",children:"Long-term"})]})]}),e.jsx(E,{control:e.jsx(G,{checked:l.status==="Active",onChange:t=>f("status",t.target.checked?"Active":"Inactive"),disabled:i}),label:"Active"})]})]}),e.jsxs(o,{children:[e.jsx(j,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Review Questions"}),e.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:2},children:[l.questions.map((t,a)=>e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(y,{label:`Question ${a+1}`,value:t,onChange:s=>b(a,s.target.value),disabled:i,fullWidth:!0}),!i&&l.questions.length>1&&e.jsx(S,{onClick:()=>q(a),color:"error",children:e.jsx(g,{icon:"eva:minus-circle-fill"})})]},a)),!i&&e.jsx(x,{variant:"outlined",startIcon:e.jsx(g,{icon:"eva:plus-fill"}),onClick:D,sx:{alignSelf:"flex-start"},children:"Add Question"})]})]})]})})}),!i&&e.jsxs(o,{sx:{display:"flex",justifyContent:"flex-end",gap:2,mt:3},children:[e.jsx(x,{variant:"outlined",onClick:()=>p.push("/reviews/templates"),children:"Cancel"}),n&&e.jsx(x,{variant:"outlined",color:"error",onClick:k,children:"Delete Template"}),e.jsx(x,{variant:"contained",onClick:R,children:n?"Update Template":"Save Template"})]}),i&&e.jsx(o,{sx:{display:"flex",justifyContent:"flex-end",gap:2,mt:3},children:e.jsx(x,{variant:"outlined",onClick:()=>p.push("/reviews/templates"),children:"Back to Templates"})})]})}export{te as ReviewTemplateFormPage};
