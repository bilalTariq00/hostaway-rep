import{D as O,a3 as P,bh as U,r as N,j as e,B as u,I as A,d as I,T as d,a as b,e as a}from"./index-DlK49mD9.js";import{D as V}from"./content-BncdO-AK.js";import{G as x}from"./Grid-CFPLP85A.js";import{T as k}from"./TextField-DGQVylbQ.js";import{C as v}from"./Card-C2DhIU3E.js";import{C as p}from"./CardContent-CO_bIGDJ.js";import{F as m}from"./FormControl-DsPW8NaL.js";import{I as j}from"./InputLabel-vBrrCZYs.js";import{S as g}from"./Select-hkki-_gR.js";import{C as R}from"./Checkbox-Cws__oH0.js";import{F as H}from"./FormControlLabel-DYCM3_AA.js";import{R as _}from"./Rating-CDblUQU5.js";import{D as K,a as Y,b as $,c as q}from"./DialogContent-BrwwiAlS.js";import"./Menu-Cd2TK2zY.js";import"./SwitchBase-D6K1hBX3.js";const w=[{id:1,title:"Property Inspection",description:"Conduct thorough inspection of the property",startDate:"2024-01-15",startTime:"09:00",endDate:"2024-01-15",endTime:"17:00",category:"Inspection",listing:"Beach Villa",channel:"Airbnb",reservation:"RES-001",status:"To Do",assignee:"John Doe",supervisor:"Jane Smith",group:"Maintenance Team",cost:"150",costCurrency:"USD",costDescription:"Inspection fee",autoGenerateExpense:!0,checklist:["Check all lights and switches","Test air conditioning","Inspect bathroom fixtures","Check kitchen appliances"],attachments:[],customFields:[],feedbackScore:4,resolutionNote:"Task completed successfully",feedbackNote:"Good work done"},{id:2,title:"Guest Welcome",description:"Prepare welcome package for new guests",startDate:"2024-01-20",startTime:"14:00",endDate:"2024-01-20",endTime:"16:00",category:"Guest Service",listing:"Mountain Cabin",channel:"Booking.com",reservation:"RES-002",status:"In Progress",assignee:"Mike Johnson",supervisor:"Sarah Wilson",group:"Guest Services",cost:"75",costCurrency:"USD",costDescription:"Welcome package materials",autoGenerateExpense:!1,checklist:["Prepare welcome package","Set up guest information folder","Check cleanliness standards"],attachments:[],customFields:[],feedbackScore:5,resolutionNote:"Excellent guest service",feedbackNote:"Guests were very happy"}];function ue(){const W=O(),{id:C}=P(),E=U(),D=E.pathname.includes("/edit"),y=E.pathname.includes("/duplicate"),f=E.pathname.includes("/view"),[i,T]=N.useState({title:"",description:"",startDate:"",startTime:"",endDate:"",endTime:"",category:"",listing:"",channel:"",reservation:"",status:"To Do",assignee:"",supervisor:"",group:"",cost:"",costCurrency:"USD",costDescription:"",autoGenerateExpense:!1,checklist:[],attachments:[],customFields:[],feedbackScore:0,resolutionNote:"",feedbackNote:""}),[J,S]=N.useState(!1);N.useEffect(()=>{const s=(()=>{const l=localStorage.getItem("tasks"),c=localStorage.getItem("archivedTasks");let h=[];return l&&(h=[...h,...JSON.parse(l)]),c&&(h=[...h,...JSON.parse(c)]),h.length===0&&(h=w),h})().find(l=>l.id===parseInt(C||"0"));(D||f)&&s?T({title:s.title||"",description:s.description||"",startDate:s.startDate||"",startTime:s.startTime||"",endDate:s.endDate||"",endTime:s.endTime||"",category:s.category||"",listing:s.listing||"",channel:s.channel||"",reservation:s.reservation||"",status:s.status||"To Do",assignee:s.assignee||"",supervisor:s.supervisor||"",group:s.group||"",cost:s.cost||"",costCurrency:s.costCurrency||"USD",costDescription:s.costDescription||"",autoGenerateExpense:s.autoGenerateExpense||!1,checklist:s.checklist||[],attachments:s.attachments||[],customFields:s.customFields||[],feedbackScore:s.feedbackScore||0,resolutionNote:s.resolutionNote||"",feedbackNote:s.feedbackNote||""}):y&&s&&T({title:`${s.title} (Copy)`,description:s.description||"",startDate:s.startDate||"",startTime:s.startTime||"",endDate:s.endDate||"",endTime:s.endTime||"",category:s.category||"",listing:s.listing||"",channel:s.channel||"",reservation:s.reservation||"",status:"To Do",assignee:s.assignee||"",supervisor:s.supervisor||"",group:s.group||"",cost:s.cost||"",costCurrency:s.costCurrency||"USD",costDescription:s.costDescription||"",autoGenerateExpense:s.autoGenerateExpense||!1,checklist:s.checklist||[],attachments:s.attachments||[],customFields:s.customFields||[],feedbackScore:0,resolutionNote:"",feedbackNote:""})},[C,D,y,f]);const r=(t,o)=>{f||T(s=>({...s,[t]:o}))},G=()=>{f||T(t=>({...t,checklist:[...t.checklist,""]}))},L=(t,o)=>{f||T(s=>({...s,checklist:s.checklist.map((l,c)=>c===t?o:l)}))},F=t=>{f||T(o=>({...o,checklist:o.checklist.filter((s,l)=>l!==t)}))},B=()=>{if(f)return;const o=(()=>{const s=localStorage.getItem("tasks"),l=localStorage.getItem("archivedTasks");let c=[];return s&&(c=[...c,...JSON.parse(s)]),l&&(c=[...c,...JSON.parse(l)]),c.length===0&&(c=w),c})();if(y){const s={id:Date.now(),...i,checklist:i.checklist.filter(c=>c.trim()!=="")},l=[...o,s];localStorage.setItem("tasks",JSON.stringify(l))}else if(D&&C){const s=o.map(l=>l.id===parseInt(C)?{...l,...i,checklist:i.checklist.filter(c=>c.trim()!=="")}:l);localStorage.setItem("tasks",JSON.stringify(s))}else{const s={id:Date.now(),...i,checklist:i.checklist.filter(c=>c.trim()!=="")},l=[...o,s];localStorage.setItem("tasks",JSON.stringify(l))}W.push("/tasks/archive")},z=()=>{if(C){const s=(()=>{const l=localStorage.getItem("tasks"),c=localStorage.getItem("archivedTasks");let h=[];return l&&(h=[...h,...JSON.parse(l)]),c&&(h=[...h,...JSON.parse(c)]),h.length===0&&(h=w),h})().filter(l=>l.id!==parseInt(C));localStorage.setItem("tasks",JSON.stringify(s))}S(!1),W.push("/tasks/archive")},M=()=>f?"View Task":D?"Edit Task":y?"Duplicate Task":"Add Task",n=f;return e.jsxs(V,{maxWidth:"lg",children:[e.jsx(u,{sx:{mb:3},children:e.jsxs(u,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(A,{onClick:()=>W.push("/tasks/archive"),children:e.jsx(I,{icon:"eva:arrow-back-fill"})}),e.jsx(d,{variant:"h4",sx:{fontWeight:600},children:M()})]}),!n&&e.jsx(b,{variant:"contained",onClick:B,disabled:!i.title.trim(),children:"Save task"})]})}),e.jsxs(x,{container:!0,spacing:3,children:[e.jsxs(x,{size:{xs:12,md:8},children:[e.jsx(u,{sx:{mb:3},children:e.jsx(k,{fullWidth:!0,label:"Task title",value:i.title,onChange:t=>r("title",t.target.value),placeholder:"Enter task title...",disabled:n})}),e.jsx(v,{sx:{mb:3},children:e.jsxs(p,{children:[e.jsx(d,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Schedule"}),e.jsxs(x,{container:!0,spacing:2,children:[e.jsx(x,{size:{xs:12,sm:6},children:e.jsx(k,{fullWidth:!0,label:"Start date (Local time)",type:"date",value:i.startDate,onChange:t=>r("startDate",t.target.value),disabled:n,InputLabelProps:{shrink:!0}})}),e.jsx(x,{size:{xs:12,sm:6},children:e.jsxs(m,{fullWidth:!0,children:[e.jsx(j,{children:"Start time (Local time)"}),e.jsxs(g,{value:i.startTime,label:"Start time (Local time)",onChange:t=>r("startTime",t.target.value),disabled:n,children:[e.jsx(a,{value:"09:00",children:"09:00"}),e.jsx(a,{value:"10:00",children:"10:00"}),e.jsx(a,{value:"11:00",children:"11:00"}),e.jsx(a,{value:"12:00",children:"12:00"}),e.jsx(a,{value:"13:00",children:"13:00"}),e.jsx(a,{value:"14:00",children:"14:00"}),e.jsx(a,{value:"15:00",children:"15:00"}),e.jsx(a,{value:"16:00",children:"16:00"}),e.jsx(a,{value:"17:00",children:"17:00"})]})]})}),e.jsx(x,{size:{xs:12,sm:6},children:e.jsx(k,{fullWidth:!0,label:"End date (Local time)",type:"date",value:i.endDate,onChange:t=>r("endDate",t.target.value),disabled:n,InputLabelProps:{shrink:!0}})}),e.jsx(x,{size:{xs:12,sm:6},children:e.jsxs(m,{fullWidth:!0,children:[e.jsx(j,{children:"End time (Local time)"}),e.jsxs(g,{value:i.endTime,label:"End time (Local time)",onChange:t=>r("endTime",t.target.value),disabled:n,children:[e.jsx(a,{value:"09:00",children:"09:00"}),e.jsx(a,{value:"10:00",children:"10:00"}),e.jsx(a,{value:"11:00",children:"11:00"}),e.jsx(a,{value:"12:00",children:"12:00"}),e.jsx(a,{value:"13:00",children:"13:00"}),e.jsx(a,{value:"14:00",children:"14:00"}),e.jsx(a,{value:"15:00",children:"15:00"}),e.jsx(a,{value:"16:00",children:"16:00"}),e.jsx(a,{value:"17:00",children:"17:00"})]})]})})]})]})}),e.jsx(v,{sx:{mb:3},children:e.jsxs(p,{children:[e.jsx(d,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Details"}),e.jsx(d,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Description"}),e.jsx(k,{fullWidth:!0,multiline:!0,rows:4,value:i.description,onChange:t=>r("description",t.target.value),placeholder:"Enter description...",disabled:n})]})}),e.jsx(v,{sx:{mb:3},children:e.jsxs(p,{children:[e.jsx(d,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Link"}),e.jsxs(x,{container:!0,spacing:2,children:[e.jsx(x,{size:{xs:12,sm:6},children:e.jsxs(m,{fullWidth:!0,children:[e.jsx(j,{children:"Category"}),e.jsxs(g,{value:i.category,label:"Category",onChange:t=>r("category",t.target.value),disabled:n,children:[e.jsx(a,{value:"Inspection",children:"Inspection"}),e.jsx(a,{value:"Guest Service",children:"Guest Service"}),e.jsx(a,{value:"Maintenance",children:"Maintenance"}),e.jsx(a,{value:"Cleaning",children:"Cleaning"})]})]})}),e.jsx(x,{size:{xs:12,sm:6},children:e.jsxs(m,{fullWidth:!0,children:[e.jsx(j,{children:"Listing"}),e.jsxs(g,{value:i.listing,label:"Listing",onChange:t=>r("listing",t.target.value),disabled:n,children:[e.jsx(a,{value:"Beach Villa",children:"Beach Villa"}),e.jsx(a,{value:"Mountain Cabin",children:"Mountain Cabin"}),e.jsx(a,{value:"City Apartment",children:"City Apartment"})]})]})}),e.jsx(x,{size:{xs:12,sm:6},children:e.jsxs(m,{fullWidth:!0,children:[e.jsx(j,{children:"Channel"}),e.jsxs(g,{value:i.channel,label:"Channel",onChange:t=>r("channel",t.target.value),disabled:n,children:[e.jsx(a,{value:"Airbnb",children:"Airbnb"}),e.jsx(a,{value:"Booking.com",children:"Booking.com"}),e.jsx(a,{value:"Direct",children:"Direct"})]})]})}),e.jsx(x,{size:{xs:12,sm:6},children:e.jsxs(m,{fullWidth:!0,children:[e.jsx(j,{children:"Reservation"}),e.jsxs(g,{value:i.reservation,label:"Reservation",onChange:t=>r("reservation",t.target.value),disabled:n,children:[e.jsx(a,{value:"RES-001",children:"RES-001"}),e.jsx(a,{value:"RES-002",children:"RES-002"}),e.jsx(a,{value:"RES-003",children:"RES-003"})]})]})})]})]})}),e.jsx(v,{sx:{mb:3},children:e.jsxs(p,{children:[e.jsxs(u,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(d,{variant:"h6",sx:{fontWeight:600},children:"Task checklist"}),!n&&e.jsx(b,{variant:"text",color:"primary",onClick:G,children:"ADD CHECKLIST"})]}),i.checklist.map((t,o)=>e.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(R,{disabled:!0,sx:{p:.5}}),e.jsx(k,{fullWidth:!0,value:t,onChange:s=>L(o,s.target.value),placeholder:"Enter checklist item...",disabled:n,size:"small"}),!n&&e.jsx(A,{size:"small",onClick:()=>F(o),sx:{color:"error.main"},children:e.jsx(I,{icon:"eva:trash-2-fill"})})]},o)),i.checklist.length===0&&e.jsx(d,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",py:2},children:"No checklist items added yet."}),!n&&e.jsx(u,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:e.jsx(b,{variant:"contained",size:"small",onClick:G,startIcon:e.jsx(I,{icon:"eva:plus-fill"}),children:"Add"})})]})}),e.jsx(v,{sx:{mb:3},children:e.jsxs(p,{children:[e.jsxs(u,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(d,{variant:"h6",sx:{fontWeight:600},children:"Attachments"}),!n&&e.jsx(b,{variant:"text",color:"primary",children:"ADD ATTACHMENT"})]}),e.jsx(d,{variant:"body2",color:"text.secondary",children:"No attachments added yet."})]})}),e.jsx(v,{sx:{mb:3},children:e.jsxs(p,{children:[e.jsx(d,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Custom fields"}),e.jsx(d,{variant:"body2",color:"text.secondary",children:"No custom fields added."})]})})]}),e.jsxs(x,{size:{xs:12,md:4},children:[e.jsx(v,{sx:{mb:3},children:e.jsxs(p,{children:[e.jsx(d,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Status"}),e.jsxs(m,{fullWidth:!0,children:[e.jsx(j,{children:"Status"}),e.jsxs(g,{value:i.status,label:"Status",onChange:t=>r("status",t.target.value),disabled:n,children:[e.jsx(a,{value:"To Do",children:"To Do"}),e.jsx(a,{value:"In Progress",children:"In Progress"}),e.jsx(a,{value:"Done",children:"Done"}),e.jsx(a,{value:"Cancelled",children:"Cancelled"})]})]})]})}),e.jsx(v,{sx:{mb:3},children:e.jsxs(p,{children:[e.jsx(d,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Users"}),e.jsxs(u,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(m,{fullWidth:!0,children:[e.jsx(j,{children:"Assignee"}),e.jsxs(g,{value:i.assignee,label:"Assignee",onChange:t=>r("assignee",t.target.value),disabled:n,children:[e.jsx(a,{value:"John Doe",children:"John Doe"}),e.jsx(a,{value:"Mike Johnson",children:"Mike Johnson"}),e.jsx(a,{value:"Tom Brown",children:"Tom Brown"})]})]}),e.jsxs(m,{fullWidth:!0,children:[e.jsx(j,{children:"Supervisor"}),e.jsxs(g,{value:i.supervisor,label:"Supervisor",onChange:t=>r("supervisor",t.target.value),disabled:n,children:[e.jsx(a,{value:"Jane Smith",children:"Jane Smith"}),e.jsx(a,{value:"Sarah Wilson",children:"Sarah Wilson"}),e.jsx(a,{value:"David Lee",children:"David Lee"})]})]}),e.jsxs(m,{fullWidth:!0,children:[e.jsx(j,{children:"Group"}),e.jsxs(g,{value:i.group,label:"Group",onChange:t=>r("group",t.target.value),disabled:n,children:[e.jsx(a,{value:"Maintenance Team",children:"Maintenance Team"}),e.jsx(a,{value:"Guest Services",children:"Guest Services"}),e.jsx(a,{value:"Cleaning Team",children:"Cleaning Team"})]})]})]})]})}),e.jsx(v,{sx:{mb:3},children:e.jsxs(p,{children:[e.jsx(d,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Cost"}),e.jsxs(u,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(u,{sx:{display:"flex",gap:1},children:[e.jsx(k,{fullWidth:!0,label:"Cost",value:i.cost,onChange:t=>r("cost",t.target.value),disabled:n,type:"number"}),e.jsxs(m,{sx:{minWidth:120},children:[e.jsx(j,{children:"Currency"}),e.jsxs(g,{value:i.costCurrency,label:"Currency",onChange:t=>r("costCurrency",t.target.value),disabled:n,children:[e.jsx(a,{value:"USD",children:"USD"}),e.jsx(a,{value:"EUR",children:"EUR"}),e.jsx(a,{value:"GBP",children:"GBP"})]})]})]}),e.jsx(k,{fullWidth:!0,multiline:!0,rows:2,label:"Cost description",value:i.costDescription,onChange:t=>r("costDescription",t.target.value),disabled:n}),e.jsx(H,{control:e.jsx(R,{checked:i.autoGenerateExpense,onChange:t=>r("autoGenerateExpense",t.target.checked),disabled:n}),label:"Automatically generate an expense when the task is marked as done"})]})]})}),e.jsx(v,{sx:{mb:3},children:e.jsxs(p,{children:[e.jsx(d,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Resolution"}),e.jsxs(u,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(u,{children:[e.jsx(d,{variant:"body2",sx:{mb:1},children:"Feedback score"}),e.jsx(_,{value:i.feedbackScore,onChange:(t,o)=>r("feedbackScore",o||0),disabled:n})]}),e.jsx(k,{fullWidth:!0,multiline:!0,rows:2,label:"Resolution note",value:i.resolutionNote,onChange:t=>r("resolutionNote",t.target.value),disabled:n}),e.jsx(k,{fullWidth:!0,multiline:!0,rows:2,label:"Feedback note",value:i.feedbackNote,onChange:t=>r("feedbackNote",t.target.value),disabled:n})]})]})}),D&&e.jsx(u,{sx:{mt:2},children:e.jsx(b,{fullWidth:!0,variant:"outlined",color:"error",onClick:()=>S(!0),startIcon:e.jsx(I,{icon:"eva:trash-2-fill"}),children:"Delete Task"})})]})]}),e.jsxs(K,{open:J,onClose:()=>S(!1),children:[e.jsx(Y,{children:"Delete?"}),e.jsx($,{children:e.jsx(d,{children:"Are you sure you want to delete this task? This action cannot be undone."})}),e.jsxs(q,{children:[e.jsx(b,{onClick:()=>S(!1),children:"No"}),e.jsx(b,{onClick:z,color:"error",variant:"contained",children:"Yes"})]})]})]})}export{ue as TaskFormPage};
