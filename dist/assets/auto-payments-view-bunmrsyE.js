import{D as ie,r as h,j as e,B as i,T as a,a4 as z,a as d,d as u,C as R,x as ne,e as n,I as ae}from"./index-DlK49mD9.js";import{D as re}from"./content-BncdO-AK.js";import{T as le,a as k}from"./Tabs-CawWx8bN.js";import{G as v}from"./Grid-CFPLP85A.js";import{C as P}from"./Card-C2DhIU3E.js";import{T as A}from"./TextField-DGQVylbQ.js";import{F as m}from"./FormControl-DsPW8NaL.js";import{I as V}from"./InputLabel-vBrrCZYs.js";import{S as g}from"./Select-hkki-_gR.js";import{F as oe}from"./FormControlLabel-DYCM3_AA.js";import{S as ce}from"./Switch-Bj_iObyt.js";import"./KeyboardArrowRight-B0juUeOl.js";import"./Menu-Cd2TK2zY.js";import"./SwitchBase-D6K1hBX3.js";const de=[{id:1,title:"VRBO | PAGINA WEB",channels:["Vrbo","Booking Engine"],autoCharges:[{id:1,type:"Charge",title:"Prenotazione Web | VRB",method:"Credit card",amount:100,amountType:"%",scheduledBy:"At",reservationEvent:"Reservation creation"}],applyForNewListings:!0,selectedListings:[1,2,3,4,5,6,7,8,9,10,11,12],status:"Active",createdAt:"2024-02-15"},{id:2,title:"Airbnb | Direct Booking",channels:["Airbnb"],autoCharges:[{id:2,type:"Charge",title:"Security Deposit",method:"Credit card",amount:200,amountType:"€",scheduledBy:"At",reservationEvent:"Check-in"}],applyForNewListings:!1,selectedListings:[1,3,5],status:"Active",createdAt:"2024-02-10"}],M=[{id:1,name:"La Dimora Del Cavaliere",listingId:"305034",image:"/assets/images/cover/cover-1.webp",type:"Villa",status:"Active"},{id:2,name:"Navigli",listingId:"305035",image:"/assets/images/cover/cover-2.webp",type:"Apartment",status:"Active"},{id:3,name:"Polacchi42",listingId:"305225",image:"/assets/images/cover/cover-3.webp",type:"Studio",status:"Active"},{id:4,name:"Superattico - Via Del Corso 43",listingId:"305421",image:"/assets/images/cover/cover-4.webp",type:"Penthouse",status:"Active"},{id:5,name:"Montecatini Terme",listingId:"306532",image:"/assets/images/cover/cover-5.webp",type:"Apartment",status:"Active"},{id:6,name:"Monteverde - Quattroventi",listingId:"308582",image:"/assets/images/cover/cover-6.webp",type:"Villa",status:"Active"},{id:7,name:"La Storta",listingId:"310867",image:"/assets/images/cover/cover-7.webp",type:"Loft",status:"Active"},{id:8,name:"[5 Min From Trastevere] Chic Apt",listingId:"317154",image:"/assets/images/cover/cover-8.webp",type:"Studio",status:"Active"},{id:9,name:"Via Poggio Tulliano",listingId:"332386",image:"/assets/images/cover/cover-9.webp",type:"Apartment",status:"Active"},{id:10,name:"Via Dei Marruccini | San Lorenzo",listingId:"345603",image:"/assets/images/cover/cover-10.webp",type:"Penthouse",status:"Active"},{id:11,name:"Via di Acqua Bullicante 113",listingId:"363365",image:"/assets/images/cover/cover-11.webp",type:"Cottage",status:"Active"},{id:12,name:"Via Matera 23A",listingId:"363366",image:"/assets/images/cover/cover-12.webp",type:"Hotel",status:"Active"}];function Ie(){const T=ie(),[N,G]=h.useState(1),[$,w]=h.useState(de),[l,B]=h.useState(null),[L,D]=h.useState(!1),[p,j]=h.useState(0),[I]=h.useState(12),[o,r]=h.useState({title:"",channels:[],autoCharges:[],applyForNewListings:!1,selectedListings:[]}),[b,O]=h.useState(""),[U,q]=h.useState([]),H=(s,t)=>{G(t),t===0&&T.push("/guest-payments/charges"),t===2&&T.push("/guest-payments/document-templates")},f=()=>{B(null),D(!1),r({title:"",channels:[],autoCharges:[],applyForNewListings:!1,selectedListings:[]})},Q=s=>{B(s),D(!0),r({title:s.title,channels:s.channels,autoCharges:s.autoCharges,applyForNewListings:s.applyForNewListings,selectedListings:s.selectedListings})},J=()=>{if(L&&l)w(s=>s.map(t=>t.id===l.id?{...t,...o}:t));else{const s={id:Date.now(),...o,status:"Active",createdAt:new Date().toISOString().split("T")[0]};w(t=>[...t,s])}f()},K=()=>{l&&(w(s=>s.filter(t=>t.id!==l.id)),f())},X=()=>{const s={id:Date.now(),type:"Charge",title:"",method:"Credit card",amount:0,amountType:"%",scheduledBy:"At",reservationEvent:"Reservation creation"};r(t=>({...t,autoCharges:[...t.autoCharges,s]}))},Y=s=>{r(t=>({...t,autoCharges:t.autoCharges.filter(c=>c.id!==s)}))},x=(s,t,c)=>{r(C=>({...C,autoCharges:C.autoCharges.map(S=>S.id===s?{...S,[t]:c}:S)}))},Z=s=>{r(t=>({...t,channels:s.target.value}))},_=s=>{r(t=>({...t,selectedListings:t.selectedListings.includes(s)?t.selectedListings.filter(c=>c!==s):[...t.selectedListings,s]}))},ee=()=>{r(s=>({...s,selectedListings:[]}))},y=Math.ceil(M.length/I),W=p*I,se=W+I,te=M.slice(W,se).filter(s=>s.name.toLowerCase().includes(b.toLowerCase())||s.type.toLowerCase().includes(b.toLowerCase())||s.listingId.toLowerCase().includes(b.toLowerCase())),F=s=>{switch(s){case"Vrbo":return"#FF5A5F";case"Booking Engine":return"#FFD700";case"Airbnb":return"#FF5A5F";case"Direct":return"#00C853";default:return"#9E9E9E"}},E=s=>{switch(s){case"Vrbo":return"W";case"Booking Engine":return"B";case"Airbnb":return"A";case"Direct":return"D";default:return"?"}};return e.jsxs(re,{maxWidth:"xl",children:[e.jsxs(i,{sx:{mb:3},children:[e.jsx(a,{variant:"h4",sx:{fontWeight:600,mb:2},children:"Guest Payments"}),e.jsxs(le,{value:N,onChange:H,sx:{borderBottom:1,borderColor:"divider","& .MuiTab-root":{textTransform:"none",fontWeight:500},"& .Mui-selected":{color:"primary.main",fontWeight:600},"& .MuiTabs-indicator":{bgcolor:"primary.main"}},children:[e.jsx(k,{label:"Charges"}),e.jsx(k,{label:"Auto-payments"}),e.jsx(k,{label:"Document Templates"})]})]}),e.jsxs(v,{container:!0,spacing:3,children:[e.jsx(v,{size:{xs:12,md:4},children:e.jsxs(z,{sx:{p:2,height:"fit-content"},children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(a,{variant:"h6",sx:{fontWeight:600},children:"Auto Payments"}),e.jsx(d,{variant:"contained",size:"small",startIcon:e.jsx(u,{icon:"eva:plus-fill"}),onClick:f,sx:{bgcolor:"primary.main"},children:"Add auto-payment"})]}),e.jsx(i,{sx:{display:"flex",flexDirection:"column",gap:1},children:$.map(s=>e.jsx(P,{sx:{p:2,cursor:"pointer",border:(l==null?void 0:l.id)===s.id?2:1,borderColor:(l==null?void 0:l.id)===s.id?"primary.main":"grey.200","&:hover":{boxShadow:2}},onClick:()=>Q(s),children:e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(i,{sx:{flex:1},children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500,mb:.5},children:s.title}),e.jsxs(i,{sx:{display:"flex",gap:.5,mb:.5},children:[s.channels.map((t,c)=>e.jsx(i,{sx:{width:16,height:16,borderRadius:"50%",bgcolor:F(t),display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.6rem",fontWeight:600},children:E(t)},c)),s.channels.length>2&&e.jsxs(a,{variant:"caption",sx:{ml:.5},children:["+",s.channels.length-2]})]})]}),e.jsx(R,{label:s.status,size:"small",color:s.status==="Active"?"success":"default"})]})},s.id))})]})}),e.jsx(v,{size:{xs:12,md:8},children:e.jsxs(z,{sx:{p:3},children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[e.jsx(a,{variant:"h6",sx:{fontWeight:600},children:L?o.title||"Edit Auto Payment":"Create Auto Payment"}),e.jsxs(i,{sx:{display:"flex",gap:1},children:[e.jsx(d,{variant:"outlined",color:"error",onClick:K,disabled:!L,children:"Delete"}),e.jsx(d,{variant:"outlined",onClick:f,children:"Discard changes"}),e.jsx(d,{variant:"contained",onClick:J,sx:{bgcolor:"primary.main"},children:"Save"})]})]}),e.jsx(i,{sx:{mb:3},children:e.jsx(A,{fullWidth:!0,label:"Title *",value:o.title,onChange:s=>r(t=>({...t,title:s.target.value})),placeholder:"Enter auto payment title..."})}),e.jsxs(i,{sx:{mb:4},children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(a,{variant:"subtitle1",sx:{fontWeight:600},children:"Channels"}),e.jsx(ne,{title:"Select channels for this auto payment",children:e.jsx(u,{icon:"eva:info-fill",width:16})})]}),e.jsxs(m,{fullWidth:!0,children:[e.jsx(V,{children:"Select Channels"}),e.jsxs(g,{multiple:!0,value:o.channels,onChange:Z,label:"Select Channels",renderValue:s=>e.jsx(i,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:s.map(t=>e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(i,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:F(t),display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.5rem",fontWeight:600},children:E(t)}),e.jsx(R,{label:t,size:"small",onDelete:()=>r(c=>({...c,channels:c.channels.filter(C=>C!==t)}))})]},t))}),children:[e.jsx(n,{value:"Vrbo",children:"Vrbo"}),e.jsx(n,{value:"Booking Engine",children:"Booking Engine"}),e.jsx(n,{value:"Airbnb",children:"Airbnb"}),e.jsx(n,{value:"Direct",children:"Direct"}),e.jsx(n,{value:"Expedia",children:"Expedia"})]})]})]}),e.jsxs(i,{sx:{mb:4},children:[e.jsx(a,{variant:"subtitle1",sx:{fontWeight:600,mb:1},children:"Auto charges"}),e.jsx(a,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Auto-payment consists of auto charges and pre authorisations. Add them and build suitable payment plan for your guests. Depending on the setup and reservation time, we merge several payments into one. The reservation's currency will be used."}),e.jsx(i,{sx:{mb:2},children:o.autoCharges.map(s=>e.jsxs(i,{sx:{display:"flex",gap:2,mb:2,alignItems:"center"},children:[e.jsx(m,{sx:{minWidth:120},children:e.jsxs(g,{value:s.type,onChange:t=>x(s.id,"type",t.target.value),children:[e.jsx(n,{value:"Charge",children:"Charge"}),e.jsx(n,{value:"Refund",children:"Refund"}),e.jsx(n,{value:"Deposit",children:"Deposit"})]})}),e.jsx(A,{placeholder:"Title",value:s.title,onChange:t=>x(s.id,"title",t.target.value),sx:{minWidth:200}}),e.jsx(m,{sx:{minWidth:150},children:e.jsxs(g,{value:s.method,onChange:t=>x(s.id,"method",t.target.value),children:[e.jsx(n,{value:"Credit card",children:"Credit card"}),e.jsx(n,{value:"Bank transfer",children:"Bank transfer"}),e.jsx(n,{value:"PayPal",children:"PayPal"}),e.jsx(n,{value:"Stripe",children:"Stripe"})]})}),e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(A,{type:"number",value:s.amount,onChange:t=>x(s.id,"amount",t.target.value),sx:{width:80}}),e.jsx(m,{sx:{minWidth:60},children:e.jsxs(g,{value:s.amountType,onChange:t=>x(s.id,"amountType",t.target.value),children:[e.jsx(n,{value:"%",children:"%"}),e.jsx(n,{value:"€",children:"€"}),e.jsx(n,{value:"$",children:"$"})]})})]}),e.jsx(m,{sx:{minWidth:80},children:e.jsxs(g,{value:s.scheduledBy,onChange:t=>x(s.id,"scheduledBy",t.target.value),children:[e.jsx(n,{value:"At",children:"At"}),e.jsx(n,{value:"Before",children:"Before"}),e.jsx(n,{value:"After",children:"After"})]})}),e.jsx(m,{sx:{minWidth:150},children:e.jsxs(g,{value:s.reservationEvent,onChange:t=>x(s.id,"reservationEvent",t.target.value),children:[e.jsx(n,{value:"Reservation creation",children:"Reservation creation"}),e.jsx(n,{value:"Check-in",children:"Check-in"}),e.jsx(n,{value:"Check-out",children:"Check-out"}),e.jsx(n,{value:"Booking confirmation",children:"Booking confirmation"})]})}),e.jsx(ae,{size:"small",onClick:()=>Y(s.id),color:"error",children:e.jsx(u,{icon:"eva:close-fill"})})]},s.id))}),e.jsx(d,{variant:"contained",startIcon:e.jsx(u,{icon:"eva:plus-fill"}),onClick:X,sx:{bgcolor:"primary.main"},children:"Add auto charge"})]}),e.jsxs(i,{children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(a,{variant:"subtitle1",sx:{fontWeight:600},children:"Listings"}),e.jsx(oe,{control:e.jsx(ce,{checked:o.applyForNewListings,onChange:s=>r(t=>({...t,applyForNewListings:s.target.checked}))}),label:"Apply for new listings automatically"})]}),e.jsxs(i,{sx:{display:"flex",gap:2,mb:3},children:[e.jsx(A,{placeholder:"Type to search listings",value:b,onChange:s=>O(s.target.value),sx:{flex:1}}),e.jsxs(m,{sx:{minWidth:150},children:[e.jsx(V,{children:"Select tags"}),e.jsxs(g,{label:"Select tags",multiple:!0,value:U,onChange:s=>q(s.target.value),children:[e.jsx(n,{value:"luxury",children:"Luxury"}),e.jsx(n,{value:"budget",children:"Budget"}),e.jsx(n,{value:"family",children:"Family"}),e.jsx(n,{value:"business",children:"Business"})]})]}),e.jsx(d,{variant:"outlined",onClick:ee,sx:{minWidth:120},children:"Unselect all"})]}),e.jsx(v,{container:!0,spacing:2,children:te.map(s=>e.jsx(v,{size:{xs:12,sm:6,md:4},children:e.jsxs(P,{sx:{p:2,border:o.selectedListings.includes(s.id)?2:1,borderColor:o.selectedListings.includes(s.id)?"primary.main":"grey.200",cursor:"pointer",position:"relative","&:hover":{boxShadow:2}},onClick:()=>_(s.id),children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(i,{sx:{width:40,height:40,borderRadius:1,bgcolor:"grey.200",display:"flex",alignItems:"center",justifyContent:"center",backgroundImage:`url(${s.image})`,backgroundSize:"cover",backgroundPosition:"center"}}),e.jsxs(i,{sx:{flex:1},children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:s.name}),e.jsxs(a,{variant:"caption",color:"text.secondary",children:["(",s.listingId,")"]})]})]}),o.selectedListings.includes(s.id)&&e.jsx(i,{sx:{position:"absolute",bottom:8,right:8,width:20,height:20,borderRadius:"50%",bgcolor:"success.main",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(u,{icon:"eva:checkmark-fill",width:12,color:"white"})})]})},s.id))}),e.jsx(i,{sx:{display:"flex",justifyContent:"center",mt:3},children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(d,{size:"small",disabled:p===0,onClick:()=>j(0),children:"FIRST"}),e.jsx(d,{size:"small",disabled:p===0,onClick:()=>j(s=>s-1),children:e.jsx(u,{icon:"eva:arrow-back-fill"})}),e.jsxs(a,{variant:"body2",sx:{px:2},children:[p+1," / ",y]}),e.jsx(d,{size:"small",disabled:p>=y-1,onClick:()=>j(s=>s+1),children:e.jsx(u,{icon:"eva:arrow-forward-fill"})}),e.jsx(d,{size:"small",disabled:p>=y-1,onClick:()=>j(y-1),children:"LAST"})]})})]})]})})]})]})}export{Ie as AutoPaymentsView};
