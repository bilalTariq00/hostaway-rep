import{D as de,r,j as e,B as o,T as t,e as l,g as he,C as ue,I as u,a5 as xe,a as c,a7 as je}from"./index-DlK49mD9.js";import{D as me}from"./content-BncdO-AK.js";import{T as ge,a as M}from"./Tabs-CawWx8bN.js";import{C as O}from"./Card-C2DhIU3E.js";import{C as E}from"./CardContent-CO_bIGDJ.js";import{F as x}from"./FormControl-DsPW8NaL.js";import{I as j}from"./InputLabel-vBrrCZYs.js";import{S as m}from"./Select-hkki-_gR.js";import{T as fe}from"./TextField-DGQVylbQ.js";import{S as pe}from"./search-C7TcvOao.js";import{T as be,a as Ce,b as I,c as a,d as ve}from"./TableHead-BbeVJGli.js";import{S as ye}from"./send-DaTpFara.js";import{P as Se}from"./play-DST-Qy0A.js";import{P as ke}from"./pause-BXg5v9Yi.js";import{S as We}from"./square-pen-ClrXFKJK.js";import{E as Me}from"./ellipsis-vertical-DGip_Yx0.js";import{P as we}from"./Pagination-BTzUsZhy.js";import{D as g,a as f,b as p,c as b}from"./DialogContent-BrwwiAlS.js";import"./KeyboardArrowRight-B0juUeOl.js";import"./Menu-Cd2TK2zY.js";import"./LastPage-lp5Gj61X.js";const R=[{id:1,subject:"Welcome to your stay!",status:"Scheduled",listing:"Beach House Villa",schedule:"2024-12-20 10:00 AM",trigger:"Booking Confirmed",event:"Check-in",checkIn:"2024-12-20",checkOut:"2024-12-25",guest:"Sarah Johnson"},{id:2,subject:"Check-in instructions",status:"Sent",listing:"Downtown Apartment",schedule:"2024-12-19 2:00 PM",trigger:"24 Hours Before",event:"Check-in",checkIn:"2024-12-20",checkOut:"2024-12-22",guest:"Mike Chen"},{id:3,subject:"House rules reminder",status:"Paused",listing:"Mountain Cabin",schedule:"2024-12-18 6:00 PM",trigger:"Check-in Day",event:"General",checkIn:"2024-12-19",checkOut:"2024-12-23",guest:"Emma Wilson"},{id:4,subject:"Check-out reminder",status:"Scheduled",listing:"City Center Loft",schedule:"2024-12-21 11:00 AM",trigger:"1 Day Before",event:"Check-out",checkIn:"2024-12-18",checkOut:"2024-12-22",guest:"David Brown"},{id:5,subject:"Review request",status:"Cancelled",listing:"Lakeside Cottage",schedule:"2024-12-17 3:00 PM",trigger:"After Check-out",event:"Review",checkIn:"2024-12-15",checkOut:"2024-12-17",guest:"Lisa Anderson"}];function Xe(){const w=de(),[L,B]=r.useState("manage-messages"),[H,T]=r.useState(null),[F,G]=r.useState(1),[C,h]=r.useState(R);r.useEffect(()=>{const s=()=>{const A=localStorage.getItem("manageMessages");if(A){const ce=JSON.parse(A);h(ce)}else h(R)};s();const i=()=>{s()};return window.addEventListener("storage",i),window.addEventListener("focus",s),()=>{window.removeEventListener("storage",i),window.removeEventListener("focus",s)}},[]),r.useEffect(()=>{C.length>0&&localStorage.setItem("manageMessages",JSON.stringify(C))},[C]);const[N,v]=r.useState(!1),[J,y]=r.useState(!1),[q,S]=r.useState(!1),[K,k]=r.useState(!1),[V,W]=r.useState(!1),[Y,P]=r.useState(!1),[n,d]=r.useState(null),$=(s,i)=>{B(i),i!=="manage-messages"&&w.push(`/inbox/${i}`)},X=s=>{G(s)},Q=s=>{d(s),v(!0)},U=s=>{d(s),y(!0)},Z=s=>{d(s),S(!0)},_=s=>{d(s),W(!0)},ee=s=>{d(s),k(!0)},se=()=>{n&&h(s=>s.map(i=>i.id===n.id?{...i,status:"Paused"}:i)),v(!1),d(null)},ne=()=>{n&&h(s=>s.map(i=>i.id===n.id?{...i,status:"Scheduled"}:i)),y(!1),d(null)},te=()=>{n&&h(s=>s.filter(i=>i.id!==n.id)),k(!1),d(null)},le=()=>{n&&w.push(`/inbox/message-edit/${n.id}`),W(!1),d(null)},ie=()=>{n&&h(s=>s.map(i=>i.id===n.id?{...i,status:"Sent"}:i)),S(!1),P(!0),d(null)},D=()=>{P(!1)},ae=s=>{switch(s){case"Scheduled":return"warning";case"Sent":return"success";case"Paused":return"info";case"Cancelled":return"error";default:return"default"}},re=10,z=C.filter(s=>s.status!=="Cancelled"),oe=Math.ceil(z.length/re);return e.jsxs(me,{maxWidth:"xl",children:[e.jsxs(o,{sx:{mb:{xs:3,md:5}},children:[e.jsx(t,{variant:"h4",sx:{fontWeight:600,mb:2},children:"Guest Messaging"}),e.jsxs(ge,{value:L,onChange:$,sx:{mb:3},children:[e.jsx(M,{label:"Inbox",value:""}),e.jsx(M,{label:"Message Templates",value:"message-templates"}),e.jsx(M,{label:"Automations",value:"automations"}),e.jsx(M,{label:"Manage Messages",value:"manage-messages"})]})]}),e.jsx(O,{sx:{mb:4},children:e.jsxs(E,{children:[e.jsxs(o,{sx:{display:"flex",gap:2,mb:3,flexWrap:"wrap",alignItems:"center"},children:[e.jsxs(x,{size:"small",sx:{minWidth:150},children:[e.jsx(j,{children:"Scheduled by (from)"}),e.jsxs(m,{label:"Scheduled by (from)",children:[e.jsx(l,{value:"today",children:"Today"}),e.jsx(l,{value:"week",children:"This Week"}),e.jsx(l,{value:"month",children:"This Month"})]})]}),e.jsxs(x,{size:"small",sx:{minWidth:150},children:[e.jsx(j,{children:"Scheduled by (to)"}),e.jsxs(m,{label:"Scheduled by (to)",children:[e.jsx(l,{value:"today",children:"Today"}),e.jsx(l,{value:"week",children:"This Week"}),e.jsx(l,{value:"month",children:"This Month"})]})]}),e.jsxs(x,{size:"small",sx:{minWidth:120},children:[e.jsx(j,{children:"Status"}),e.jsxs(m,{label:"Status",children:[e.jsx(l,{value:"all",children:"All"}),e.jsx(l,{value:"scheduled",children:"Scheduled"}),e.jsx(l,{value:"sent",children:"Sent"}),e.jsx(l,{value:"paused",children:"Paused"}),e.jsx(l,{value:"cancelled",children:"Cancelled"})]})]}),e.jsx(fe,{placeholder:"Search guest...",size:"small",sx:{minWidth:200},InputProps:{startAdornment:e.jsx(he,{position:"start",children:e.jsx(pe,{size:16})})}})]}),e.jsxs(o,{sx:{display:"flex",gap:2,flexWrap:"wrap",alignItems:"center"},children:[e.jsxs(x,{size:"small",sx:{minWidth:150},children:[e.jsx(j,{children:"Automation"}),e.jsxs(m,{label:"Automation",children:[e.jsx(l,{value:"all",children:"All Automations"}),e.jsx(l,{value:"welcome",children:"Welcome Messages"}),e.jsx(l,{value:"checkin",children:"Check-in"}),e.jsx(l,{value:"checkout",children:"Check-out"})]})]}),e.jsxs(x,{size:"small",sx:{minWidth:150},children:[e.jsx(j,{children:"Listing"}),e.jsxs(m,{label:"Listing",children:[e.jsx(l,{value:"all",children:"All Listings"}),e.jsx(l,{value:"beach",children:"Beach House Villa"}),e.jsx(l,{value:"downtown",children:"Downtown Apartment"}),e.jsx(l,{value:"mountain",children:"Mountain Cabin"})]})]}),e.jsxs(x,{size:"small",sx:{minWidth:100},children:[e.jsx(j,{children:"Limit"}),e.jsxs(m,{label:"Limit",children:[e.jsx(l,{value:"10",children:"10"}),e.jsx(l,{value:"25",children:"25"}),e.jsx(l,{value:"50",children:"50"}),e.jsx(l,{value:"100",children:"100"})]})]})]})]})}),e.jsx(O,{children:e.jsx(E,{sx:{p:0},children:e.jsxs(be,{children:[e.jsx(Ce,{children:e.jsxs(I,{children:[e.jsx(a,{sx:{fontWeight:600},children:"Subject"}),e.jsx(a,{sx:{fontWeight:600},children:"Status"}),e.jsx(a,{sx:{fontWeight:600},children:"Listing"}),e.jsx(a,{sx:{fontWeight:600},children:"Schedule"}),e.jsx(a,{sx:{fontWeight:600},children:"Trigger"}),e.jsx(a,{sx:{fontWeight:600},children:"Event"}),e.jsx(a,{sx:{fontWeight:600},children:"Check-in"}),e.jsx(a,{sx:{fontWeight:600},children:"Check-out"}),e.jsx(a,{sx:{fontWeight:600},children:"Guest"}),e.jsx(a,{sx:{fontWeight:600},children:"Actions"})]})}),e.jsx(ve,{children:z.map(s=>e.jsxs(I,{hover:!0,onMouseEnter:()=>T(s.id),onMouseLeave:()=>T(null),sx:{position:"relative"},children:[e.jsx(a,{children:e.jsx(t,{variant:"body2",sx:{fontWeight:500},children:s.subject})}),e.jsx(a,{children:e.jsx(ue,{label:s.status,color:ae(s.status),size:"small"})}),e.jsx(a,{children:e.jsx(t,{variant:"body2",children:s.listing})}),e.jsx(a,{children:e.jsx(t,{variant:"body2",children:s.schedule})}),e.jsx(a,{children:e.jsx(t,{variant:"body2",children:s.trigger})}),e.jsx(a,{children:e.jsx(o,{sx:{display:"inline-block",px:1.5,py:.5,borderRadius:1,backgroundColor:"primary.50",color:"primary.main",fontSize:"0.75rem",fontWeight:500},children:s.event})}),e.jsx(a,{children:e.jsx(t,{variant:"body2",children:s.checkIn})}),e.jsx(a,{children:e.jsx(t,{variant:"body2",children:s.checkOut})}),e.jsx(a,{children:e.jsx(t,{variant:"body2",children:s.guest})}),e.jsx(a,{children:H===s.id?e.jsxs(o,{sx:{display:"flex",gap:.5},children:[e.jsx(u,{size:"small",color:"primary",title:"Send",onClick:()=>Z(s),disabled:s.status==="Cancelled",children:e.jsx(ye,{size:16})}),s.status==="Paused"?e.jsx(u,{size:"small",color:"success",title:"Resume",onClick:()=>U(s),children:e.jsx(Se,{size:16})}):e.jsx(u,{size:"small",color:"warning",title:"Pause",onClick:()=>Q(s),disabled:s.status==="Cancelled",children:e.jsx(ke,{size:16})}),e.jsx(u,{size:"small",color:"error",title:"Cancel",onClick:()=>ee(s),disabled:s.status==="Cancelled",children:e.jsx(xe,{size:16})}),e.jsx(u,{size:"small",color:"default",title:"Edit",onClick:()=>_(s),children:e.jsx(We,{size:16})})]}):e.jsx(u,{size:"small",children:e.jsx(Me,{size:16})})})]},s.id))})]})})}),e.jsx(o,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(we,{count:oe,page:F,onChange:(s,i)=>X(i),color:"primary",showFirstButton:!0,showLastButton:!0})}),e.jsxs(g,{open:N,onClose:()=>v(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(f,{children:"Pause Message"}),e.jsxs(p,{children:[e.jsx(t,{children:"Are you sure you want to pause this message? The message will not be sent at the scheduled time."}),n&&e.jsxs(o,{sx:{mt:2,p:2,bgcolor:"grey.50",borderRadius:1},children:[e.jsx(t,{variant:"subtitle2",sx:{fontWeight:600},children:n.subject}),e.jsxs(t,{variant:"body2",color:"text.secondary",children:["Scheduled for: ",n.schedule]})]})]}),e.jsxs(b,{children:[e.jsx(c,{onClick:()=>v(!1),color:"inherit",children:"Cancel"}),e.jsx(c,{onClick:se,color:"warning",variant:"contained",children:"Pause Message"})]})]}),e.jsxs(g,{open:q,onClose:()=>S(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(f,{children:"Send Message Now"}),e.jsxs(p,{children:[e.jsx(t,{children:"Are you sure you want to send this message now? This message will be sent immediately instead of at the scheduled time."}),n&&e.jsxs(o,{sx:{mt:2,p:2,bgcolor:"grey.50",borderRadius:1},children:[e.jsx(t,{variant:"subtitle2",sx:{fontWeight:600},children:n.subject}),e.jsxs(t,{variant:"body2",color:"text.secondary",children:["Originally scheduled for: ",n.schedule]}),e.jsxs(t,{variant:"body2",color:"text.secondary",children:["Guest: ",n.guest]})]})]}),e.jsxs(b,{children:[e.jsx(c,{onClick:()=>S(!1),color:"inherit",children:"Cancel"}),e.jsx(c,{onClick:ie,color:"primary",variant:"contained",children:"Send Now"})]})]}),e.jsxs(g,{open:J,onClose:()=>y(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(f,{children:"Resume Message"}),e.jsxs(p,{children:[e.jsx(t,{children:"Are you sure you want to resume this message? The message will be scheduled to send at the original time."}),n&&e.jsxs(o,{sx:{mt:2,p:2,bgcolor:"grey.50",borderRadius:1},children:[e.jsx(t,{variant:"subtitle2",sx:{fontWeight:600},children:n.subject}),e.jsxs(t,{variant:"body2",color:"text.secondary",children:["Scheduled for: ",n.schedule]})]})]}),e.jsxs(b,{children:[e.jsx(c,{onClick:()=>y(!1),color:"inherit",children:"Cancel"}),e.jsx(c,{onClick:ne,color:"success",variant:"contained",children:"Resume Message"})]})]}),e.jsxs(g,{open:K,onClose:()=>k(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(f,{children:"Cancel Message"}),e.jsxs(p,{children:[e.jsx(t,{children:"Are you sure you want to cancel this message? This action cannot be undone and the message will be removed from the table."}),n&&e.jsxs(o,{sx:{mt:2,p:2,bgcolor:"grey.50",borderRadius:1},children:[e.jsx(t,{variant:"subtitle2",sx:{fontWeight:600},children:n.subject}),e.jsxs(t,{variant:"body2",color:"text.secondary",children:["Scheduled for: ",n.schedule]})]})]}),e.jsxs(b,{children:[e.jsx(c,{onClick:()=>k(!1),color:"inherit",children:"Keep Message"}),e.jsx(c,{onClick:te,color:"error",variant:"contained",children:"Cancel Message"})]})]}),e.jsxs(g,{open:V,onClose:()=>W(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(f,{children:"Edit Message"}),e.jsxs(p,{children:[e.jsx(t,{children:"Are you sure you want to edit this message? You will be taken to the message editor."}),n&&e.jsxs(o,{sx:{mt:2,p:2,bgcolor:"grey.50",borderRadius:1},children:[e.jsx(t,{variant:"subtitle2",sx:{fontWeight:600},children:n.subject}),e.jsxs(t,{variant:"body2",color:"text.secondary",children:["Current status: ",n.status]})]})]}),e.jsxs(b,{children:[e.jsx(c,{onClick:()=>W(!1),color:"inherit",children:"Cancel"}),e.jsx(c,{onClick:le,color:"primary",variant:"contained",children:"Edit Message"})]})]}),e.jsxs(g,{open:Y,onClose:D,maxWidth:"sm",fullWidth:!0,children:[e.jsxs(f,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(je,{size:24,color:"#4caf50"}),"Message Sent"]}),e.jsx(p,{children:e.jsx(t,{children:"Your message has been sent successfully!"})}),e.jsx(b,{children:e.jsx(c,{onClick:D,color:"primary",variant:"contained",children:"OK"})})]})]})}export{Xe as ManageMessagesView};
