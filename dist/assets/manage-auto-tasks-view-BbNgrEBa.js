import{D as P,r as o,j as e,B as i,T as n,a as C,I as d,d as a,C as N,e as h}from"./index-DlK49mD9.js";import{D as R}from"./content-BncdO-AK.js";import{T as G,a as x}from"./Tabs-CawWx8bN.js";import{G as w}from"./Grid-CFPLP85A.js";import{C as J}from"./Card-C2DhIU3E.js";import{C as $}from"./CardContent-CO_bIGDJ.js";import{S as q}from"./Switch-Bj_iObyt.js";import{M as F}from"./Menu-Cd2TK2zY.js";import{D as H,a as K,b as Q,c as U}from"./DialogContent-BrwwiAlS.js";import"./KeyboardArrowRight-B0juUeOl.js";import"./SwitchBase-D6K1hBX3.js";const V=[{id:1,name:"Daily Property Check",startingEvent:"Check-in",dueBefore:"2 hours",linkedChannel:"Airbnb",linkedListing:"Villa Del Sol",status:"Active",description:"Perform daily inspection of property condition"},{id:2,name:"Guest Welcome Package",startingEvent:"Booking Confirmed",dueBefore:"24 hours",linkedChannel:"Booking.com",linkedListing:"Navigli Apartment",status:"Active",description:"Prepare and deliver welcome package to guests"},{id:3,name:"Post-Checkout Cleanup",startingEvent:"Check-out",dueBefore:"4 hours",linkedChannel:"Direct",linkedListing:"Polacchi42",status:"Inactive",description:"Clean and prepare property for next guests"},{id:4,name:"Maintenance Alert",startingEvent:"Issue Reported",dueBefore:"1 hour",linkedChannel:"Airbnb",linkedListing:"Superattico - Via Del C...",status:"Active",description:"Address maintenance issues immediately"}];function le(){const l=P(),[B,M]=o.useState(1),[k,v]=o.useState(null),[u,y]=o.useState(null),[I,p]=o.useState(!1),[r,m]=o.useState(null),A=()=>{const s=localStorage.getItem("autoTasks");return s?JSON.parse(s):V},[f,j]=o.useState(A());o.useEffect(()=>{j(A())},[]);const E=(s,t)=>{M(t),t===0&&l.push("/tasks/manage-tasks"),t===2&&l.push("/tasks/checklist-templates"),t===3&&l.push("/tasks/archive")},W=(s,t)=>{v(s.currentTarget),y(t)},g=()=>{v(null),y(null)},L=()=>{l.push("/tasks/auto-tasks/new")},b=s=>{l.push(`/tasks/auto-tasks/${s.id}/edit`)},D=s=>{l.push(`/tasks/auto-tasks/${s.id}/duplicate`)},T=s=>{m(s),p(!0),g()},z=()=>{if(r){const s=f.filter(t=>t.id!==r.id);j(s),localStorage.setItem("autoTasks",JSON.stringify(s)),p(!1),m(null)}},S=()=>{p(!1),m(null)},O=s=>{const t=f.map(c=>c.id===s?{...c,status:c.status==="Active"?"Inactive":"Active"}:c);j(t),localStorage.setItem("autoTasks",JSON.stringify(t))};return e.jsxs(R,{maxWidth:"xl",children:[e.jsxs(i,{sx:{mb:3},children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(n,{variant:"h4",sx:{fontWeight:600},children:"Tasks"}),e.jsx(C,{variant:"contained",onClick:L,children:"Add Tasks"})]}),e.jsxs(G,{value:B,onChange:E,sx:{borderBottom:1,borderColor:"divider","& .MuiTab-root":{textTransform:"none",fontWeight:500},"& .Mui-selected":{color:"primary.main",fontWeight:600},"& .MuiTabs-indicator":{bgcolor:"primary.main"}},children:[e.jsx(x,{label:"Manage Tasks"}),e.jsx(x,{label:"Manage Auto-tasks"}),e.jsx(x,{label:"Checklist Templates"}),e.jsx(x,{label:"Archive"})]})]}),e.jsx(w,{container:!0,spacing:3,children:f.map(s=>e.jsx(w,{size:{xs:12,sm:6,md:4},children:e.jsx(J,{sx:{height:"100%",bgcolor:s.status==="Active"?"grey.50":"background.paper",border:1,borderColor:"grey.200","&:hover":{boxShadow:2}},children:e.jsxs($,{children:[e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[e.jsx(n,{variant:"h6",sx:{fontWeight:600,flex:1},children:s.name}),e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(q,{checked:s.status==="Active",onChange:()=>O(s.id),size:"small"}),e.jsx(d,{size:"small",onClick:t=>W(t,s),children:e.jsx(a,{icon:"eva:more-vertical-fill",width:16})})]})]}),e.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:2},children:s.description}),e.jsxs(i,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(n,{variant:"caption",color:"text.secondary",children:"Starting Event:"}),e.jsx(n,{variant:"caption",sx:{fontWeight:500},children:s.startingEvent})]}),e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(n,{variant:"caption",color:"text.secondary",children:"Due Before:"}),e.jsx(n,{variant:"caption",sx:{fontWeight:500},children:s.dueBefore})]}),e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(n,{variant:"caption",color:"text.secondary",children:"Linked Channel:"}),e.jsx(N,{label:s.linkedChannel,size:"small",color:"primary"})]}),e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(n,{variant:"caption",color:"text.secondary",children:"Linked Listing:"}),e.jsx(n,{variant:"caption",sx:{fontWeight:500},children:s.linkedListing})]})]}),e.jsxs(i,{sx:{display:"flex",justifyContent:"flex-end",gap:1,mt:2},children:[e.jsx(d,{size:"small",onClick:()=>b(s),children:e.jsx(a,{icon:"eva:edit-fill",width:16})}),e.jsx(d,{size:"small",onClick:()=>D(s),children:e.jsx(a,{icon:"eva:copy-fill",width:16})}),e.jsx(d,{size:"small",sx:{color:"error.main"},onClick:()=>T(s),children:e.jsx(a,{icon:"eva:trash-2-fill",width:16})})]})]})})},s.id))}),e.jsxs(F,{anchorEl:k,open:!!k,onClose:g,children:[e.jsxs(h,{onClick:()=>b(u),children:[e.jsx(a,{icon:"eva:edit-fill",sx:{mr:1}}),"Edit"]}),e.jsxs(h,{onClick:()=>D(u),children:[e.jsx(a,{icon:"eva:copy-fill",sx:{mr:1}}),"Duplicate"]}),e.jsxs(h,{onClick:g,children:[e.jsx(a,{icon:"eva:play-circle-fill",sx:{mr:1}}),"Run Now"]}),e.jsxs(h,{onClick:()=>T(u),sx:{color:"error.main"},children:[e.jsx(a,{icon:"eva:trash-2-fill",sx:{mr:1}}),"Delete"]})]}),e.jsxs(H,{open:I,onClose:S,children:[e.jsx(K,{children:"Delete Auto-task"}),e.jsx(Q,{children:e.jsxs(n,{children:['Are you sure you want to delete "',r==null?void 0:r.name,'"? This action cannot be undone.']})}),e.jsxs(U,{children:[e.jsx(C,{onClick:S,children:"Cancel"}),e.jsx(C,{onClick:z,variant:"contained",color:"error",children:"Delete"})]})]})]})}export{le as ManageAutoTasksView};
