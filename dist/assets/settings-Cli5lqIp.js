import{H as E,u as z,r as u,j as e,X as k,T as s,B as a,J as F,g as B,I as G,a as m}from"./index-DDMGUD-_.js";import{C as o}from"./Card-C1fEEBVz.js";import{C as i}from"./CardHeader-BtOJpbTN.js";import{G as h}from"./Grid-CFM_c-Vf.js";import{T as g}from"./TextField-BZcg-6kp.js";import{E as T}from"./eye-off-DfyncgOK.js";import{E as M}from"./eye-BdeNJELB.js";import{S as W}from"./save-D0sLAz8V.js";import{R as J}from"./refresh-cw-CDZ7kg9Q.js";import"./Select-DixiLax7.js";import"./Menu-Bm1ShPnp.js";import"./InputLabel-B_w9HMQG.js";import"./FormControl-BRgYzLHi.js";function te(){const{user:c}=E(),{hasCredentials:p,credentials:t,setCredentials:f,refreshData:I,isLoading:y,properties:v,reservations:C,guests:b,revenue:w}=z(),S=(c==null?void 0:c.role)==="super-admin",[r,A]=u.useState({apiKey:(t==null?void 0:t.apiKey)||"",accountId:(t==null?void 0:t.accountId)||""}),[l,D]=u.useState(!1),[d,n]=u.useState(null),j=x=>P=>{A(R=>({...R,[x]:P.target.value}))},H=async()=>{if(!r.apiKey||!r.accountId){n({type:"error",text:"Please fill in both API Key and Account ID"});return}try{const x={apiKey:r.apiKey,accountId:r.accountId,userId:(t==null?void 0:t.userId)||Date.now().toString()};f(x),n({type:"success",text:"Hostaway credentials updated successfully!"})}catch{n({type:"error",text:"Failed to update credentials. Please try again."})}},K=async()=>{try{await I(),n({type:"success",text:"Data refreshed successfully!"})}catch{n({type:"error",text:"Failed to refresh data. Please check your credentials."})}};return e.jsxs(e.Fragment,{children:[e.jsx(k,{children:e.jsx(s,{variant:"h4",children:"Settings"})}),e.jsxs(a,{sx:{p:3,display:"flex",flexDirection:"column",gap:3},children:[S&&e.jsxs(o,{children:[e.jsx(i,{title:"Hostaway Integration"}),e.jsxs(a,{sx:{p:3},children:[d&&e.jsx(F,{severity:d.type,sx:{mb:3},onClose:()=>n(null),children:d.text}),e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{size:{xs:12,md:6},children:e.jsx(g,{fullWidth:!0,label:"Hostaway API Key",type:l?"text":"password",value:r.apiKey,onChange:j("apiKey"),placeholder:"Enter your Hostaway API key",InputProps:{endAdornment:e.jsx(B,{position:"end",children:e.jsx(G,{onClick:()=>D(!l),edge:"end",children:l?e.jsx(T,{size:20}):e.jsx(M,{size:20})})})}})}),e.jsx(h,{size:{xs:12,md:6},children:e.jsx(g,{fullWidth:!0,label:"Hostaway Account ID",value:r.accountId,onChange:j("accountId"),placeholder:"Enter your Hostaway Account ID"})})]}),e.jsxs(a,{sx:{mt:3,display:"flex",gap:2},children:[e.jsx(m,{variant:"contained",startIcon:e.jsx(W,{size:20}),onClick:H,disabled:y,sx:{bgcolor:"#333","&:hover":{bgcolor:"#555"}},children:"Save Credentials"}),p&&e.jsx(m,{variant:"outlined",startIcon:e.jsx(J,{size:20}),onClick:K,disabled:y,children:"Refresh Data"})]}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mt:2},children:"You can find your API credentials in your Hostaway account → Settings → API"}),p&&e.jsxs(a,{sx:{mt:3,p:2,bgcolor:"grey.50",borderRadius:2},children:[e.jsx(s,{variant:"subtitle2",sx:{mb:1},children:"Data Status:"}),e.jsxs(s,{variant:"body2",color:"text.secondary",children:["Properties: ",v.length," | Reservations: ",C.length," | Guests: ",b.length," | Revenue Records: ",w.length]})]})]})]}),e.jsxs(o,{children:[e.jsx(i,{title:"General Settings"}),e.jsx(a,{sx:{p:3},children:e.jsx(s,{variant:"body1",color:"text.secondary",children:"Configure your general application settings here."})})]}),e.jsxs(o,{children:[e.jsx(i,{title:"Account Settings"}),e.jsx(a,{sx:{p:3},children:e.jsx(s,{variant:"body1",color:"text.secondary",children:"Manage your account preferences and security settings."})})]}),e.jsxs(o,{children:[e.jsx(i,{title:"Notifications"}),e.jsx(a,{sx:{p:3},children:e.jsx(s,{variant:"body1",color:"text.secondary",children:"Control how and when you receive notifications."})})]})]})]})}export{te as default};
