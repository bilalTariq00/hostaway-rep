import{D as H,r as c,j as e,B as o,T as a,a as d,g as Q,A as U,C as X,I as f,V as G,e as r}from"./index-DDMGUD-_.js";import{D as J}from"./content-DAzX26cm.js";import{T as K,a as z}from"./Tabs-DQ5TNJO7.js";import{D as Y}from"./download-BkC7-9GN.js";import{F as Z}from"./funnel-Prn9gWG1.js";import{T as h}from"./TextField-BZcg-6kp.js";import{S as ee}from"./search-BrcmRr-v.js";import{C as te}from"./Card-C1fEEBVz.js";import{T as se}from"./TableContainer-Cp4gnwML.js";import{T as oe,a as re,b as W,c as m,d as ie}from"./TableHead-CMCmgIDA.js";import{C as b}from"./calendar-C8D0Jpcj.js";import{S as ae}from"./settings-CTSlhn1k.js";import{E as le}from"./ellipsis-2U_Jz9Hu.js";import{P as ne}from"./Pagination-Dusx6Zp7.js";import{C as ce}from"./circle-x-CWYw6gZN.js";import{F as A}from"./FormControlLabel-nlFIIXjS.js";import{S as L}from"./Switch-CS1Ni3s3.js";import{F as de}from"./FormControl-BRgYzLHi.js";import{I as me}from"./InputLabel-B_w9HMQG.js";import{S as pe}from"./Select-DixiLax7.js";import{R as xe}from"./refresh-cw-CDZ7kg9Q.js";import{M as he}from"./Menu-Bm1ShPnp.js";import{S as ue}from"./square-pen-BNpSXi0l.js";import{F as ge}from"./file-text-BO2Z63B_.js";import{L as fe}from"./link-uD0ZcxEX.js";import{C as be}from"./copy-BBA9hbF8.js";import"./KeyboardArrowRight-D6UvfiY9.js";import"./LastPage-K8Xc1QT_.js";import"./SwitchBase-s8UEUZOy.js";const P=[{id:1,title:"La Dimora Del Cavaliere",propertyId:"305034",image:"https://images.unsplash.com/photo-1566073771259-6a8506099945?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&q=80",airbnb:!0,booking:!0,vrbo:!0,expedia:!1,partners:!0,ical:!1,customIcal:!1},{id:2,title:"Navigli",propertyId:"305035",image:"https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&q=80",airbnb:!0,booking:!0,vrbo:!0,expedia:!1,partners:!0,ical:!1,customIcal:!1},{id:3,title:"Polacchi42",propertyId:"305225",image:"https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&q=80",airbnb:!0,booking:!0,vrbo:!0,expedia:!1,partners:!1,ical:!1,customIcal:!1},{id:4,title:"Superattico - Via Del Corso 43",propertyId:"305421",image:"https://images.unsplash.com/photo-1571896349842-33c89424de2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&q=80",airbnb:!0,booking:!0,vrbo:!0,expedia:!1,partners:!1,ical:!1,customIcal:!1},{id:5,title:"Montecatini Terme",propertyId:"306532",image:"https://images.unsplash.com/photo-1582268611958-ebfd161ef9cf?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&q=80",airbnb:!0,booking:!0,vrbo:!0,expedia:!1,partners:!1,ical:!1,customIcal:!1},{id:6,title:"Monteverde - Quattroventi",propertyId:"308582",image:"https://images.unsplash.com/photo-1560448204-603b3fc33ddc?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&q=80",airbnb:!0,booking:!0,vrbo:!0,expedia:!1,partners:!1,ical:!1,customIcal:!1},{id:7,title:"La Storta",propertyId:"310867",image:"https://images.unsplash.com/photo-1564013799919-ab600027ffc6?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&q=80",airbnb:!0,booking:!0,vrbo:!1,expedia:!1,partners:!1,ical:!1,customIcal:!1,hasCalendarIssue:!0},{id:8,title:"[5 Min From Trastevere] Chic Apt",propertyId:"317154",image:"https://images.unsplash.com/photo-1578683010236-d716f9a3f461?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&q=80",airbnb:!0,booking:!0,vrbo:!0,expedia:!1,partners:!1,ical:!1,customIcal:!1},{id:9,title:"Via Poggio Tulliano",propertyId:"332386",image:"https://images.unsplash.com/photo-1560448204-5e9c5a5b5b5b?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&q=80",airbnb:!0,booking:!0,vrbo:!0,expedia:!1,partners:!1,ical:!1,customIcal:!1},{id:10,title:"Via Dei Marruccini | San Lorenzo",propertyId:"345603",image:"https://images.unsplash.com/photo-1560448204-603b3fc33ddc?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&q=80",airbnb:!0,booking:!0,vrbo:!0,expedia:!1,partners:!1,ical:!1,customIcal:!1},{id:11,title:"Via di Acqua Bullicante 113",propertyId:"363365",image:"https://images.unsplash.com/photo-1560448204-603b3fc33ddc?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&q=80",airbnb:!0,booking:!0,vrbo:!1,expedia:!1,partners:!1,ical:!1,customIcal:!1}],j=[{key:"airbnb",name:"Airbnb",logo:"https://upload.wikimedia.org/wikipedia/commons/6/69/Airbnb_Logo_B%C3%A9lo.svg",color:"#FF5A5F",letter:"A"},{key:"booking",name:"Booking.com",logo:"https://upload.wikimedia.org/wikipedia/commons/3/36/Booking.com_logo.svg",color:"#003580",letter:"B"},{key:"vrbo",name:"Vrbo",logo:"https://upload.wikimedia.org/wikipedia/commons/8/8a/Vrbo_logo.svg",color:"#00A699",letter:"W"},{key:"expedia",name:"Expedia",logo:"https://upload.wikimedia.org/wikipedia/commons/8/8a/Expedia_logo.svg",color:"#000000",letter:"â†’"},{key:"partners",name:"Partners",logo:"https://via.placeholder.com/24x24/8B5CF6/FFFFFF?text=V",color:"#8B5CF6",letter:"V"},{key:"ical",name:"iCAL",logo:"https://via.placeholder.com/24x24/3B82F6/FFFFFF?text=ðŸ“…",color:"#3B82F6",letter:"ðŸ“…"},{key:"customIcal",name:"Custom iCAL",logo:"https://via.placeholder.com/24x24/8B5CF6/FFFFFF?text=ðŸ“…",color:"#8B5CF6",letter:"ðŸ“…"}];function Xe(){const y=H(),[k,B]=c.useState(1),[E,p]=c.useState(!1),[l,x]=c.useState(null),[C,v]=c.useState(null),[M,I]=c.useState(null),[u,D]=c.useState(""),g=10,w=P.filter(t=>t.title.toLowerCase().includes(u.toLowerCase())||t.propertyId.includes(u)),F=(k-1)*g,R=F+g,q=w.slice(F,R),V=t=>{B(t)},N=t=>{x(t),p(!0)},_=(t,s)=>{v(t.currentTarget),I(s)},S=()=>{v(null),I(null)},O=(t,s)=>{s==="channels"&&y.push("/channel-manager/channels")},T=(t,s)=>{const i={...t,[s]:!t[s]};x(i)},$=t=>{y.push(`/listings/${t.propertyId}`)},n=t=>{const s=P.find(i=>i.id===M);if(s)switch(t){case"edit":x(s),p(!0);break;case"csv":console.log("CSV export for:",s.title);break;case"ical":console.log("Export iCal link for:",s.title);break;case"custom":console.log("Custom iCals for:",s.title);break;case"link":console.log("Link child listings for:",s.title);break;case"convert":console.log("Convert to multi-unit:",s.title);break;default:console.log("Unknown action:",t);break}S()};return e.jsxs(J,{maxWidth:"xl",children:[e.jsxs(o,{sx:{mb:{xs:3,md:5}},children:[e.jsx(a,{variant:"h4",sx:{fontWeight:600,mb:2},children:"Channel Manager"}),e.jsxs(K,{value:"listing-mapping",onChange:O,sx:{mb:3},children:[e.jsx(z,{label:"Listing Mapping",value:"listing-mapping"}),e.jsx(z,{label:"Channels",value:"channels"})]}),e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(a,{variant:"h6",sx:{fontWeight:500},children:"Listing mapping"}),e.jsx(d,{variant:"outlined",startIcon:e.jsx(Y,{size:16}),sx:{textTransform:"none"},children:"Export CSV"})]}),e.jsxs(o,{sx:{display:"flex",gap:2,mb:3,flexWrap:"wrap"},children:[e.jsx(d,{variant:"outlined",startIcon:e.jsx(Z,{size:16}),sx:{textTransform:"none",bgcolor:"#E3F2FD",borderColor:"#2196F3",color:"#1976D2"},children:"Filters"}),e.jsx(h,{placeholder:"Search listings...",size:"small",sx:{minWidth:300},value:u,onChange:t=>D(t.target.value),InputProps:{startAdornment:e.jsx(Q,{position:"start",children:e.jsx(ee,{size:16})})}})]})]}),e.jsx(te,{sx:{boxShadow:"none",border:"1px solid",borderColor:"grey.200"},children:e.jsx(se,{children:e.jsxs(oe,{children:[e.jsx(re,{children:e.jsxs(W,{sx:{bgcolor:"grey.50"},children:[e.jsx(m,{sx:{fontWeight:600,fontSize:"0.9rem"},children:"Title"}),j.map(t=>e.jsx(m,{sx:{fontWeight:600,fontSize:"0.9rem",textAlign:"center"},children:e.jsx(o,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:.5},children:e.jsxs(o,{sx:{width:24,height:24,borderRadius:"50%",bgcolor:t.color,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",color:"white",fontWeight:"bold",overflow:"hidden"},children:[t.logo&&!t.logo.includes("placeholder")?e.jsx("img",{src:t.logo,alt:t.name,style:{width:"100%",height:"100%",objectFit:"contain",filter:"brightness(0) invert(1)"},onError:s=>{s.currentTarget.style.display="none";const i=s.currentTarget.nextElementSibling;i&&(i.style.display="flex")}}):null,e.jsx(o,{sx:{display:t.logo&&!t.logo.includes("placeholder")?"none":"flex"},children:t.letter})]})})},t.key)),e.jsx(m,{sx:{fontWeight:600,fontSize:"0.9rem",textAlign:"center"},children:"Actions"})]})}),e.jsx(ie,{children:q.map(t=>e.jsxs(W,{sx:{"&:hover":{bgcolor:"grey.50"}},children:[e.jsx(m,{children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(U,{src:t.image,alt:t.title,sx:{width:40,height:40}}),e.jsxs(o,{children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500,cursor:"pointer",color:"primary.main","&:hover":{textDecoration:"underline",color:"primary.dark"}},onClick:()=>$(t),children:t.title}),e.jsxs(a,{variant:"caption",color:"text.secondary",children:["(",t.propertyId,")"]}),t.hasCalendarIssue&&e.jsx(o,{sx:{display:"inline-flex",alignItems:"center",ml:1},children:e.jsx(b,{size:12,color:"red"})})]})]})}),j.map(s=>e.jsx(m,{sx:{textAlign:"center"},children:e.jsx(X,{label:t[s.key]?"ON":"OFF",size:"small",color:t[s.key]?"success":"error",sx:{fontSize:"0.7rem",height:24,minWidth:40,cursor:"pointer","&:hover":{opacity:.8}},onClick:()=>T(t,s.key)})},s.key)),e.jsx(m,{sx:{textAlign:"center"},children:e.jsxs(o,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[e.jsx(f,{size:"small",onClick:()=>N(t),sx:{color:"text.secondary"},children:e.jsx(ae,{size:16})}),e.jsx(f,{size:"small",onClick:s=>_(s,t.id),sx:{color:"text.secondary"},children:e.jsx(le,{size:16})})]})})]},t.id))})]})})}),e.jsx(o,{sx:{display:"flex",justifyContent:"center",mt:3},children:e.jsx(ne,{count:Math.ceil(w.length/g),page:k,onChange:(t,s)=>V(s),color:"primary",showFirstButton:!0,showLastButton:!0})}),e.jsx(G,{anchor:"right",open:E,onClose:()=>p(!1),sx:{"& .MuiDrawer-paper":{width:450,p:3}},children:l&&e.jsxs(e.Fragment,{children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(a,{variant:"h6",sx:{fontWeight:600},children:"Property Settings"}),e.jsx(f,{onClick:()=>p(!1),children:e.jsx(ce,{size:20})})]}),e.jsxs(o,{sx:{mb:4},children:[e.jsx(a,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Property Information"}),e.jsx(h,{fullWidth:!0,label:"Property Name",value:l.title,sx:{mb:2},onChange:t=>{x({...l,title:t.target.value})}}),e.jsxs(a,{variant:"body2",color:"text.secondary",sx:{mb:2},children:["Property ID: ",l.propertyId]})]}),e.jsxs(o,{sx:{mb:4},children:[e.jsx(a,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Booking window"}),e.jsx(A,{control:e.jsx(L,{disabled:!0}),label:"Activate",sx:{mb:2}}),e.jsxs(de,{fullWidth:!0,sx:{mb:2},children:[e.jsx(me,{children:"Number of months"}),e.jsxs(pe,{value:"",label:"Number of months",children:[e.jsx(r,{value:"1",children:"1 month"}),e.jsx(r,{value:"3",children:"3 months"}),e.jsx(r,{value:"6",children:"6 months"}),e.jsx(r,{value:"12",children:"12 months"})]})]}),e.jsx(d,{variant:"contained",disabled:!0,fullWidth:!0,sx:{textTransform:"none"},children:"Save"})]}),j.map(t=>e.jsxs(o,{sx:{mb:4},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsxs(o,{sx:{width:32,height:32,borderRadius:"50%",bgcolor:t.color,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.9rem",color:"white",fontWeight:"bold",overflow:"hidden"},children:[t.logo&&!t.logo.includes("placeholder")?e.jsx("img",{src:t.logo,alt:t.name,style:{width:"100%",height:"100%",objectFit:"contain",filter:"brightness(0) invert(1)"},onError:s=>{s.currentTarget.style.display="none";const i=s.currentTarget.nextElementSibling;i&&(i.style.display="flex")}}):null,e.jsx(o,{sx:{display:t.logo&&!t.logo.includes("placeholder")?"none":"flex"},children:t.letter})]}),e.jsx(a,{variant:"subtitle1",sx:{fontWeight:600},children:t.name})]}),e.jsx(A,{control:e.jsx(L,{checked:l[t.key],onChange:()=>T(l,t.key),color:"success"}),label:`Is listed in ${t.name}?`,sx:{mb:2}}),t.key!=="ical"&&t.key!=="customIcal"&&e.jsx(h,{fullWidth:!0,label:"Markup",value:t.key==="airbnb"?"15":t.key==="booking"?"10":t.key==="vrbo"?"30":t.key==="expedia"?"20":t.key==="partners"?"25":"0",sx:{mb:2}}),t.key==="booking"&&e.jsxs(o,{sx:{mb:2},children:[e.jsx(d,{variant:"outlined",startIcon:e.jsx(xe,{size:16}),sx:{textTransform:"none",mb:2},children:"Re-sync"}),e.jsx(h,{fullWidth:!0,label:"Min stay",placeholder:"Enter minimum stay",sx:{mb:1}})]}),e.jsx(d,{variant:"contained",fullWidth:!0,sx:{textTransform:"none",bgcolor:"#00A699"},children:"Save"})]},t.key)),e.jsx(d,{variant:"outlined",fullWidth:!0,onClick:()=>p(!1),sx:{textTransform:"none",mt:2},children:"Close"})]})}),e.jsxs(he,{anchorEl:C,open:!!C,onClose:S,PaperProps:{sx:{minWidth:200,boxShadow:"0 4px 20px rgba(0,0,0,0.15)"}},children:[e.jsxs(r,{onClick:()=>n("edit"),children:[e.jsx(ue,{size:16,style:{marginRight:8}}),"Edit listing name"]}),e.jsxs(r,{onClick:()=>n("csv"),children:[e.jsx(ge,{size:16,style:{marginRight:8}}),"CSV export"]}),e.jsxs(r,{onClick:()=>n("ical"),children:[e.jsx(b,{size:16,style:{marginRight:8}}),"Export iCal link"]}),e.jsxs(r,{onClick:()=>n("custom"),children:[e.jsx(b,{size:16,style:{marginRight:8}}),"Custom iCals"]}),e.jsxs(r,{onClick:()=>n("link"),children:[e.jsx(fe,{size:16,style:{marginRight:8}}),"Link child listings"]}),e.jsxs(r,{onClick:()=>n("convert"),children:[e.jsx(be,{size:16,style:{marginRight:8}}),"Convert to multi-unit"]})]})]})}export{Xe as ListingMappingView};
