import{c as pe,r,bl as be,j as e,B as s,A as B,T as i,I as d,O as je,a as b,bh as ye,b as we,J as Ce,x as ve,C as ae,D as Se,g as ke,F as oe,a5 as ze,Q as Ie}from"./index-DDMGUD-_.js";import{D as De}from"./content-DAzX26cm.js";import{u as Me,W as Ae,S as Te}from"./message-components-vAOQu-5T.js";import{Q as We}from"./quality-indicator-D4mRD07p.js";import{W as Re}from"./wifi-CQjR-tX2.js";import{P as Oe}from"./phone-LqPZCl0h.js";import{S as ce}from"./search-BrcmRr-v.js";import{a as Ne,C as Pe}from"./chevron-right-BMTwaikB.js";import{E as he}from"./ellipsis-vertical-BBxk2nla.js";import{P as Le}from"./paperclip-CTO_dT--.js";import{T as v}from"./TextField-BZcg-6kp.js";import{S as Ee}from"./send-DQcfXcnB.js";import{R as ne}from"./refresh-cw-CDZ7kg9Q.js";import{C as le}from"./Card-C1fEEBVz.js";import{C as de}from"./CardContent-Bmb6KKQR.js";import{T as Be}from"./trending-up-CCTv0Uik.js";import{C as xe}from"./clock-DKhyGhJk.js";import{T as He,a as Q}from"./Tabs-DQ5TNJO7.js";import{F as Fe}from"./funnel-Prn9gWG1.js";import{M as te}from"./message-square-DCtFfnlz.js";import{A as Ue}from"./archive-M3l3jVyX.js";import{E as Ge}from"./external-link-BdbJtcQk.js";import{C as $e}from"./calendar-C8D0Jpcj.js";import{C as Je}from"./chevron-down-B-CwXX_-.js";import{D as V,a as _,b as K,c as q}from"./DialogContent-CkHDAA-B.js";import"./Select-DixiLax7.js";import"./Menu-Bm1ShPnp.js";import"./InputLabel-B_w9HMQG.js";import"./FormControl-BRgYzLHi.js";import"./KeyboardArrowRight-D6UvfiY9.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Qe=pe("video",Ye);function Ve({conversationId:u,currentUserId:j="user-1",receiverId:h="user-2",receiverName:m="Guest",receiverAvatar:p="G",sx:I,onToggleSidebar:y,isSidebarOpen:l=!0,initialMessages:S=[],onMessageSent:w}){const[c,k]=r.useState(""),[H,n]=r.useState(!1),[D,ie]=r.useState(!1),[M,F]=r.useState(null),R=r.useRef(null),z=r.useRef(null),{recordMessage:X}=be(),O=S.map(t=>({id:t.id,senderId:t.senderId,receiverId:h,message:t.message,sentAt:t.sentAt,isOwn:t.isOwn})),{messages:x,sendMessage:N,isConnected:C,error:P,emitTyping:A}=Me(u,j,O);r.useEffect(()=>{R.current&&R.current.scrollIntoView({behavior:"smooth"})},[x]);const[L,U]=r.useState(0);r.useEffect(()=>{if(x.length>L&&x.length>0){const t=x[x.length-1];t.id.startsWith("msg_")&&w&&(console.log(`ðŸ“± [${u}] New message received:`,t.message),t.isOwn||F(Date.now()),w(u,t.message,t.isOwn)),U(x.length)}},[x.length,u,w,L,x]);const T=t=>{z.current&&clearTimeout(z.current),t?(A(t),z.current=setTimeout(()=>{A(!1),n(!1)},2e3)):(A(!1),n(!1))},G=t=>{const g=t.target.value;k(g),g.length>0?(n(!0),T(!0)):(n(!1),T(!1))},E=()=>{if(c.trim()&&C){const t=c.trim(),g=Date.now(),f=M?g-M:0;X({id:`msg_${g}`,conversationId:u,workerId:j,workerName:"Current User",workerRole:"associate",message:t,sentAt:new Date(g),responseTimeMs:f,guestMessage:"Previous guest message",guestMessageTime:M?new Date(M):void 0}),N(t,h),w&&w(u,t,!0),k(""),n(!1),T(!1),M&&F(null)}},$=t=>{t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),E())},Z=t=>new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),ee=t=>t?t<1?`${Math.round(t*1e3)}ms`:`${t.toFixed(1)}s`:null;return e.jsxs(s,{sx:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"#f8fafc",...I},children:[e.jsxs(s,{sx:{p:2,backgroundColor:"white",borderBottom:"1px solid",borderColor:"divider",display:"flex",alignItems:"center",justifyContent:"space-between",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(B,{sx:{width:40,height:40,bgcolor:"primary.main",color:"white",fontWeight:600},children:p}),e.jsxs(s,{children:[e.jsx(i,{variant:"subtitle1",sx:{fontWeight:600},children:m}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:.5},children:[C?e.jsx(Re,{size:12,color:"green"}):e.jsx(Ae,{size:12,color:"red"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:C?"Online":"Offline"})]})]})]}),e.jsxs(s,{sx:{display:"flex",gap:1},children:[e.jsx(d,{size:"small",children:e.jsx(Oe,{size:18})}),e.jsx(d,{size:"small",children:e.jsx(Qe,{size:18})}),e.jsx(d,{size:"small",children:e.jsx(ce,{size:18})}),y&&e.jsx(d,{size:"small",onClick:y,sx:{bgcolor:"action.hover","&:hover":{bgcolor:"action.selected"}},children:l?e.jsx(Ne,{size:18}):e.jsx(Pe,{size:18})}),e.jsx(d,{size:"small",children:e.jsx(he,{size:18})})]})]}),e.jsxs(s,{sx:{flex:1,overflow:"auto",p:2,display:"flex",flexDirection:"column",gap:1},children:[x.length===0?e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",flexDirection:"column",gap:2},children:[e.jsx(B,{sx:{width:80,height:80,bgcolor:"primary.main",color:"white",fontSize:"2rem"},children:p}),e.jsxs(i,{variant:"h6",color:"text.secondary",children:["Start a conversation with ",m]}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Send a message to begin chatting"})]}):x.map((t,g)=>{var Y;const f=t.isOwn,J=g===0||((Y=x[g-1])==null?void 0:Y.senderId)!==t.senderId;return e.jsxs(s,{sx:{display:"flex",justifyContent:f?"flex-end":"flex-start",alignItems:"flex-end",gap:1,mb:1},children:[!f&&J&&e.jsx(B,{sx:{width:32,height:32,bgcolor:"primary.main",color:"white",fontSize:"0.8rem"},children:p}),!f&&!J&&e.jsx(s,{sx:{width:32}}),e.jsxs(s,{sx:{maxWidth:"70%",display:"flex",flexDirection:"column",alignItems:f?"flex-end":"flex-start"},children:[e.jsx(s,{sx:{backgroundColor:f?"primary.main":"white",color:f?"white":"text.primary",borderRadius:2,px:2,py:1.5,boxShadow:"0 1px 2px rgba(0,0,0,0.1)",borderTopLeftRadius:f?16:4,borderTopRightRadius:f?4:16},children:e.jsx(i,{variant:"body2",sx:{lineHeight:1.4},children:t.message})}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:.5,mt:.5},children:[e.jsx(i,{variant:"caption",color:"text.secondary",children:Z(t.sentAt)}),t.responseTime&&e.jsxs(i,{variant:"caption",sx:{color:"success.main",fontWeight:500,fontSize:"0.7rem"},children:["âš¡ ",ee(t.responseTime)]}),f&&e.jsx(We,{qualityMetrics:{responseTimeMs:t.responseTime?t.responseTime*1e3:0,responseTimeScore:85,sentimentScore:80,completenessScore:90,grammarScore:85,templateComplianceScore:75,overallScore:83,qualityGrade:"good"},size:"small"})]})]})]},t.id)}),H&&e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1,p:1},children:[e.jsx(B,{sx:{width:24,height:24,bgcolor:"primary.main"},children:p}),e.jsx(s,{sx:{backgroundColor:"white",borderRadius:2,px:2,py:1,boxShadow:"0 1px 2px rgba(0,0,0,0.1)"},children:e.jsxs(i,{variant:"caption",color:"text.secondary",children:[m," is typing..."]})})]}),e.jsx("div",{ref:R})]}),P&&e.jsx(s,{sx:{p:1,backgroundColor:je("#f44336",.1),borderTop:"1px solid",borderColor:"error.main"},children:e.jsx(i,{variant:"caption",color:"error.main",children:P})}),e.jsx(s,{sx:{p:2,backgroundColor:"white",borderTop:"1px solid",borderColor:"divider"},children:e.jsxs(s,{sx:{display:"flex",alignItems:"flex-end",gap:1},children:[e.jsx(d,{size:"small",onClick:()=>ie(!D),sx:{color:"text.secondary","&:hover":{backgroundColor:"action.hover"}},children:e.jsx(Te,{size:20})}),e.jsx(d,{size:"small",sx:{color:"text.secondary","&:hover":{backgroundColor:"action.hover"}},children:e.jsx(Le,{size:20})}),e.jsx(v,{fullWidth:!0,multiline:!0,maxRows:4,value:c,onChange:G,onKeyPress:$,placeholder:`Message ${m}...`,disabled:!C,sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"#f8fafc","&:hover":{backgroundColor:"#f1f5f9"},"&.Mui-focused":{backgroundColor:"white"}}}}),e.jsx(b,{variant:"contained",onClick:E,disabled:!C||!c.trim(),sx:{minWidth:"auto",px:2,py:1.2,borderRadius:2,height:48,backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"},"&:disabled":{backgroundColor:"action.disabled"}},children:e.jsx(Ee,{size:20})})]})})]})}function _e({conversationId:u,sx:j}){const[h,m]=r.useState(null),[p,I]=r.useState(!1),[y,l]=r.useState(null),[S,w]=r.useState(null),c=r.useCallback(async()=>{I(!0),l(null);try{const D=await(await fetch(`${ye}/api/response-stats/${u}`)).json();D.success?(m(D.data),w(new Date)):l(D.message||"Failed to fetch response stats")}catch(n){n instanceof TypeError&&n.message.includes("fetch")?l("Cannot connect to server. Make sure the Socket.IO server is running on port 3001."):l("Failed to fetch response statistics"),console.error("Error fetching response stats:",n)}finally{I(!1)}},[u]);r.useEffect(()=>{c();const n=setInterval(c,3e4);return()=>clearInterval(n)},[u,c]);const k=n=>n>=80?"success":n>=60?"warning":"error",H=n=>n>=80?"Excellent":n>=60?"Good":n>=40?"Fair":"Poor";return p&&!h?e.jsx(s,{sx:{display:"flex",justifyContent:"center",p:2,...j},children:e.jsx(we,{size:24})}):y?e.jsx(Ce,{severity:"error",action:e.jsx(d,{size:"small",onClick:c,children:e.jsx(ne,{size:16})}),sx:j,children:y}):h?e.jsx(le,{sx:{...j},children:e.jsxs(de,{sx:{p:2},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(i,{variant:"h6",sx:{fontSize:"0.9rem",fontWeight:600},children:"Response Rate"}),e.jsx(ve,{title:"Refresh stats",children:e.jsx(d,{size:"small",onClick:c,disabled:p,children:e.jsx(ne,{size:16,className:p?"animate-spin":""})})})]}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Be,{size:20}),e.jsxs(i,{variant:"h4",sx:{fontSize:"1.8rem",fontWeight:700},children:[h.responseRate.toFixed(1),"%"]})]}),e.jsx(ae,{label:H(h.responseRate),color:k(h.responseRate),size:"small",sx:{fontWeight:500}})]}),e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Responses: ",h.totalResponses]}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Total: ",h.totalSent]})]}),h.pendingMessages>0&&e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1,mt:1},children:[e.jsx(xe,{size:14}),e.jsxs(i,{variant:"caption",color:"warning.main",children:[h.pendingMessages," pending response",h.pendingMessages!==1?"s":""]})]}),S&&e.jsxs(i,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:["Updated: ",S.toLocaleTimeString()]})]})}):e.jsx(le,{sx:{...j},children:e.jsxs(de,{sx:{p:2},children:[e.jsx(i,{variant:"h6",sx:{fontSize:"0.9rem",fontWeight:600,mb:2},children:"Response Rate"}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",py:2},children:"No data available yet. Send some messages to see response statistics."})]})})}function zs(){const u=Se(),[j,h]=r.useState("inbox"),[m,p]=r.useState("4"),[I,y]=r.useState(!1),[l]=r.useState("all"),[S,w]=r.useState(""),[c,k]=r.useState(!0),[H,n]=r.useState(!1),[D,ie]=r.useState(!1),[M,F]=r.useState(!1),[R,z]=r.useState(!1),[X,O]=r.useState(!1),[x,N]=r.useState(!1),[C,P]=r.useState(""),[A,L]=r.useState(""),[U,T]=r.useState(""),[G,E]=r.useState(""),[$,Z]=r.useState([{id:"1",name:"Polina",origin:"Airbnb",avatar:"P",lastMessage:"Hi! Can I check in at 2 PM instead of 3 PM?",timestamp:"19:36",unread:!0,status:"active",bookingDates:"27 Oct 25 â†’ 01 Nov 25",propertyName:"Elegant 2BR Apt | Balcony, AC, Near",statusIcon:"hourglass",initialMessages:[{id:"msg-1-1",senderId:"1",message:"Hi! Can I check in at 2 PM instead of 3 PM?",sentAt:Date.now()-36e5,isOwn:!1}]},{id:"2",name:"Alexandra Kirkland",origin:"Airbnb",avatar:"A",lastMessage:"You: Perfect! The WiFi password is on the fridge",timestamp:"19:22",unread:!1,status:"active",bookingDates:"15 Nov 25 â†’ 20 Nov 25",propertyName:"Modern Studio in City Center",statusIcon:"read",initialMessages:[{id:"msg-2-1",senderId:"2",message:"Thank you for the wonderful stay! The apartment was perfect.",sentAt:Date.now()-72e5,isOwn:!1},{id:"msg-2-2",senderId:"host",message:"Perfect! The WiFi password is on the fridge",sentAt:Date.now()-36e5,isOwn:!0}]},{id:"3",name:"Monica Dovarch",origin:"Booking.com",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=40&h=40&fit=crop&crop=face",lastMessage:"Thanks! Is there a coffee machine?",timestamp:"18:45",unread:!0,status:"active",bookingDates:"05 Dec 25 â†’ 10 Dec 25",propertyName:"Luxury Penthouse with View",statusIcon:"unread",initialMessages:[{id:"msg-3-1",senderId:"3",message:"Is there parking available at the property?",sentAt:Date.now()-108e5,isOwn:!1},{id:"msg-3-2",senderId:"host",message:"Yes, there is free parking in the garage.",sentAt:Date.now()-9e6,isOwn:!0},{id:"msg-3-3",senderId:"3",message:"Thanks! Is there a coffee machine?",sentAt:Date.now()-72e5,isOwn:!1}]},{id:"4",name:"Yury Burman",origin:"Airbnb",avatar:"Y",lastMessage:"jgjkg",timestamp:"17:30",unread:!1,status:"active",bookingDates:"22 Dec 25 â†’ 28 Dec 25",propertyName:"Cozy Apartment Near Metro",statusIcon:"read",initialMessages:[{id:"msg-4-1",senderId:"4",message:"Can we check in early tomorrow? We arrive at 10 AM.",sentAt:Date.now()-144e5,isOwn:!1},{id:"msg-4-2",senderId:"host",message:"Yes, early check-in is available. I'll send you the key code.",sentAt:Date.now()-126e5,isOwn:!0},{id:"msg-4-3",senderId:"4",message:"jgjkg",sentAt:Date.now()-108e5,isOwn:!1}]},{id:"5",name:"Sarah Johnson",origin:"Airbnb",avatar:"S",lastMessage:"You: The key is under the flower pot",timestamp:"16:15",unread:!1,status:"active",bookingDates:"30 Nov 25 â†’ 05 Dec 25",propertyName:"Downtown Loft with City View",statusIcon:"read",initialMessages:[{id:"msg-5-1",senderId:"5",message:"Where can I find the key for check-in?",sentAt:Date.now()-18e6,isOwn:!1},{id:"msg-5-2",senderId:"host",message:"The key is under the flower pot",sentAt:Date.now()-162e5,isOwn:!0}]},{id:"6",name:"Michael Chen",origin:"Booking.com",avatar:"M",lastMessage:"Is the heating working properly?",timestamp:"15:42",unread:!0,status:"active",bookingDates:"12 Dec 25 â†’ 18 Dec 25",propertyName:"Modern 1BR Near University",statusIcon:"unread",initialMessages:[{id:"msg-6-1",senderId:"6",message:"Is the heating working properly?",sentAt:Date.now()-216e5,isOwn:!1}]},{id:"7",name:"Emma Wilson",origin:"Airbnb",avatar:"E",lastMessage:"You: Check-out is at 11 AM. Have a great trip!",timestamp:"14:20",unread:!1,status:"active",bookingDates:"08 Nov 25 â†’ 12 Nov 25",propertyName:"Charming Studio in Historic District",statusIcon:"read",initialMessages:[{id:"msg-7-1",senderId:"7",message:"What time is check-out?",sentAt:Date.now()-252e5,isOwn:!1},{id:"msg-7-2",senderId:"host",message:"Check-out is at 11 AM. Have a great trip!",sentAt:Date.now()-234e5,isOwn:!0}]},{id:"8",name:"David Rodriguez",origin:"Airbnb",avatar:"D",lastMessage:"Can you recommend good restaurants nearby?",timestamp:"13:55",unread:!0,status:"active",bookingDates:"25 Dec 25 â†’ 02 Jan 26",propertyName:"Luxury Penthouse with Terrace",statusIcon:"unread",initialMessages:[{id:"msg-8-1",senderId:"8",message:"Can you recommend good restaurants nearby?",sentAt:Date.now()-288e5,isOwn:!1}]},{id:"9",name:"Lisa Thompson",origin:"Airbnb",avatar:"L",lastMessage:"",timestamp:"12:30",unread:!1,status:"active",bookingDates:"15 Jan 26 â†’ 20 Jan 26",propertyName:"Modern Studio Downtown",statusIcon:"read",initialMessages:[]},{id:"10",name:"James Wilson",origin:"Booking.com",avatar:"J",lastMessage:"",timestamp:"11:15",unread:!1,status:"active",bookingDates:"28 Jan 26 â†’ 02 Feb 26",propertyName:"Cozy Cabin Retreat",statusIcon:"read",initialMessages:[]}]),ee=(a,W)=>{h(W),W!=="inbox"&&u.push(`/inbox/${W}`)},t=a=>{p(a)},g=(a,W,re)=>{Z(me=>me.map(se=>{if(se.id===a){const ge=re?`You: ${W}`:W;return{...se,lastMessage:ge,timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),unread:!re}}return se}))},f=()=>{k(!c)},J=()=>{console.log("Notes saved:",C),z(!1),P("")},Y=()=>{console.log("Assigned to:",A),O(!1),L("")},fe=()=>{console.log("Snoozed until:",U,G),F(!0),N(!1),T(""),E("")},ue=$.filter(a=>l==="all"?a.status==="active":l==="archived"?a.status==="archived":l==="snoozed"?a.status==="snoozed":!0).filter(a=>a.name.toLowerCase().includes(S.toLowerCase())),o=$.find(a=>a.id===m);return e.jsxs(De,{maxWidth:!1,sx:{p:0},children:[e.jsxs(s,{sx:{p:2,pb:1},children:[e.jsx(i,{variant:"h5",sx:{fontWeight:600,mb:1,fontSize:"1.5rem"},children:"Guest Messaging"}),e.jsxs(He,{value:j,onChange:ee,sx:{minHeight:"auto"},children:[e.jsx(Q,{label:"Inbox",value:"",sx:{minHeight:"auto",py:1}}),e.jsx(Q,{label:"Message Templates",value:"message-templates",sx:{minHeight:"auto",py:1}}),e.jsx(Q,{label:"Automations",value:"automations",sx:{minHeight:"auto",py:1}}),e.jsx(Q,{label:"Manage Messages",value:"manage-messages",sx:{minHeight:"auto",py:1}})]})]}),e.jsxs(s,{sx:{display:"flex",height:"calc(100vh - 120px)",overflow:"hidden",backgroundColor:"#ffffff",border:"1px solid #e9ecef",borderRadius:1},children:[e.jsxs(s,{sx:{width:380,borderRight:"1px solid",borderColor:"#e9ecef",display:"flex",flexDirection:"column",backgroundColor:"#ffffff"},children:[e.jsxs(s,{sx:{p:1.5,borderBottom:"1px solid",borderColor:"#e9ecef",backgroundColor:"#f8f9fa"},children:[e.jsxs(s,{sx:{display:"flex",gap:.5,mb:1.5},children:[e.jsx(d,{sx:{backgroundColor:"#4caf50",color:"white",width:32,height:32,"&:hover":{backgroundColor:"#45a049"}},children:e.jsx(Fe,{size:14})}),e.jsx(d,{sx:{backgroundColor:l==="all"?"#4caf50":"#ffffff",color:l==="all"?"white":"#6c757d",border:"1px solid #e9ecef",width:32,height:32,"&:hover":{backgroundColor:l==="all"?"#45a049":"#f8f9fa",borderColor:"#4caf50"}},children:e.jsx(te,{size:14})}),e.jsx(d,{sx:{backgroundColor:l==="archived"?"#4caf50":"#ffffff",color:l==="archived"?"white":"#6c757d",border:"1px solid #e9ecef",width:32,height:32,"&:hover":{backgroundColor:l==="archived"?"#45a049":"#f8f9fa",borderColor:"#4caf50"}},children:e.jsx(Ue,{size:14})}),e.jsx(d,{sx:{backgroundColor:l==="snoozed"?"#4caf50":"#ffffff",color:l==="snoozed"?"white":"#6c757d",border:"1px solid #e9ecef",width:32,height:32,"&:hover":{backgroundColor:l==="snoozed"?"#45a049":"#f8f9fa",borderColor:"#4caf50"}},children:e.jsx(xe,{size:14})})]}),e.jsx(v,{placeholder:"Search guests...",size:"small",value:S,onChange:a=>w(a.target.value),fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{backgroundColor:"#ffffff",borderRadius:2,border:"1px solid #e9ecef",fontSize:"14px",height:"36px","&:hover":{borderColor:"#4caf50"},"&.Mui-focused":{backgroundColor:"white",borderColor:"#4caf50",boxShadow:"0 0 0 2px rgba(76, 175, 80, 0.1)"}}},InputProps:{startAdornment:e.jsx(ke,{position:"start",children:e.jsx(ce,{size:16,color:"#6c757d"})})}})]}),e.jsx(s,{sx:{flex:1,overflow:"auto"},children:ue.map(a=>e.jsx(s,{onClick:()=>t(a.id),sx:{p:1.5,borderBottom:"1px solid",borderColor:"#f5f5f5",cursor:"pointer",backgroundColor:(o==null?void 0:o.id)===a.id?"#f0fdfd":"white",borderLeft:(o==null?void 0:o.id)===a.id?"3px solid #4caf50":"3px solid transparent","&:hover":{backgroundColor:(o==null?void 0:o.id)===a.id?"#f0fdfd":"#f8f9fa"},transition:"all 0.15s ease",position:"relative"},children:e.jsxs(s,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[e.jsxs(s,{sx:{position:"relative"},children:[e.jsx(B,{sx:{width:40,height:40,backgroundColor:a.avatar.length===1?"#4caf50":"transparent",color:a.avatar.length===1?"white":"inherit",fontSize:"0.9rem",fontWeight:600},src:a.avatar.length>1?a.avatar:void 0,children:a.avatar.length===1?a.avatar:void 0}),a.origin==="Airbnb"&&e.jsx(s,{sx:{position:"absolute",top:-2,right:-2,width:16,height:16,borderRadius:"50%",backgroundColor:"#ff5a5f",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.6rem",color:"white",fontWeight:"bold"},children:"A"})]}),e.jsxs(s,{sx:{flex:1,minWidth:0},children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5},children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600,fontSize:"0.9rem",color:(o==null?void 0:o.id)===a.id?"#1976d2":"#1a1a1a"},children:a.name}),e.jsx(i,{variant:"caption",sx:{fontSize:"0.75rem",color:"#6c757d"},children:a.timestamp})]}),a.lastMessage&&e.jsx(i,{variant:"body2",sx:{fontSize:"0.8rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:a.unread?500:400,color:a.unread?"#1a1a1a":"#6c757d"},children:a.lastMessage})]})]})},a.id))})]}),e.jsx(s,{sx:{flex:c?1:2,display:"flex",flexDirection:"column",backgroundColor:"#ffffff",borderRight:c?"1px solid":"none",borderColor:"#f0f0f0",position:"relative"},children:o?e.jsx(e.Fragment,{children:e.jsx(Ve,{conversationId:m,currentUserId:`user-${m}`,receiverId:(o==null?void 0:o.id)||"guest-1",receiverName:(o==null?void 0:o.name)||"Guest",receiverAvatar:(o==null?void 0:o.avatar)||"G",sx:{flex:1},onToggleSidebar:f,isSidebarOpen:c,initialMessages:(o==null?void 0:o.initialMessages)||[],onMessageSent:g})}):e.jsx(s,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",flexDirection:"column",gap:2},children:e.jsx(i,{variant:"h6",color:"text.secondary",children:"Select a conversation to start messaging"})})}),o&&c&&e.jsxs(s,{sx:{width:320,borderLeft:"1px solid",borderColor:"#e0e0e0",backgroundColor:"#ffffff",boxShadow:"-2px 0 8px rgba(0,0,0,0.1)",zIndex:1},children:[e.jsxs(s,{sx:{p:2,borderBottom:"1px solid",borderColor:"#e0e0e0",backgroundColor:"#f8f9fa"},children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(i,{variant:"h6",sx:{fontWeight:600,fontSize:"1.1rem"},children:"Reservation"}),e.jsx(ae,{label:"MODIFIED",size:"small",color:"warning",sx:{fontSize:"0.7rem",height:20}})]}),e.jsxs(s,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:[e.jsx(d,{size:"small",sx:{width:28,height:28},children:e.jsx(s,{sx:{width:14,height:14,backgroundColor:"#ff5a5f",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.5rem",color:"white",fontWeight:"bold"},children:"A"})}),e.jsx(d,{size:"small",sx:{width:28,height:28},children:e.jsx(Ge,{size:14})}),e.jsx(d,{size:"small",sx:{width:28,height:28},children:e.jsx($e,{size:14})}),e.jsx(d,{size:"small",sx:{width:28,height:28},children:e.jsx(he,{size:14})}),e.jsx(d,{size:"small",sx:{width:28,height:28},children:e.jsx(Je,{size:14})})]})]}),e.jsxs(s,{sx:{p:2,maxHeight:"calc(100vh - 200px)",overflow:"auto"},children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600,mb:1,color:"#1976d2",fontSize:"0.9rem",lineHeight:1.3},children:"Luxury Stay in Rome - Steps from Metro A Cornelia (372243)"}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:2,fontSize:"0.8rem",lineHeight:1.4},children:"Via Giuseppe de Camillis, 3"}),e.jsxs(s,{sx:{mb:2},children:[e.jsx(i,{variant:"body2",sx:{mb:.5,fontSize:"0.8rem",fontWeight:500},children:"Email:"}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:1,fontSize:"0.8rem"},children:"Phone: ðŸ‡±ðŸ‡» +371 29 589 056"}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(s,{sx:{width:6,height:6,backgroundColor:"#ff5a5f",borderRadius:"50%"}}),e.jsx(i,{variant:"body2",sx:{fontSize:"0.8rem"},children:"Airbnb"})]})]}),e.jsx(oe,{sx:{my:1.5}}),e.jsxs(s,{sx:{mb:2},children:[e.jsx(i,{variant:"body2",sx:{mb:.5,fontSize:"0.8rem",fontWeight:500},children:"Number of nights: 6"}),e.jsx(i,{variant:"body2",sx:{mb:1,fontSize:"0.8rem"},children:"Number of guests: 3"})]}),e.jsx(oe,{sx:{my:1.5}}),e.jsxs(s,{sx:{mb:2},children:[e.jsx(i,{variant:"body2",sx:{mb:.5,fontSize:"0.8rem",fontWeight:500},children:"â‚¬639.05 of â‚¬639.05"}),e.jsx(s,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:e.jsx(ae,{label:"Paid",size:"small",color:"success",sx:{fontSize:"0.7rem",height:18}})}),e.jsx(i,{variant:"body2",sx:{mb:.5,fontSize:"0.8rem"},children:"Total price: â‚¬639.05"}),e.jsx(i,{variant:"body2",sx:{fontSize:"0.8rem"},children:"Payout sum: â‚¬451.39"})]}),e.jsx(_e,{conversationId:m,sx:{mt:2}}),c&&e.jsx(s,{sx:{position:"relative",backgroundColor:"#f0f0f0",borderRadius:1.5,p:1.5,mt:2},children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(te,{size:14}),e.jsx(i,{variant:"body2",sx:{fontWeight:500,fontSize:"0.8rem"},children:"Hi. Need any help?"}),e.jsx(d,{size:"small",onClick:()=>k(!1),sx:{ml:"auto",p:.5,width:20,height:20},children:e.jsx(ze,{size:10})})]})})]})]})]}),e.jsx(s,{sx:{position:"fixed",bottom:24,right:24},children:e.jsx(Ie,{badgeContent:3,color:"error",children:e.jsx(b,{variant:"contained",sx:{width:56,height:56,borderRadius:2,backgroundColor:"#ff6b35","&:hover":{backgroundColor:"#e55a2b"},boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:e.jsx(te,{size:24})})})}),e.jsxs(V,{open:I,onClose:()=>y(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(_,{children:"Bulk update"}),e.jsx(K,{children:e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[e.jsxs(v,{select:!0,label:"Mark message thread as",fullWidth:!0,SelectProps:{native:!0},children:[e.jsx("option",{value:"read",children:"Read"}),e.jsx("option",{value:"archived",children:"Archived"})]}),e.jsx(v,{label:"If the last activity happens on or before",type:"date",fullWidth:!0,InputLabelProps:{shrink:!0}})]})}),e.jsxs(q,{children:[e.jsx(b,{onClick:()=>y(!1),children:"Cancel"}),e.jsx(b,{variant:"contained",onClick:()=>y(!1),children:"Confirm"})]})]}),e.jsxs(V,{open:R,onClose:()=>z(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(_,{children:"Add Notes"}),e.jsx(K,{children:e.jsx(v,{multiline:!0,rows:4,fullWidth:!0,placeholder:"Add notes about this conversation...",value:C,onChange:a=>P(a.target.value),sx:{mt:2}})}),e.jsxs(q,{children:[e.jsx(b,{onClick:()=>z(!1),children:"Cancel"}),e.jsx(b,{variant:"contained",onClick:J,children:"Save Notes"})]})]}),e.jsxs(V,{open:X,onClose:()=>O(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(_,{children:"Assign Conversation"}),e.jsx(K,{children:e.jsxs(v,{select:!0,fullWidth:!0,label:"Assign to",value:A,onChange:a=>L(a.target.value),sx:{mt:2},SelectProps:{native:!0},children:[e.jsx("option",{value:"",children:"Select team member"}),e.jsx("option",{value:"manuel",children:"Manuel Sciarria"}),e.jsx("option",{value:"sarah",children:"Sarah Johnson"}),e.jsx("option",{value:"mike",children:"Mike Wilson"}),e.jsx("option",{value:"lisa",children:"Lisa Brown"})]})}),e.jsxs(q,{children:[e.jsx(b,{onClick:()=>O(!1),children:"Cancel"}),e.jsx(b,{variant:"contained",onClick:Y,children:"Assign"})]})]}),e.jsxs(V,{open:x,onClose:()=>N(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(_,{children:"Snooze Conversation"}),e.jsx(K,{children:e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[e.jsx(v,{label:"Snooze until date",type:"date",fullWidth:!0,value:U,onChange:a=>T(a.target.value),InputLabelProps:{shrink:!0}}),e.jsx(v,{label:"Time",type:"time",fullWidth:!0,value:G,onChange:a=>E(a.target.value),InputLabelProps:{shrink:!0}})]})}),e.jsxs(q,{children:[e.jsx(b,{onClick:()=>N(!1),children:"Cancel"}),e.jsx(b,{variant:"contained",onClick:fe,children:"Snooze"})]})]})]})}export{zs as InboxView};
