import{D as W,r as n,j as e,B as o,T as a,a as r,e as d,g as M}from"./index-DlK49mD9.js";import{D as B}from"./content-BncdO-AK.js";import{T as O,a as m}from"./Tabs-CawWx8bN.js";import{F as P}from"./funnel-CgbT2BEe.js";import{F as J}from"./FormControl-DsPW8NaL.js";import{S as L}from"./Select-hkki-_gR.js";import{T as R}from"./TextField-DGQVylbQ.js";import{S as H}from"./search-C7TcvOao.js";import{P as N}from"./plus-C-Pm_q2r.js";import{C as _}from"./Card-C2DhIU3E.js";import{S as q}from"./Switch-Bj_iObyt.js";import{E as U}from"./external-link-D62b2bUY.js";import{S as V}from"./square-pen-ClrXFKJK.js";import{C as Q}from"./copy-DLzUszwU.js";import{T as $}from"./trash-2-CA6qpQWl.js";import{D as G,a as Y,b as K,c as X}from"./DialogContent-BrwwiAlS.js";import"./KeyboardArrowRight-B0juUeOl.js";import"./Menu-Cd2TK2zY.js";import"./InputLabel-vBrrCZYs.js";import"./SwitchBase-D6K1hBX3.js";const Z=[{id:1,title:"POLACCHI: Prenotazione confermata",subject:"Thank you for your reservation! ðŸ‘‹",defaultMessage:"Thank you for your reservation! We look forward to hosting you.",eventTrigger:"booking_confirmed",ccEmail1:"host@example.com",ccEmail2:"",selectedChannels:["booking","airbnb"],selectedListings:[{id:1,name:"Polacchi42"}],channels:[{name:"Booking.com",color:"#003580",icon:"ðŸ¨"},{name:"Airbnb Pro",color:"#FF5A5F",icon:"ðŸ "}],listing:"Polacchi42",creationDate:"6 September 2024 at 2:54 pm",lastEdit:"13 January 2025 at 9:53 am",automationId:"212426",isActive:!0},{id:2,title:"Welcome Message Automation",subject:"Welcome to your stay!",defaultMessage:"Welcome to your stay! We hope you have a wonderful time.",eventTrigger:"booking_confirmed",ccEmail1:"welcome@example.com",ccEmail2:"",selectedChannels:["airbnb","booking"],selectedListings:[{id:2,name:"Beach House Villa"}],channels:[{name:"Airbnb",color:"#FF5A5F",icon:"ðŸ "},{name:"Booking.com",color:"#003580",icon:"ðŸ¨"}],listing:"Beach House Villa",creationDate:"15 January 2024 at 10:30 am",lastEdit:"20 January 2024 at 3:15 pm",automationId:"AUTO-001",isActive:!0},{id:3,title:"Check-in Instructions",subject:"Your check-in details",defaultMessage:"Here are your check-in instructions. Please follow them carefully.",eventTrigger:"check_in_reminder",ccEmail1:"checkin@example.com",ccEmail2:"",selectedChannels:["airbnb","vrbo"],selectedListings:[{id:3,name:"Downtown Apartment"}],channels:[{name:"Airbnb",color:"#FF5A5F",icon:"ðŸ "},{name:"VRBO",color:"#00A699",icon:"ðŸ–ï¸"}],listing:"Downtown Apartment",creationDate:"10 January 2024 at 9:00 am",lastEdit:"18 January 2024 at 2:45 pm",automationId:"AUTO-002",isActive:!1},{id:4,title:"Review Request",subject:"How was your stay?",defaultMessage:"Thank you for staying with us! Please share your experience.",eventTrigger:"review_request",ccEmail1:"reviews@example.com",ccEmail2:"",selectedChannels:["airbnb","booking","vrbo"],selectedListings:[{id:4,name:"City Center Loft"}],channels:[{name:"Airbnb",color:"#FF5A5F",icon:"ðŸ "},{name:"Booking.com",color:"#003580",icon:"ðŸ¨"},{name:"VRBO",color:"#00A699",icon:"ðŸ–ï¸"}],listing:"City Center Loft",creationDate:"8 January 2024 at 11:20 am",lastEdit:"15 January 2024 at 4:30 pm",automationId:"AUTO-004",isActive:!0}];function ye(){const c=W(),[b,j]=n.useState("automations"),[y,v]=n.useState(""),[C,S]=n.useState("date"),[l,x]=n.useState(Z),[A,h]=n.useState(!1),[g,u]=n.useState(null);n.useEffect(()=>{const t=localStorage.getItem("automations");if(t){const i=JSON.parse(t).sort((f,F)=>F.id-f.id);x(f=>[...i,...f])}},[]),n.useEffect(()=>{if(l.length>0){const t=l.filter(s=>s.id>1e3);localStorage.setItem("automations",JSON.stringify(t))}},[l]);const k=(t,s)=>{j(s),s!=="automations"&&c.push(`/inbox/${s}`)},T=()=>{c.push("/inbox/automation-create")},z=t=>{x(s=>s.map(i=>i.id===t?{...i,isActive:!i.isActive}:i))},D=t=>{c.push(`/inbox/automation-edit/${t}`)},I=t=>{const s=l.find(i=>i.id===t);s&&(localStorage.setItem("automationToCopy",JSON.stringify(s)),c.push("/inbox/automation-create"))},w=t=>{u(t),h(!0)},E=()=>{g&&(x(t=>t.filter(s=>s.id!==g)),h(!1),u(null))},p=()=>{h(!1),u(null)};return e.jsxs(B,{maxWidth:"xl",children:[e.jsxs(o,{sx:{mb:{xs:3,md:5}},children:[e.jsx(a,{variant:"h4",sx:{fontWeight:600,mb:2},children:"Guest Messaging"}),e.jsxs(O,{value:b,onChange:k,sx:{mb:3},children:[e.jsx(m,{label:"Inbox",value:""}),e.jsx(m,{label:"Message Templates",value:"message-templates"}),e.jsx(m,{label:"Automations",value:"automations"}),e.jsx(m,{label:"Manage Messages",value:"manage-messages"})]})]}),e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[e.jsxs(o,{sx:{display:"flex",gap:2,alignItems:"center"},children:[e.jsx(r,{variant:"outlined",startIcon:e.jsx(P,{size:16}),sx:{borderColor:"#4caf50",color:"#4caf50","&:hover":{borderColor:"#45a049",backgroundColor:"rgba(76, 175, 80, 0.04)"}},children:"Filters"}),e.jsx(J,{size:"small",sx:{minWidth:120},children:e.jsxs(L,{value:C,onChange:t=>S(t.target.value),displayEmpty:!0,sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"#e0e0e0"}},children:[e.jsx(d,{value:"date",children:"Sort by"}),e.jsx(d,{value:"name",children:"Name"}),e.jsx(d,{value:"status",children:"Status"}),e.jsx(d,{value:"date",children:"Date"})]})}),e.jsx(R,{placeholder:"Search",size:"small",value:y,onChange:t=>v(t.target.value),sx:{minWidth:200},InputProps:{startAdornment:e.jsx(M,{position:"start",children:e.jsx(H,{size:16})})}})]}),e.jsx(r,{variant:"contained",startIcon:e.jsx(N,{size:16}),onClick:T,sx:{bgcolor:"#4caf50","&:hover":{bgcolor:"#45a049"},px:3,py:1.5,borderRadius:2},children:"Create new +"})]}),e.jsx(o,{sx:{display:"flex",flexDirection:"column",gap:2},children:l.map(t=>e.jsx(_,{sx:{p:3,border:"1px solid #e0e0e0",borderRadius:2},children:e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"flex-start",gap:2,flex:1},children:[e.jsx(q,{checked:t.isActive,onChange:()=>z(t.id),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#4caf50","& + .MuiSwitch-track":{backgroundColor:"#4caf50"}}}}),e.jsxs(o,{sx:{flex:1},children:[e.jsx(a,{variant:"h6",sx:{fontWeight:600,mb:2,fontSize:"1.1rem"},children:t.title}),e.jsxs(o,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:2,mb:2},children:[e.jsxs(o,{children:[e.jsx(a,{variant:"body2",color:"text.secondary",sx:{mb:.5,fontSize:"0.75rem"},children:"Subject"}),e.jsx(a,{variant:"body2",sx:{fontWeight:500,fontSize:"0.875rem"},children:t.subject})]}),e.jsxs(o,{children:[e.jsx(a,{variant:"body2",color:"text.secondary",sx:{mb:.5,fontSize:"0.75rem"},children:"Event"}),e.jsx(a,{variant:"body2",sx:{fontWeight:500,fontSize:"0.875rem"},children:t.eventTrigger})]}),e.jsxs(o,{children:[e.jsx(a,{variant:"body2",color:"text.secondary",sx:{mb:.5,fontSize:"0.75rem"},children:"Channels"}),e.jsx(o,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:t.channels.map((s,i)=>e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:.5,px:1,py:.5,borderRadius:1,bgcolor:"grey.100",fontSize:"0.75rem"},children:[e.jsx("span",{children:s.icon}),e.jsx("span",{children:s.name})]},i))})]}),e.jsxs(o,{children:[e.jsx(a,{variant:"body2",color:"text.secondary",sx:{mb:.5,fontSize:"0.75rem"},children:"Listing"}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500,fontSize:"0.875rem",color:"#4caf50"},children:t.listing}),e.jsx(U,{size:12,color:"#4caf50"})]})]}),e.jsxs(o,{children:[e.jsx(a,{variant:"body2",color:"text.secondary",sx:{mb:.5,fontSize:"0.75rem"},children:"Creation date"}),e.jsx(a,{variant:"body2",sx:{fontWeight:500,fontSize:"0.875rem"},children:t.creationDate})]}),e.jsxs(o,{children:[e.jsx(a,{variant:"body2",color:"text.secondary",sx:{mb:.5,fontSize:"0.75rem"},children:"Last edit"}),e.jsx(a,{variant:"body2",sx:{fontWeight:500,fontSize:"0.875rem"},children:t.lastEdit})]}),e.jsxs(o,{children:[e.jsx(a,{variant:"body2",color:"text.secondary",sx:{mb:.5,fontSize:"0.75rem"},children:"Automation id"}),e.jsx(a,{variant:"body2",sx:{fontWeight:500,fontSize:"0.875rem",fontFamily:"monospace"},children:t.automationId})]})]})]})]}),e.jsxs(o,{sx:{display:"flex",gap:1,ml:2},children:[e.jsx(r,{size:"small",variant:"outlined",startIcon:e.jsx(V,{size:14}),onClick:()=>D(t.id),sx:{borderColor:"#4caf50",color:"#4caf50",fontSize:"0.75rem",px:2,py:.5,"&:hover":{borderColor:"#45a049",backgroundColor:"rgba(76, 175, 80, 0.04)"}},children:"Edit"}),e.jsx(r,{size:"small",variant:"outlined",startIcon:e.jsx(Q,{size:14}),onClick:()=>I(t.id),sx:{borderColor:"#4caf50",color:"#4caf50",fontSize:"0.75rem",px:2,py:.5,"&:hover":{borderColor:"#45a049",backgroundColor:"rgba(76, 175, 80, 0.04)"}},children:"Create Similar"}),e.jsx(r,{size:"small",variant:"outlined",startIcon:e.jsx($,{size:14}),onClick:()=>w(t.id),sx:{borderColor:"#f44336",color:"#f44336",fontSize:"0.75rem",px:2,py:.5,"&:hover":{borderColor:"#d32f2f",backgroundColor:"rgba(244, 67, 54, 0.04)"}},children:"Delete"})]})]})},t.id))}),e.jsxs(G,{open:A,onClose:p,maxWidth:"sm",fullWidth:!0,children:[e.jsx(Y,{children:"Delete Automation"}),e.jsx(K,{children:e.jsx(a,{children:"Are you sure you want to delete this automation? This action cannot be undone."})}),e.jsxs(X,{children:[e.jsx(r,{onClick:p,color:"inherit",children:"Cancel"}),e.jsx(r,{onClick:E,color:"error",variant:"contained",children:"Delete"})]})]})]})}export{ye as AutomationsView};
