import{D as ee,r as i,j as e,B as t,I as D,T as a,a as M,e as l,g as se,a4 as P,x as te}from"./index-DDMGUD-_.js";import{D as ae}from"./content-DAzX26cm.js";import{A as z}from"./arrow-left-DVLbOZnK.js";import{S as ie}from"./save-D0sLAz8V.js";import{C as O}from"./Card-C1fEEBVz.js";import{T as g}from"./TextField-BZcg-6kp.js";import{F as B}from"./FormControl-BRgYzLHi.js";import{S as E}from"./Select-DixiLax7.js";import{C as re}from"./chevron-down-B-CwXX_-.js";import{C as N}from"./Checkbox-DrgNyHeB.js";import{P as oe}from"./Pagination-Dusx6Zp7.js";import{F as le}from"./FormControlLabel-nlFIIXjS.js";import{I as ne}from"./info-_UHBnIlD.js";import"./InputLabel-B_w9HMQG.js";import"./Menu-Bm1ShPnp.js";import"./SwitchBase-s8UEUZOy.js";import"./LastPage-K8Xc1QT_.js";const ce=[{id:305034,name:"La Dimora Del Cavaliere",image:"https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/public/assets/images/mock/cover/cover-1.webp",selected:!1},{id:305035,name:"Navigli",image:"https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/public/assets/images/mock/cover/cover-2.webp",selected:!1},{id:305225,name:"Polacchi42",image:"https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/public/assets/images/mock/cover/cover-3.webp",selected:!1},{id:305421,name:"Superattico - Via Del Corso 43",image:"https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/public/assets/images/mock/cover/cover-4.webp",selected:!1},{id:306532,name:"Montecatini Terme",image:"https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/public/assets/images/mock/cover/cover-5.webp",selected:!1},{id:308582,name:"Monteverde - Quattroventi",image:"https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/public/assets/images/mock/cover/cover-6.webp",selected:!1},{id:310867,name:"La Storta",image:"https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/public/assets/images/mock/cover/cover-1.webp",selected:!1},{id:317154,name:"[5 Min From Trastevere] Chic Apt",image:"https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/public/assets/images/mock/cover/cover-2.webp",selected:!1},{id:332386,name:"Via Poggio Tulliano",image:"https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/public/assets/images/mock/cover/cover-3.webp",selected:!1},{id:345603,name:"Via Dei Marruccini | San Lorenzo",image:"https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/public/assets/images/mock/cover/cover-4.webp",selected:!1},{id:363365,name:"Via di Acqua Bullicante 113",image:"https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/public/assets/images/mock/cover/cover-5.webp",selected:!1},{id:363366,name:"Via Matera 23A -",image:"https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/public/assets/images/mock/cover/cover-6.webp",selected:!1}];function Te(){const d=ee(),[p,V]=i.useState(null),[m,f]=i.useState(""),[v,j]=i.useState(""),[y,S]=i.useState(""),[C,F]=i.useState(""),[H,J]=i.useState(""),[u,x]=i.useState(ce),[w,Q]=i.useState(!1),[k,I]=i.useState(!1),[T,q]=i.useState(1),h=12;i.useEffect(()=>{const s=window.location.pathname.split("/"),r=parseInt(s[s.length-1]);V(r);const o=localStorage.getItem("templateGroups");if(o){const c=JSON.parse(o).find(b=>b.id===r);c?(f(c.name||""),j(c.description||""),S(c.channel||""),I(c.autoApply||!1),x(b=>b.map(W=>{var R;return{...W,selected:((R=c.selectedListings)==null?void 0:R.some(Z=>Z.id===W.id))||!1}}))):d.push("/inbox/templates")}else d.push("/inbox/templates")},[d]);const A=s=>{x(r=>r.map(o=>o.id===s?{...o,selected:!o.selected}:o))},Y=()=>{Q(!w),x(s=>s.map(r=>({...r,selected:!w})))},_=()=>{if(!p)return;const s={id:p,name:m,description:v,channel:y||"All",listings:u.filter(n=>n.selected).length,selectedListings:u.filter(n=>n.selected),autoApply:k},o=JSON.parse(localStorage.getItem("templateGroups")||"[]").map(n=>n.id===p?s:n);localStorage.setItem("templateGroups",JSON.stringify(o)),d.push("/inbox/templates")},$=()=>{d.push("/inbox/templates")},G=u.filter(s=>s.name.toLowerCase().includes(C.toLowerCase())),L=(T-1)*h,K=L+h,U=G.slice(L,K),X=Math.ceil(G.length/h);return e.jsxs(ae,{maxWidth:"xl",children:[e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(D,{sx:{p:1},onClick:$,children:e.jsx(z,{size:20})}),e.jsx(a,{variant:"h4",sx:{fontWeight:600},children:"Edit Template Group"})]}),e.jsx(M,{variant:"contained",startIcon:e.jsx(ie,{size:20}),onClick:_,disabled:!m.trim(),sx:{bgcolor:"#23c6c8","&:hover":{bgcolor:"#1fb3b5"},"&:disabled":{bgcolor:"grey.300"},px:3,py:1.5,borderRadius:2},children:"Save"})]}),e.jsxs(t,{sx:{display:"flex",gap:4},children:[e.jsx(t,{sx:{flex:1,maxWidth:600},children:e.jsxs(O,{sx:{p:3,mb:3},children:[e.jsx(a,{variant:"h6",sx:{mb:3,fontWeight:600},children:"Template Group Details"}),e.jsxs(t,{sx:{mb:3},children:[e.jsx(a,{variant:"body2",sx:{mb:1,fontWeight:500},children:"Template group name *"}),e.jsx(g,{fullWidth:!0,placeholder:"Template group name",value:m,onChange:s=>f(s.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})]}),e.jsxs(t,{sx:{mb:3},children:[e.jsx(a,{variant:"body2",sx:{mb:1,fontWeight:500},children:"Template group description"}),e.jsx(g,{fullWidth:!0,placeholder:"Template group description",value:v,onChange:s=>j(s.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})]}),e.jsxs(t,{sx:{mb:3},children:[e.jsx(a,{variant:"body2",sx:{mb:1,fontWeight:500},children:"Channel"}),e.jsx(B,{fullWidth:!0,children:e.jsxs(E,{value:y,onChange:s=>S(s.target.value),displayEmpty:!0,sx:{borderRadius:2,"& .MuiOutlinedInput-notchedOutline":{borderColor:"#e0e0e0"}},children:[e.jsx(l,{value:"",children:e.jsx("em",{children:"Channel"})}),e.jsx(l,{value:"airbnb",children:"Airbnb"}),e.jsx(l,{value:"booking",children:"Booking.com"}),e.jsx(l,{value:"direct",children:"Direct Booking"})]})})]})]})}),e.jsx(t,{sx:{flex:1,maxWidth:600},children:e.jsxs(O,{sx:{p:3},children:[e.jsx(a,{variant:"h6",sx:{mb:3,fontWeight:600},children:"Listings"}),e.jsxs(t,{sx:{display:"flex",gap:2,mb:3},children:[e.jsx(g,{placeholder:"Type to search listings",value:C,onChange:s=>F(s.target.value),sx:{flex:1,"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(B,{sx:{minWidth:150},children:e.jsxs(E,{value:H,onChange:s=>J(s.target.value),displayEmpty:!0,startAdornment:e.jsx(se,{position:"start",children:e.jsx(re,{size:16})}),sx:{borderRadius:2,"& .MuiOutlinedInput-notchedOutline":{borderColor:"#e0e0e0"}},children:[e.jsx(l,{value:"",children:e.jsx("em",{children:"Select tags"})}),e.jsx(l,{value:"apartment",children:"Apartment"}),e.jsx(l,{value:"house",children:"House"}),e.jsx(l,{value:"villa",children:"Villa"})]})}),e.jsx(M,{variant:"contained",onClick:Y,sx:{bgcolor:"#23c6c8","&:hover":{bgcolor:"#1fb3b5"},borderRadius:2,px:3},children:"Select all"})]}),e.jsx(t,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:2,mb:3,maxHeight:400,overflowY:"auto"},children:U.map(s=>e.jsxs(P,{sx:{p:2,display:"flex",alignItems:"center",gap:2,cursor:"pointer",border:"1px solid #e0e0e0",borderRadius:2,"&:hover":{borderColor:"#23c6c8",boxShadow:"0 2px 8px rgba(35, 198, 200, 0.1)"}},onClick:()=>A(s.id),children:[e.jsx(t,{sx:{width:60,height:40,borderRadius:1,backgroundImage:`url('${s.image}')`,backgroundSize:"cover",backgroundPosition:"center",flexShrink:0}}),e.jsxs(t,{sx:{flex:1,minWidth:0},children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500,mb:.5},children:s.name}),e.jsx(a,{variant:"caption",color:"text.secondary",children:s.id})]}),e.jsx(N,{checked:s.selected,onChange:()=>A(s.id),sx:{flexShrink:0}})]},s.id))}),e.jsx(t,{sx:{display:"flex",justifyContent:"center",mb:3},children:e.jsx(oe,{count:X,page:T,onChange:(s,r)=>q(r),color:"primary",size:"small"})}),e.jsx(le,{control:e.jsx(N,{checked:k,onChange:s=>I(s.target.checked)}),label:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(a,{variant:"body2",children:"Automatically apply template group to new listings"}),e.jsx(te,{title:"This will automatically apply this template group to any new listings you add",children:e.jsx(ne,{size:16,color:"#666"})})]})})]})})]}),e.jsxs(t,{sx:{position:"fixed",bottom:20,right:20,zIndex:1e3},children:[e.jsxs(P,{sx:{p:2,mb:1,borderRadius:2,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",display:"flex",alignItems:"center",gap:1},children:[e.jsx(a,{variant:"body2",children:"Hi. Need any help?"}),e.jsx(D,{size:"small",children:e.jsx(z,{size:16})})]}),e.jsxs(t,{sx:{width:50,height:50,bgcolor:"#ff6b35",borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:[e.jsx(a,{variant:"h6",sx:{color:"white",fontWeight:600},children:"3"}),e.jsx(t,{sx:{position:"absolute",top:-5,right:-5,width:20,height:20,bgcolor:"#ff0000",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(a,{variant:"caption",sx:{color:"white",fontSize:"10px"},children:"3"})})]})]})]})}export{Te as TemplateGroupEditView};
