import{af as w,H as R,b0 as U,bk as M,r as l,bi as z,j as e,B as r,T as t,bm as D,e as d,a as B,A as E}from"./index-DlK49mD9.js";import{D as F}from"./content-BncdO-AK.js";import{G as m}from"./Grid-CFPLP85A.js";import{C as f}from"./Card-C2DhIU3E.js";import{C as j}from"./CardHeader-Gq3jQEdX.js";import{C as v}from"./CardContent-CO_bIGDJ.js";import{F as S}from"./FormControl-DsPW8NaL.js";import{I as b}from"./InputLabel-vBrrCZYs.js";import{S as y}from"./Select-hkki-_gR.js";import{T as G}from"./TextField-DGQVylbQ.js";import{S as H}from"./send-DaTpFara.js";import{U as L}from"./users-4d2Tl7H_.js";import"./Menu-Cd2TK2zY.js";function re(){const o=w(),{user:h}=R(),{sendAdminWarning:W}=U(),{getAllWorkersPerformance:C}=M(),[a,x]=l.useState(""),[n,u]=l.useState(""),[c,I]=l.useState("associate"),[p,A]=l.useState([]),g=C(),N=g.filter(s=>c==="associate"?s.role==="associate":c==="supervisor"?s.role==="supervisor":c==="manager"?s.role==="manager":!1),k=()=>{if(!a||!n.trim()||!h)return;const s=g.find(i=>i.workerId===a);s&&(W(a,h.name,n),A(i=>[...i,{userId:a,userName:s.workerName,message:n,timestamp:new Date}]),x(""),u(""))},[P,T]=l.useState([]);return z.useEffect(()=>{const s=localStorage.getItem("createdUsers");s&&T(JSON.parse(s))},[]),e.jsxs(F,{maxWidth:"xl",children:[e.jsxs(r,{sx:{mb:4},children:[e.jsx(t,{variant:"h4",gutterBottom:!0,children:"Send Warning Notifications"}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"Send push notifications to team members as warnings or alerts"})]}),e.jsxs(m,{container:!0,spacing:3,children:[e.jsx(m,{size:{xs:12,md:6},children:e.jsxs(f,{children:[e.jsx(j,{title:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(D,{size:20,color:o.palette.warning.main}),e.jsx(t,{variant:"h6",children:"Send Warning"})]})}),e.jsx(v,{children:e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(S,{fullWidth:!0,children:[e.jsx(b,{children:"Recipient Type"}),e.jsxs(y,{value:c,label:"Recipient Type",onChange:s=>{I(s.target.value),x("")},children:[e.jsx(d,{value:"associate",children:"Associate"}),e.jsx(d,{value:"supervisor",children:"Supervisor"}),e.jsx(d,{value:"manager",children:"Manager"})]})]}),e.jsxs(S,{fullWidth:!0,children:[e.jsx(b,{children:"Select Recipient"}),e.jsx(y,{value:a,label:"Select Recipient",onChange:s=>x(s.target.value),children:N.map(s=>e.jsxs(d,{value:s.workerId,children:[s.workerName," (",s.role,")"]},s.workerId))})]}),e.jsx(G,{fullWidth:!0,multiline:!0,rows:4,label:"Warning Message",placeholder:"Enter warning message here...",value:n,onChange:s=>u(s.target.value)}),e.jsx(B,{variant:"contained",startIcon:e.jsx(H,{size:20}),onClick:k,disabled:!a||!n.trim(),sx:{alignSelf:"flex-start",px:3},children:"Send Warning Notification"})]})})]})}),e.jsx(m,{size:{xs:12,md:6},children:e.jsxs(f,{children:[e.jsx(j,{title:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(L,{size:20,color:o.palette.primary.main}),e.jsx(t,{variant:"h6",children:"Sent Warnings"})]})}),e.jsx(v,{children:p.length===0?e.jsx(t,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",py:4},children:"No warnings sent yet"}):e.jsx(r,{sx:{display:"flex",flexDirection:"column",gap:2},children:p.slice().reverse().map((s,i)=>e.jsxs(r,{sx:{p:2,border:`1px solid ${o.palette.divider}`,borderRadius:2,backgroundColor:o.palette.warning.light+"08"},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[e.jsx(E,{sx:{bgcolor:"warning.main",width:32,height:32},children:s.userName.charAt(0)}),e.jsxs(r,{sx:{flex:1},children:[e.jsx(t,{variant:"subtitle2",sx:{fontWeight:600},children:s.userName}),e.jsx(t,{variant:"caption",color:"text.secondary",children:s.timestamp.toLocaleString()})]})]}),e.jsx(t,{variant:"body2",sx:{mt:1},children:s.message})]},i))})})]})})]})]})}export{re as AdminWarningsPage};
