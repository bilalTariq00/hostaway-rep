import{D as K,a6 as Q,r as c,j as e,B as t,T as r,a as d,d as i,e as a,a4 as y,C,g as X,I as m}from"./index-DDMGUD-_.js";import{D as Y}from"./content-DAzX26cm.js";import{M as b}from"./Menu-Bm1ShPnp.js";import{T as F}from"./TextField-BZcg-6kp.js";import{T as Z}from"./TableContainer-Cp4gnwML.js";import{T as ee,a as se,b as G,c as o,d as ne}from"./TableHead-CMCmgIDA.js";import{P as oe}from"./Pagination-Dusx6Zp7.js";import"./Select-DixiLax7.js";import"./InputLabel-B_w9HMQG.js";import"./FormControl-BRgYzLHi.js";import"./LastPage-K8Xc1QT_.js";function je(){const l=K(),{reservations:B}=Q(),[h,E]=c.useState(["Status: Confirmed"]),[f,M]=c.useState(""),[w,W]=c.useState(1),[p,L]=c.useState(10),[k,P]=c.useState(null),[I,S]=c.useState(null),[T,R]=c.useState(null),[u,A]=c.useState(null),U=s=>{P(s.currentTarget)},x=()=>{P(null)},N=s=>{S(s.currentTarget)},j=()=>{S(null)},$=(s,n)=>{s.stopPropagation(),R(s.currentTarget),A(n)},g=()=>{R(null),A(null)},O=()=>{if(u){const s=`https://guest-portal.example.com/reservation/${u.id}`;window.open(s,"_blank")}g()},V=async()=>{if(u){const s=`https://guest-portal.example.com/reservation/${u.id}`;try{await navigator.clipboard.writeText(s),console.log("Guest portal URL copied to clipboard")}catch(n){console.error("Failed to copy URL:",n)}}g()},_=s=>{E(h.filter(n=>n!==s))},H=s=>{switch(s){case"Confirmed":return"success";case"Pending":return"warning";case"Cancelled":return"error";default:return"default"}},v=B.filter(s=>s.guestName.toLowerCase().includes(f.toLowerCase())),q=Math.ceil(v.length/p),D=(w-1)*p,J=D+p,z=v.slice(D,J);return e.jsxs(Y,{maxWidth:"xl",children:[e.jsx(t,{sx:{mb:3},children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(r,{variant:"h4",sx:{fontWeight:600},children:"Reservations"}),e.jsxs(t,{sx:{display:"flex",gap:1},children:[e.jsx(d,{variant:"outlined",onClick:()=>l.push("/reservations/custom-fields"),children:"Custom Fields"}),e.jsx(d,{variant:"outlined",onClick:()=>l.push("/reservations/guestbook"),children:"Guestbook"}),e.jsx(d,{variant:"outlined",onClick:()=>l.push("/reservations/coupons"),children:"Coupons"}),e.jsx(d,{variant:"outlined",onClick:N,endIcon:e.jsx(i,{icon:"eva:arrow-down-fill"}),children:"Download Guest Data"}),e.jsxs(b,{anchorEl:I,open:!!I,onClose:j,children:[e.jsx(a,{onClick:j,children:"Export CSV"}),e.jsx(a,{onClick:j,children:"Export Excel"}),e.jsx(a,{onClick:j,children:"Download Report"})]}),e.jsx(d,{variant:"outlined",children:"Import"}),e.jsx(d,{variant:"contained",onClick:()=>l.push("/reservations/new"),children:"Add Reservation"})]})]})}),e.jsxs(y,{sx:{p:2,mb:3},children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsxs(d,{variant:"outlined",onClick:U,startIcon:e.jsx(i,{icon:"eva:funnel-fill"}),sx:{position:"relative"},children:["Filter",h.length>0&&e.jsx(C,{label:h.length,size:"small",sx:{position:"absolute",top:-8,right:-8,bgcolor:"warning.main",color:"white",fontSize:"0.7rem",height:18,minWidth:18}})]}),e.jsxs(b,{anchorEl:k,open:!!k,onClose:x,children:[e.jsx(a,{onClick:x,children:"Status"}),e.jsx(a,{onClick:x,children:"Date Range"}),e.jsx(a,{onClick:x,children:"Property"}),e.jsx(a,{onClick:x,children:"Guest"})]})]}),e.jsx(F,{size:"small",placeholder:"Search by guest name...",value:f,onChange:s=>M(s.target.value),InputProps:{startAdornment:e.jsx(X,{position:"start",children:e.jsx(i,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})},sx:{minWidth:250}})]}),h.length>0&&e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(r,{variant:"body2",color:"error.main",children:"Filtered by:"}),h.map(s=>e.jsx(C,{label:s,size:"small",onDelete:()=>_(s),sx:{bgcolor:"error.light",color:"white"}},s)),e.jsx(t,{sx:{flexGrow:1}}),e.jsxs(r,{variant:"body2",color:"text.secondary",children:["Viewing ",z.length," of ",v.length," reservations"]})]})]}),e.jsx(y,{sx:{mb:3},children:e.jsx(Z,{children:e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(G,{children:[e.jsx(o,{children:"Guest Name"}),e.jsx(o,{children:"Check-in Date"}),e.jsx(o,{children:"Status"}),e.jsx(o,{children:"Property"}),e.jsx(o,{children:"Nights"}),e.jsx(o,{children:"Guests"}),e.jsx(o,{children:"Total Amount"}),e.jsx(o,{align:"center",children:"Actions"})]})}),e.jsx(ne,{children:z.map(s=>e.jsxs(G,{sx:{cursor:"pointer","&:hover":{bgcolor:"action.hover"}},onClick:()=>l.push(`/reservations/${s.id}`),children:[e.jsx(o,{children:e.jsx(r,{variant:"body2",sx:{fontWeight:500,color:"primary.main",cursor:"pointer","&:hover":{textDecoration:"underline"}},onClick:n=>{n.stopPropagation(),l.push(`/reservations/${s.id}`)},children:s.guestName})}),e.jsx(o,{children:e.jsx(r,{variant:"body2",children:new Date(s.checkInDate).toLocaleDateString()})}),e.jsx(o,{children:e.jsx(C,{label:s.status,size:"small",color:H(s.status)})}),e.jsx(o,{children:e.jsx(r,{variant:"body2",children:s.property})}),e.jsx(o,{children:e.jsx(r,{variant:"body2",children:s.nights})}),e.jsx(o,{children:e.jsx(r,{variant:"body2",children:s.guests})}),e.jsx(o,{children:e.jsxs(r,{variant:"body2",sx:{fontWeight:500},children:["â‚¬",s.totalAmount]})}),e.jsx(o,{align:"center",children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(m,{size:"small",onClick:n=>{n.stopPropagation(),l.push(`/reservations/${s.id}/edit`)},sx:{color:"text.secondary","&:hover":{color:"primary.main",bgcolor:"primary.50"}},children:e.jsx(i,{icon:"solar:pen-bold",width:16})}),e.jsx(m,{size:"small",onClick:n=>{n.stopPropagation(),l.push("/inbox")},sx:{color:"text.secondary","&:hover":{color:"primary.main",bgcolor:"primary.50"}},children:e.jsx(i,{icon:"eva:message-circle-fill",width:16})}),e.jsx(m,{size:"small",onClick:n=>{n.stopPropagation(),l.push("/calendar")},sx:{color:"text.secondary","&:hover":{color:"primary.main",bgcolor:"primary.50"}},children:e.jsx(i,{icon:"eva:calendar-fill",width:16})}),e.jsx(m,{size:"small",onClick:n=>$(n,s),sx:{color:"text.secondary","&:hover":{color:"primary.main",bgcolor:"primary.50"}},children:e.jsx(i,{icon:"eva:more-vertical-fill",width:16})})]})})]},s.id))})]})})}),e.jsxs(b,{anchorEl:T,open:!!T,onClose:g,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsx(a,{onClick:O,children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(i,{icon:"solar:share-bold",width:16}),"Open Guest Portal"]})}),e.jsx(a,{onClick:V,children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(i,{icon:"solar:pen-bold",width:16}),"Copy Guest Portal URL"]})})]}),e.jsx(y,{sx:{p:2},children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"Show"}),e.jsxs(F,{select:!0,size:"small",value:p,onChange:s=>L(Number(s.target.value)),sx:{minWidth:80},SelectProps:{native:!0},children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsx(r,{variant:"body2",color:"text.secondary",children:"per page"})]}),e.jsx(oe,{count:q,page:w,onChange:(s,n)=>W(n),color:"primary"})]})})]})}export{je as ReservationsView};
