import{D as oe,r as i,j as e,B as s,I as j,T as a,a as F,x as H,e as r,g as ne,a4 as J}from"./index-DDMGUD-_.js";import{D as ce}from"./content-DAzX26cm.js";import{A as Q}from"./arrow-left-DVLbOZnK.js";import{S as de}from"./save-D0sLAz8V.js";import{C as G}from"./Card-C1fEEBVz.js";import{T as d}from"./TextField-BZcg-6kp.js";import{C as pe}from"./code-DkNNRYSs.js";import{I as q}from"./info-_UHBnIlD.js";import{F as y}from"./FormControl-BRgYzLHi.js";import{S as C}from"./Select-DixiLax7.js";import{C as me}from"./chevron-down-B-CwXX_-.js";import{C as Y}from"./Checkbox-DrgNyHeB.js";import{P as xe}from"./Pagination-Dusx6Zp7.js";import{F as he}from"./FormControlLabel-nlFIIXjS.js";import"./InputLabel-B_w9HMQG.js";import"./Menu-Bm1ShPnp.js";import"./SwitchBase-s8UEUZOy.js";import"./LastPage-K8Xc1QT_.js";const ue=[{id:305034,name:"La Dimora Del Cavaliere",image:"https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/public/assets/images/mock/cover/cover-1.webp",selected:!1},{id:305035,name:"Navigli",image:"https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/public/assets/images/mock/cover/cover-2.webp",selected:!1},{id:305225,name:"Polacchi42",image:"https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/public/assets/images/mock/cover/cover-3.webp",selected:!1},{id:305421,name:"Superattico - Via Del Corso 43",image:"https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/public/assets/images/mock/cover/cover-4.webp",selected:!1},{id:306532,name:"Montecatini Terme",image:"https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/public/assets/images/mock/cover/cover-5.webp",selected:!1},{id:308582,name:"Monteverde - Quattroventi",image:"https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/public/assets/images/mock/cover/cover-6.webp",selected:!1},{id:310867,name:"La Storta",image:"https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/public/assets/images/mock/cover/cover-1.webp",selected:!1},{id:317154,name:"[5 Min From Trastevere] Chic Apt",image:"https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/public/assets/images/mock/cover/cover-2.webp",selected:!1},{id:332386,name:"Via Poggio Tulliano",image:"https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/public/assets/images/mock/cover/cover-3.webp",selected:!1},{id:345603,name:"Via Dei Marruccini | San Lorenzo",image:"https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/public/assets/images/mock/cover/cover-4.webp",selected:!1},{id:363365,name:"Via di Acqua Bullicante 113",image:"https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/public/assets/images/mock/cover/cover-5.webp",selected:!1},{id:363366,name:"Via Matera 23A -",image:"https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/public/assets/images/mock/cover/cover-6.webp",selected:!1}];function ze(){const S=oe(),[m,_]=i.useState(null),[x,T]=i.useState(""),[k,w]=i.useState(""),[h,I]=i.useState("#23c6c8"),[u,W]=i.useState(""),[A,L]=i.useState(""),[p,M]=i.useState(""),[R,$]=i.useState(""),[K,U]=i.useState(""),[b,g]=i.useState(ue),[O,X]=i.useState(!1),[z,D]=i.useState(!1),[P,Z]=i.useState(1),f=12;i.useEffect(()=>{const t=window.location.pathname.split("/"),o=parseInt(t[t.length-1]);_(o);const n=localStorage.getItem("messageTemplates");if(n){const l=JSON.parse(n).find(v=>v.id===o);l&&(T(l.name||""),w(l.description||""),I(l.color||"#23c6c8"),W(l.message||""),L(l.group||""),M(l.channel||""),D(l.autoApply||!1),l.selectedListings&&g(v=>v.map(V=>({...V,selected:l.selectedListings.some(le=>le.id===V.id)}))))}},[]);const B=t=>{g(o=>o.map(n=>n.id===t?{...n,selected:!n.selected}:n))},ee=()=>{X(!O),g(t=>t.map(o=>({...o,selected:!O})))},te=()=>{if(!m)return;const t={id:m,name:x,description:k,color:h,message:u,group:A||"General",channel:p||"All",listings:b.filter(c=>c.selected).length,channels:p?[p]:["Airbnb","Booking.com"],selectedListings:b.filter(c=>c.selected),autoApply:z},n=JSON.parse(localStorage.getItem("messageTemplates")||"[]").map(c=>c.id===m?t:c);localStorage.setItem("messageTemplates",JSON.stringify(n)),S.push("/inbox/templates")},se=()=>{S.push("/inbox/templates")},E=b.filter(t=>t.name.toLowerCase().includes(R.toLowerCase())),N=(P-1)*f,ae=N+f,ie=E.slice(N,ae),re=Math.ceil(E.length/f);return e.jsxs(ce,{maxWidth:"xl",children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(j,{sx:{p:1},onClick:se,children:e.jsx(Q,{size:20})}),e.jsx(a,{variant:"h4",sx:{fontWeight:600},children:"Edit Template"})]}),e.jsx(F,{variant:"contained",startIcon:e.jsx(de,{size:20}),onClick:te,disabled:!x.trim()||!u.trim(),sx:{bgcolor:"#23c6c8","&:hover":{bgcolor:"#1fb3b5"},"&:disabled":{bgcolor:"grey.300"},px:3,py:1.5,borderRadius:2},children:"Save Changes"})]}),e.jsxs(s,{sx:{display:"flex",gap:4},children:[e.jsx(s,{sx:{flex:1,maxWidth:600},children:e.jsxs(G,{sx:{p:3,mb:3},children:[e.jsx(a,{variant:"h6",sx:{mb:3,fontWeight:600},children:"Template Details"}),e.jsxs(s,{sx:{mb:3},children:[e.jsx(a,{variant:"body2",sx:{mb:1,fontWeight:500},children:"Template name *"}),e.jsx(d,{fullWidth:!0,placeholder:"Template name",value:x,onChange:t=>T(t.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})]}),e.jsxs(s,{sx:{mb:3},children:[e.jsx(a,{variant:"body2",sx:{mb:1,fontWeight:500},children:"Template description"}),e.jsx(d,{fullWidth:!0,placeholder:"Template description",value:k,onChange:t=>w(t.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})]}),e.jsxs(s,{sx:{mb:3},children:[e.jsx(a,{variant:"body2",sx:{mb:1,fontWeight:500},children:"Template color:"}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(s,{sx:{width:40,height:40,borderRadius:"50%",bgcolor:h,border:"2px solid #e0e0e0",cursor:"pointer"}}),e.jsx(d,{value:h,onChange:t=>I(t.target.value),sx:{width:120,"& .MuiOutlinedInput-root":{borderRadius:2}}})]})]}),e.jsxs(s,{sx:{mb:3},children:[e.jsx(a,{variant:"body2",sx:{mb:1,fontWeight:500},children:"Message *"}),e.jsxs(s,{sx:{position:"relative"},children:[e.jsx(d,{fullWidth:!0,multiline:!0,rows:6,placeholder:"Message",value:u,onChange:t=>W(t.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(j,{sx:{position:"absolute",top:8,right:8,bgcolor:"grey.100","&:hover":{bgcolor:"grey.200"}},children:e.jsx(pe,{size:16})})]})]}),e.jsxs(s,{sx:{mb:3},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:"Link to group template"}),e.jsx(H,{title:"Link this template to a group template",children:e.jsx(q,{size:16,color:"#666"})})]}),e.jsx(y,{fullWidth:!0,children:e.jsxs(C,{value:A,onChange:t=>L(t.target.value),displayEmpty:!0,sx:{borderRadius:2,"& .MuiOutlinedInput-notchedOutline":{borderColor:"#e0e0e0"}},children:[e.jsx(r,{value:"",children:e.jsx("em",{children:"Link to group template"})}),e.jsx(r,{value:"welcome",children:"Welcome Template"}),e.jsx(r,{value:"checkin",children:"Check-in Template"}),e.jsx(r,{value:"checkout",children:"Check-out Template"})]})})]}),e.jsxs(s,{sx:{mb:3},children:[e.jsx(a,{variant:"body2",sx:{mb:1,fontWeight:500},children:"Channel"}),e.jsx(y,{fullWidth:!0,children:e.jsxs(C,{value:p,onChange:t=>M(t.target.value),displayEmpty:!0,sx:{borderRadius:2,"& .MuiOutlinedInput-notchedOutline":{borderColor:"#e0e0e0"}},children:[e.jsx(r,{value:"",children:e.jsx("em",{children:"Channel"})}),e.jsx(r,{value:"airbnb",children:"Airbnb"}),e.jsx(r,{value:"booking",children:"Booking.com"}),e.jsx(r,{value:"direct",children:"Direct Booking"})]})})]})]})}),e.jsx(s,{sx:{flex:1,maxWidth:600},children:e.jsxs(G,{sx:{p:3},children:[e.jsx(a,{variant:"h6",sx:{mb:3,fontWeight:600},children:"Listings"}),e.jsxs(s,{sx:{display:"flex",gap:2,mb:3},children:[e.jsx(d,{placeholder:"Type to search listings",value:R,onChange:t=>$(t.target.value),sx:{flex:1,"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(y,{sx:{minWidth:150},children:e.jsxs(C,{value:K,onChange:t=>U(t.target.value),displayEmpty:!0,startAdornment:e.jsx(ne,{position:"start",children:e.jsx(me,{size:16})}),sx:{borderRadius:2,"& .MuiOutlinedInput-notchedOutline":{borderColor:"#e0e0e0"}},children:[e.jsx(r,{value:"",children:e.jsx("em",{children:"Select tags"})}),e.jsx(r,{value:"apartment",children:"Apartment"}),e.jsx(r,{value:"house",children:"House"}),e.jsx(r,{value:"villa",children:"Villa"})]})}),e.jsx(F,{variant:"contained",onClick:ee,sx:{bgcolor:"#23c6c8","&:hover":{bgcolor:"#1fb3b5"},borderRadius:2,px:3},children:"Select all"})]}),e.jsx(s,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:2,mb:3,maxHeight:400,overflowY:"auto"},children:ie.map(t=>e.jsxs(J,{sx:{p:2,display:"flex",alignItems:"center",gap:2,cursor:"pointer",border:"1px solid #e0e0e0",borderRadius:2,"&:hover":{borderColor:"#23c6c8",boxShadow:"0 2px 8px rgba(35, 198, 200, 0.1)"}},onClick:()=>B(t.id),children:[e.jsx(s,{sx:{width:60,height:40,borderRadius:1,backgroundImage:`url('${t.image}')`,backgroundSize:"cover",backgroundPosition:"center",flexShrink:0}}),e.jsxs(s,{sx:{flex:1,minWidth:0},children:[e.jsx(a,{variant:"body2",sx:{fontWeight:500,mb:.5},children:t.name}),e.jsx(a,{variant:"caption",color:"text.secondary",children:t.id})]}),e.jsx(Y,{checked:t.selected,onChange:()=>B(t.id),sx:{flexShrink:0}})]},t.id))}),e.jsx(s,{sx:{display:"flex",justifyContent:"center",mb:3},children:e.jsx(xe,{count:re,page:P,onChange:(t,o)=>Z(o),color:"primary",size:"small"})}),e.jsx(he,{control:e.jsx(Y,{checked:z,onChange:t=>D(t.target.checked)}),label:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(a,{variant:"body2",children:"Automatically apply template to new listings"}),e.jsx(H,{title:"This will automatically apply this template to any new listings you add",children:e.jsx(q,{size:16,color:"#666"})})]})})]})})]}),e.jsxs(s,{sx:{position:"fixed",bottom:20,right:20,zIndex:1e3},children:[e.jsxs(J,{sx:{p:2,mb:1,borderRadius:2,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",display:"flex",alignItems:"center",gap:1},children:[e.jsx(a,{variant:"body2",children:"Hi. Need any help?"}),e.jsx(j,{size:"small",children:e.jsx(Q,{size:16})})]}),e.jsxs(s,{sx:{width:50,height:50,bgcolor:"#ff6b35",borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:[e.jsx(a,{variant:"h6",sx:{color:"white",fontWeight:600},children:"3"}),e.jsx(s,{sx:{position:"absolute",top:-5,right:-5,width:20,height:20,bgcolor:"#ff0000",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(a,{variant:"caption",sx:{color:"white",fontSize:"10px"},children:"3"})})]})]})]})}export{ze as TemplateEditView};
