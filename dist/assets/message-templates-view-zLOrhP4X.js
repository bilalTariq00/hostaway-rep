import{D as oe,r,j as e,B as n,T as o,a as i,I as m}from"./index-DlK49mD9.js";import{D as re}from"./content-BncdO-AK.js";import{T as ae,a as h}from"./Tabs-CawWx8bN.js";import{C}from"./Card-C2DhIU3E.js";import{C as A}from"./CardContent-CO_bIGDJ.js";import{P as B}from"./plus-C-Pm_q2r.js";import{T as le,a as ie,b as P,c as a,d as ce}from"./TableHead-BbeVJGli.js";import{S as O}from"./square-pen-ClrXFKJK.js";import{T as R}from"./trash-2-CA6qpQWl.js";import{P as de}from"./Pagination-BTzUsZhy.js";import{D as M,a as E,b as N,c as J}from"./DialogContent-BrwwiAlS.js";import"./KeyboardArrowRight-B0juUeOl.js";import"./LastPage-lp5Gj61X.js";const xe=[{id:1,name:"Welcome Message",group:"Check-in",listings:5,channels:["Airbnb","Booking.com"],color:"#4caf50"},{id:2,name:"Check-out Instructions",group:"Check-out",listings:3,channels:["Airbnb","VRBO"],color:"#ff9800"},{id:3,name:"House Rules Reminder",group:"General",listings:8,channels:["Airbnb","Booking.com","VRBO"],color:"#f44336"},{id:4,name:"WiFi Information",group:"Check-in",listings:6,channels:["Airbnb","Direct"],color:"#2196f3"}],me=[{id:1,name:"Check-in",count:3,listings:3},{id:2,name:"Check-out",count:2,listings:2},{id:3,name:"General",count:5,listings:5},{id:4,name:"Emergency",count:1,listings:1}];function Ge(){const c=oe(),[$,F]=r.useState("message-templates"),[d,v]=r.useState(xe),[x,D]=r.useState(me),[H,p]=r.useState(!1),[k,u]=r.useState(null),[L,g]=r.useState(!1),[G,j]=r.useState(null),[S,q]=r.useState(1),f=5;r.useEffect(()=>{const s=localStorage.getItem("messageTemplates");if(s){const T=JSON.parse(s).sort((l,y)=>y.id-l.id);v(l=>[...T,...l])}const t=localStorage.getItem("templateGroups");if(t){const T=JSON.parse(t).sort((l,y)=>y.id-l.id);D(l=>[...T,...l])}},[]),r.useEffect(()=>{if(d.length>0){const s=d.filter(t=>t.id>1e3);localStorage.setItem("messageTemplates",JSON.stringify(s))}},[d]),r.useEffect(()=>{if(x.length>0){const s=x.filter(t=>t.id>1e3);localStorage.setItem("templateGroups",JSON.stringify(s))}},[x]);const V=(s,t)=>{F(t),t!=="message-templates"&&c.push(`/inbox/${t}`)},K=()=>{c.push("/inbox/template-create")},Q=()=>{c.push("/inbox/template-group-create")},U=s=>{c.push(`/inbox/template-group-edit/${s}`)},X=s=>{j(s),g(!0)},Y=()=>{G&&(D(s=>s.filter(t=>t.id!==G)),g(!1),j(null))},W=()=>{g(!1),j(null)},Z=s=>{c.push(`/inbox/template-edit/${s}`)},_=s=>{u(s),p(!0)},ee=()=>{k&&(v(s=>s.filter(t=>t.id!==k)),p(!1),u(null))},I=()=>{p(!1),u(null)},w=Math.ceil(d.length/f),z=(S-1)*f,se=z+f,te=d.slice(z,se),ne=(s,t)=>{q(t)};return e.jsxs(re,{maxWidth:"xl",children:[e.jsxs(n,{sx:{mb:{xs:3,md:5}},children:[e.jsx(o,{variant:"h4",sx:{fontWeight:600,mb:2},children:"Guest Messaging"}),e.jsxs(ae,{value:$,onChange:V,sx:{mb:3},children:[e.jsx(h,{label:"Inbox",value:""}),e.jsx(h,{label:"Message Templates",value:"message-templates"}),e.jsx(h,{label:"Automations",value:"automations"}),e.jsx(h,{label:"Manage Messages",value:"manage-messages"})]})]}),e.jsx(C,{sx:{mb:4},children:e.jsxs(A,{children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(o,{variant:"h6",sx:{fontWeight:600},children:"Message Templates"}),e.jsx(i,{variant:"contained",startIcon:e.jsx(B,{size:16}),onClick:K,children:"Add New Template"})]}),e.jsxs(le,{children:[e.jsx(ie,{children:e.jsxs(P,{children:[e.jsx(a,{sx:{fontWeight:600},children:"Name"}),e.jsx(a,{sx:{fontWeight:600},children:"Group"}),e.jsx(a,{sx:{fontWeight:600},children:"Number of Listings"}),e.jsx(a,{sx:{fontWeight:600},children:"Channels"}),e.jsx(a,{sx:{fontWeight:600},children:"Actions"})]})}),e.jsx(ce,{children:te.map(s=>e.jsxs(P,{hover:!0,children:[e.jsx(a,{children:e.jsxs(n,{children:[e.jsx(o,{variant:"body2",sx:{fontWeight:500,mb:.5},children:s.name}),s.color&&e.jsx(n,{sx:{display:"inline-block",width:20,height:8,borderRadius:1,bgcolor:s.color,border:"1px solid #e0e0e0"}})]})}),e.jsx(a,{children:e.jsx(n,{sx:{display:"inline-block",px:1.5,py:.5,borderRadius:1,backgroundColor:"primary.50",color:"primary.main",fontSize:"0.75rem",fontWeight:500},children:s.group})}),e.jsx(a,{children:e.jsxs(o,{variant:"body2",children:[s.listings," listings"]})}),e.jsx(a,{children:e.jsx(n,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:s.channels.map((t,b)=>e.jsx(n,{sx:{px:1,py:.25,borderRadius:.5,backgroundColor:"grey.100",fontSize:"0.7rem",color:"text.secondary"},children:t},b))})}),e.jsx(a,{children:e.jsxs(n,{sx:{display:"flex",gap:1},children:[e.jsx(m,{size:"small",color:"primary",onClick:()=>Z(s.id),children:e.jsx(O,{size:16})}),e.jsx(m,{size:"small",color:"error",onClick:()=>_(s.id),children:e.jsx(R,{size:16})})]})})]},s.id))})]}),w>1&&e.jsx(n,{sx:{display:"flex",justifyContent:"center",mt:3},children:e.jsx(de,{count:w,page:S,onChange:ne,color:"primary",size:"small",showFirstButton:!0,showLastButton:!0})})]})}),e.jsx(C,{children:e.jsxs(A,{children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(o,{variant:"h6",sx:{fontWeight:600},children:"Message Template Groups"}),e.jsx(i,{variant:"outlined",startIcon:e.jsx(B,{size:16}),onClick:Q,children:"Add New Group"})]}),e.jsx(n,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:2},children:x.map(s=>e.jsx(C,{variant:"outlined",sx:{p:2},children:e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(n,{children:[e.jsx(o,{variant:"subtitle1",sx:{fontWeight:600,mb:.5},children:s.name}),e.jsxs(o,{variant:"body2",color:"text.secondary",children:[s.count||s.listings||0," templates"]})]}),e.jsxs(n,{sx:{display:"flex",gap:.5},children:[e.jsx(m,{size:"small",color:"primary",onClick:()=>U(s.id),children:e.jsx(O,{size:16})}),e.jsx(m,{size:"small",color:"error",onClick:()=>X(s.id),children:e.jsx(R,{size:16})})]})]})},s.id))})]})}),e.jsxs(M,{open:H,onClose:I,maxWidth:"sm",fullWidth:!0,children:[e.jsx(E,{sx:{pb:1},children:e.jsx(o,{variant:"h6",sx:{fontWeight:600},children:"Delete Template"})}),e.jsxs(N,{children:[e.jsx(o,{variant:"body1",sx:{mb:2},children:"Are you sure you want to delete this template? This action cannot be undone."}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"The template will be permanently removed from your account and cannot be recovered."})]}),e.jsxs(J,{sx:{p:3,pt:1},children:[e.jsx(i,{variant:"outlined",onClick:I,sx:{mr:1},children:"Cancel"}),e.jsx(i,{variant:"contained",color:"error",onClick:ee,sx:{bgcolor:"error.main","&:hover":{bgcolor:"error.dark"}},children:"Delete Template"})]})]}),e.jsxs(M,{open:L,onClose:W,maxWidth:"sm",fullWidth:!0,children:[e.jsx(E,{sx:{pb:1},children:e.jsx(o,{variant:"h6",sx:{fontWeight:600},children:"Delete Template Group"})}),e.jsxs(N,{children:[e.jsx(o,{variant:"body1",sx:{mb:2},children:"Are you sure you want to delete this template group? This action cannot be undone."}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"The template group will be permanently removed from your account and cannot be recovered."})]}),e.jsxs(J,{sx:{p:3,pt:1},children:[e.jsx(i,{variant:"outlined",onClick:W,sx:{mr:1},children:"Cancel"}),e.jsx(i,{variant:"contained",color:"error",onClick:Y,sx:{bgcolor:"error.main","&:hover":{bgcolor:"error.dark"}},children:"Delete Group"})]})]})]})}export{Ge as MessageTemplatesView};
