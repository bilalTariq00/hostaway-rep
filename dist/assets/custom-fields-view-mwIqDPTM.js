import{D as ee,r,j as e,B as l,I as j,d as h,T as a,g as te,a as x,a4 as P,V as se,e as c}from"./index-DDMGUD-_.js";import{D as ne}from"./content-DAzX26cm.js";import{T as w}from"./TextField-BZcg-6kp.js";import{T as ie}from"./TableContainer-Cp4gnwML.js";import{T as le,a as ae,b as W,c as o,d as oe}from"./TableHead-CMCmgIDA.js";import{S as N}from"./Switch-CS1Ni3s3.js";import{P as re}from"./Pagination-Dusx6Zp7.js";import{F as ce}from"./FormControl-BRgYzLHi.js";import{I as de}from"./InputLabel-B_w9HMQG.js";import{S as pe}from"./Select-DixiLax7.js";import{D as he,a as xe,b as ue,c as me}from"./DialogContent-CkHDAA-B.js";import"./SwitchBase-s8UEUZOy.js";import"./LastPage-K8Xc1QT_.js";import"./Menu-Bm1ShPnp.js";const je=[{id:1,name:"Property Type",type:"Dropdown",public:!0,options:["Villa","Apartment","House","Studio"],createdAt:"2024-01-15"},{id:2,name:"Guest Notes",type:"Text Area",public:!1,options:[],createdAt:"2024-01-20"},{id:3,name:"Check-in Time",type:"Time",public:!0,options:[],createdAt:"2024-01-25"},{id:4,name:"Special Requirements",type:"Checkbox",public:!0,options:["Wheelchair Access","Pet Friendly","Smoking Allowed"],createdAt:"2024-02-01"},{id:5,name:"Priority Level",type:"Number",public:!1,options:[],createdAt:"2024-02-05"}];function Oe(){const E=ee(),[k,z]=r.useState(1),[y]=r.useState(50),[R,f]=r.useState(!1),[D,B]=r.useState(""),[u,m]=r.useState([]),[d,g]=r.useState(null),[C,v]=r.useState(!1),[J,F]=r.useState(!1),[i,p]=r.useState({name:"",type:"",public:!1,options:[]}),L=()=>{const t=localStorage.getItem("customFields");return t?JSON.parse(t):je};r.useEffect(()=>{m(L())},[]);const M=()=>{E.push("/tasks/manage-tasks")},V=()=>{v(!1),p({name:"",type:"",public:!1,options:[]}),f(!0)},H=t=>{v(!0),g(t),p({name:t.name,type:t.type,public:t.public,options:[...t.options]}),f(!0)},U=()=>{if(d){const t=u.filter(s=>s.id!==d.id);localStorage.setItem("customFields",JSON.stringify(t)),m(t)}F(!1),g(null)},A=()=>{F(!1),g(null)},b=()=>{f(!1),v(!1),p({name:"",type:"",public:!1,options:[]})},S=(t,s)=>{p(n=>({...n,[t]:s}))},_=()=>{p(t=>({...t,options:[...t.options,""]}))},q=(t,s)=>{p(n=>({...n,options:n.options.map((T,$)=>$===t?s:T)}))},G=t=>{p(s=>({...s,options:s.options.filter((n,T)=>T!==t)}))},K=()=>{if(C&&d){const t=u.map(s=>s.id===d.id?{...s,name:i.name,type:i.type,public:i.public,options:i.options.filter(n=>n.trim()!=="")}:s);localStorage.setItem("customFields",JSON.stringify(t)),m(t)}else{const t={id:Date.now(),name:i.name,type:i.type,public:i.public,options:i.options.filter(n=>n.trim()!==""),createdAt:new Date().toISOString().split("T")[0]},s=[...u,t];localStorage.setItem("customFields",JSON.stringify(s)),m(s)}b()},Q=t=>{const s=u.map(n=>n.id===t?{...n,public:!n.public}:n);localStorage.setItem("customFields",JSON.stringify(s)),m(s)},I=u.filter(t=>t.name.toLowerCase().includes(D.toLowerCase())),X=Math.ceil(I.length/y),O=(k-1)*y,Y=O+y,Z=I.slice(O,Y);return e.jsxs(ne,{maxWidth:"xl",children:[e.jsxs(l,{sx:{mb:3},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(j,{onClick:M,children:e.jsx(h,{icon:"eva:arrow-back-fill"})}),e.jsx(a,{variant:"h4",sx:{fontWeight:600},children:"Custom Fields"})]}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(w,{placeholder:"Search custom fields...",value:D,onChange:t=>B(t.target.value),sx:{width:300},InputProps:{startAdornment:e.jsx(te,{position:"start",children:e.jsx(h,{icon:"eva:search-fill"})})}}),e.jsx(x,{variant:"contained",onClick:V,children:"Add Custom Fields"})]})]}),e.jsx(P,{sx:{mb:3},children:e.jsx(ie,{children:e.jsxs(le,{children:[e.jsx(ae,{children:e.jsxs(W,{children:[e.jsx(o,{children:"Name"}),e.jsx(o,{children:"Type"}),e.jsx(o,{children:"Public"}),e.jsx(o,{children:"Options"}),e.jsx(o,{children:"Created At"}),e.jsx(o,{align:"center",children:"Actions"})]})}),e.jsx(oe,{children:Z.map(t=>e.jsxs(W,{children:[e.jsx(o,{children:e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:t.name})}),e.jsx(o,{children:e.jsx(a,{variant:"body2",children:t.type})}),e.jsx(o,{children:e.jsx(N,{checked:t.public,onChange:()=>Q(t.id),size:"small"})}),e.jsx(o,{children:t.options.length>0?e.jsxs(l,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:[t.options.slice(0,2).map((s,n)=>e.jsx(a,{variant:"caption",sx:{bgcolor:"grey.100",px:1,py:.5,borderRadius:1,fontSize:"0.75rem"},children:s},n)),t.options.length>2&&e.jsxs(a,{variant:"caption",color:"text.secondary",children:["+",t.options.length-2," more"]})]}):e.jsx(a,{variant:"body2",color:"text.secondary",children:"No options"})}),e.jsx(o,{children:e.jsx(a,{variant:"body2",color:"text.secondary",children:t.createdAt})}),e.jsx(o,{align:"center",children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(j,{size:"small",onClick:()=>H(t),children:e.jsx(h,{icon:"eva:edit-fill",width:16})}),e.jsx(j,{size:"small",onClick:()=>{g(t),F(!0)},children:e.jsx(h,{icon:"eva:trash-2-fill",width:16})})]})})]},t.id))})]})})}),e.jsx(P,{sx:{p:2},children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(a,{variant:"body2",color:"text.secondary",children:"Show 50 per page"}),e.jsx(re,{count:X,page:k,onChange:(t,s)=>z(s),color:"primary"})]})}),e.jsxs(se,{anchor:"right",open:R,onClose:b,sx:{"& .MuiDrawer-paper":{width:500,p:3}},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[e.jsx(a,{variant:"h6",sx:{fontWeight:600},children:C?"Edit Custom Field":"Add Custom Field"}),e.jsx(j,{onClick:b,children:e.jsx(h,{icon:"eva:close-fill"})})]}),e.jsxs(l,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(w,{fullWidth:!0,label:"Field Name",placeholder:"Enter field name...",value:i.name,onChange:t=>S("name",t.target.value)}),e.jsxs(ce,{fullWidth:!0,children:[e.jsx(de,{children:"Field Type"}),e.jsxs(pe,{label:"Field Type",value:i.type,onChange:t=>S("type",t.target.value),children:[e.jsx(c,{value:"text",children:"Text"}),e.jsx(c,{value:"textarea",children:"Text Area"}),e.jsx(c,{value:"number",children:"Number"}),e.jsx(c,{value:"dropdown",children:"Dropdown"}),e.jsx(c,{value:"checkbox",children:"Checkbox"}),e.jsx(c,{value:"date",children:"Date"}),e.jsx(c,{value:"time",children:"Time"}),e.jsx(c,{value:"email",children:"Email"}),e.jsx(c,{value:"url",children:"URL"})]})]}),e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(a,{variant:"body2",children:"Public Field"}),e.jsx(N,{checked:i.public,onChange:t=>S("public",t.target.checked)})]}),e.jsxs(l,{children:[e.jsx(a,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:"Options (for dropdown/checkbox)"}),i.options.map((t,s)=>e.jsxs(l,{sx:{display:"flex",gap:1,mb:1},children:[e.jsx(w,{fullWidth:!0,placeholder:"Enter option...",size:"small",value:t,onChange:n=>q(s,n.target.value)}),e.jsx(j,{size:"small",onClick:()=>G(s),sx:{color:"error.main"},children:e.jsx(h,{icon:"eva:close-fill",width:16})})]},s)),e.jsx(x,{variant:"outlined",size:"small",startIcon:e.jsx(h,{icon:"eva:plus-fill"}),onClick:_,children:"Add Option"})]}),e.jsxs(l,{sx:{display:"flex",gap:2,mt:4},children:[e.jsx(x,{fullWidth:!0,variant:"outlined",onClick:b,children:"Cancel"}),e.jsx(x,{fullWidth:!0,variant:"contained",onClick:K,children:C?"Update Field":"Add Field"})]})]})]}),e.jsxs(he,{open:J,onClose:A,children:[e.jsx(xe,{children:"Delete Custom Field?"}),e.jsx(ue,{children:e.jsxs(a,{children:['Are you sure you want to delete "',d==null?void 0:d.name,'"? This action cannot be undone.']})}),e.jsxs(me,{children:[e.jsx(x,{onClick:A,children:"Cancel"}),e.jsx(x,{onClick:U,color:"error",variant:"contained",children:"Delete"})]})]})]})}export{Oe as CustomFieldsView};
