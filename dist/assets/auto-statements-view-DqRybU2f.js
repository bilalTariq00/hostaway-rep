import{D as ye,r as i,j as e,B as n,T as a,a as h,a4 as A,C as M,g as k,I as j,a5 as Ce,e as w,P as Se}from"./index-DlK49mD9.js";import{D as ve}from"./content-BncdO-AK.js";import{T as Ae,a as U}from"./Tabs-CawWx8bN.js";import{F as ke}from"./funnel-CgbT2BEe.js";import{T as x}from"./TextField-DGQVylbQ.js";import{S as Y}from"./search-C7TcvOao.js";import{T as we}from"./TableContainer-1FovwQIv.js";import{T as Te,a as We,b as Z,c as o,d as Ie}from"./TableHead-BbeVJGli.js";import{C as G}from"./Checkbox-Cws__oH0.js";import{S as ze}from"./settings-BgN3WhmC.js";import{S as De}from"./Switch-Bj_iObyt.js";import{P as _}from"./pencil-Cv1S77MX.js";import{P as $}from"./play-DST-Qy0A.js";import{E as Me}from"./ellipsis-vertical-DGip_Yx0.js";import{D as Ge,a as Ne,b as Pe,c as Oe}from"./DialogContent-BrwwiAlS.js";import{I as N}from"./info-LH2MLhPO.js";import{M as qe}from"./Menu-Cd2TK2zY.js";import"./KeyboardArrowRight-B0juUeOl.js";import"./Select-hkki-_gR.js";import"./InputLabel-vBrrCZYs.js";import"./FormControl-DsPW8NaL.js";import"./SwitchBase-D6K1hBX3.js";const Le=[{id:1,autoStatementName:"Monthly Auto Statement",description:"Automated monthly statement generation",frequency:"Monthly",owner:"John Doe",status:"Active",lastGenerated:"2024-01-31",nextGeneration:"2024-02-29",total:12500},{id:2,autoStatementName:"Quarterly Auto Statement",description:"Automated quarterly statement generation",frequency:"Quarterly",owner:"Jane Smith",status:"Active",lastGenerated:"2024-01-31",nextGeneration:"2024-04-30",total:37500},{id:3,autoStatementName:"Weekly Auto Statement",description:"Automated weekly statement generation",frequency:"Weekly",owner:"Mike Johnson",status:"Inactive",lastGenerated:"2024-01-28",nextGeneration:"2024-02-04",total:3200},{id:4,autoStatementName:"Property Auto Statement",description:"Automated property statement generation",frequency:"Monthly",owner:"Sarah Wilson",status:"Active",lastGenerated:"2024-01-31",nextGeneration:"2024-02-29",total:8750}],P=[{key:"autoStatement",label:"Auto-Statement",sortable:!0},{key:"frequency",label:"Frequency",sortable:!0},{key:"owner",label:"Owner",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"lastGenerated",label:"Last Generated",sortable:!0},{key:"nextGeneration",label:"Next Generation",sortable:!0},{key:"total",label:"Total",sortable:!0}];function lt(){const K=ye(),[ee,te]=i.useState(1),[m,O]=i.useState(1),[T]=i.useState(50),[W,se]=i.useState(""),[q,L]=i.useState(Le),[u,f]=i.useState([]),[E,B]=i.useState(null),[F,ne]=i.useState(""),[p,ae]=i.useState(""),[b,R]=i.useState("asc"),[l,re]=i.useState(P.slice(0,7).map(t=>t.key)),[ie,V]=i.useState(!1),[H,J]=i.useState(null),[Ee,Q]=i.useState(null),[c,I]=i.useState({autoStatementName:"",description:"",assignOwner:"",selectWhoCanAccess:""}),oe=(t,s)=>{te(s),s===0&&K.push("/owner-statements/statements")},le=(t,s)=>{J(t.currentTarget),Q(s)},g=()=>{J(null),Q(null)},ce=()=>{I({autoStatementName:"",description:"",assignOwner:"",selectWhoCanAccess:""}),V(!0)},y=()=>{V(!1),I({autoStatementName:"",description:"",assignOwner:"",selectWhoCanAccess:""})},C=(t,s)=>{I(r=>({...r,[t]:s}))},de=()=>{if(c.autoStatementName.trim()){const t={id:Math.max(...q.map(s=>s.id))+1,autoStatementName:c.autoStatementName,description:c.description,frequency:"Monthly",owner:c.assignOwner||"",status:"Active",lastGenerated:new Date().toISOString().split("T")[0],nextGeneration:new Date(Date.now()+2592e6).toISOString().split("T")[0],total:0};L(s=>[...s,t]),y()}},he=t=>{L(s=>s.map(r=>r.id===t?{...r,status:r.status==="Active"?"Inactive":"Active"}:r))},xe=t=>{B(t.currentTarget)},me=()=>{B(null)},ue=t=>{re(s=>s.includes(t)?s.filter(r=>r!==t):[...s,t])},pe=t=>{p===t?R(b==="asc"?"desc":"asc"):(ae(t),R("asc"))},ge=t=>{f(t?z.map(s=>s.id):[])},je=(t,s)=>{f(s?r=>[...r,t]:r=>r.filter(d=>d!==t))},z=q.filter(t=>t.autoStatementName.toLowerCase().includes(W.toLowerCase())||t.owner.toLowerCase().includes(W.toLowerCase())),S=[...z].sort((t,s)=>{if(!p)return 0;const r=t[p],d=s[p];return typeof r=="string"&&typeof d=="string"?b==="asc"?r.localeCompare(d):d.localeCompare(r):typeof r=="number"&&typeof d=="number"?b==="asc"?r-d:d-r:0}),fe=z.reduce((t,s)=>t+s.total,0),be=Math.ceil(S.length/T),D=(m-1)*T,X=D+T,v=S.slice(D,X);return e.jsxs(ve,{maxWidth:"xl",children:[e.jsxs(n,{sx:{mb:3},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(a,{variant:"h4",sx:{fontWeight:600},children:"Owner Statements"}),e.jsx(h,{variant:"contained",onClick:ce,children:"Add Auto-statement"})]}),e.jsxs(Ae,{value:ee,onChange:oe,sx:{borderBottom:1,borderColor:"divider","& .MuiTab-root":{textTransform:"none",fontWeight:500},"& .Mui-selected":{color:"primary.main",fontWeight:600},"& .MuiTabs-indicator":{bgcolor:"primary.main"}},children:[e.jsx(U,{label:"Statements"}),e.jsx(U,{label:"Auto-statements"})]})]}),e.jsx(A,{sx:{p:2,mb:3},children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[e.jsx(h,{variant:"outlined",startIcon:e.jsx(ke,{size:16}),children:"Filters"}),e.jsxs(n,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[e.jsx(M,{label:"2 statuses",onDelete:()=>{}}),e.jsx(a,{variant:"body2",color:"error",sx:{cursor:"pointer"},children:"Reset filters"})]}),e.jsx(x,{size:"small",placeholder:"Search by name...",value:W,onChange:t=>se(t.target.value),InputProps:{startAdornment:e.jsx(k,{position:"start",children:e.jsx(Y,{size:16,color:"#666"})})},sx:{minWidth:250,ml:"auto"}})]})}),e.jsx(A,{sx:{mb:3,overflow:"hidden"},children:e.jsx(we,{sx:{maxHeight:600},children:e.jsxs(Te,{stickyHeader:!0,children:[e.jsx(We,{children:e.jsxs(Z,{children:[e.jsx(o,{padding:"checkbox",children:e.jsx(G,{checked:u.length===v.length&&v.length>0,indeterminate:u.length>0&&u.length<v.length,onChange:t=>ge(t.target.checked)})}),P.map(t=>l.includes(t.key)?e.jsx(o,{onClick:()=>t.sortable&&pe(t.key),sx:{cursor:t.sortable?"pointer":"default",userSelect:"none",fontWeight:600,position:"relative",...t.key==="total"&&{textAlign:"right"}},children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.label,p===t.key&&e.jsx(a,{variant:"caption",sx:{color:"primary.main"},children:b==="asc"?"↑":"↓"})]})},t.key):null),e.jsx(o,{align:"center",sx:{position:"sticky",right:0,bgcolor:"background.paper",borderLeft:"1px solid",borderColor:"divider",minWidth:120,fontWeight:600},children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:["Actions",e.jsx(j,{size:"small",onClick:xe,sx:{ml:1,"&:hover":{bgcolor:"grey.100"}},children:e.jsx(ze,{size:16})})]})})]})}),e.jsx(Ie,{children:v.map(t=>e.jsxs(Z,{hover:!0,sx:{"&:hover":{bgcolor:"grey.50"},...u.includes(t.id)&&{bgcolor:"primary.lighter","&:hover":{bgcolor:"primary.lighter"}}},children:[e.jsx(o,{padding:"checkbox",children:e.jsx(G,{checked:u.includes(t.id),onChange:s=>je(t.id,s.target.checked)})}),l.includes("autoStatement")&&e.jsx(o,{children:e.jsx(a,{variant:"body2",sx:{color:"primary.main",cursor:"pointer",fontWeight:500},children:t.autoStatementName})}),l.includes("frequency")&&e.jsx(o,{children:e.jsx(M,{label:t.frequency,size:"small",color:"info"})}),l.includes("owner")&&e.jsx(o,{children:e.jsx(a,{variant:"body2",children:t.owner})}),l.includes("status")&&e.jsx(o,{children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(De,{checked:t.status==="Active",onChange:()=>he(t.id),size:"small"}),e.jsx(M,{label:t.status,size:"small",color:t.status==="Active"?"success":"default"})]})}),l.includes("lastGenerated")&&e.jsx(o,{children:e.jsx(a,{variant:"body2",children:t.lastGenerated})}),l.includes("nextGeneration")&&e.jsx(o,{children:e.jsx(a,{variant:"body2",children:t.nextGeneration})}),l.includes("total")&&e.jsx(o,{align:"right",children:e.jsxs(a,{variant:"body2",sx:{fontWeight:600},children:["€",t.total.toLocaleString()]})}),e.jsx(o,{align:"center",sx:{position:"sticky",right:0,bgcolor:"background.paper",borderLeft:"1px solid",borderColor:"divider",px:0},children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(j,{size:"small",sx:{"&:hover":{bgcolor:"primary.lighter"}},children:e.jsx(_,{size:16})}),e.jsx(j,{size:"small",sx:{"&:hover":{bgcolor:"primary.lighter"}},children:e.jsx($,{size:16})}),e.jsx(j,{size:"small",onClick:s=>le(s,t),sx:{"&:hover":{bgcolor:"grey.100"}},children:e.jsx(Me,{size:16})})]})})]},t.id))})]})})}),e.jsx(A,{sx:{p:2,mb:2},children:e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(a,{variant:"h6",sx:{fontWeight:600},children:"Total"}),e.jsxs(a,{variant:"h6",sx:{fontWeight:600,color:"primary.main"},children:["€",fe.toLocaleString()]})]})}),e.jsx(A,{sx:{p:2},children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(a,{variant:"body2",color:"text.secondary",children:"Show 50 per page"}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsxs(a,{variant:"body2",color:"text.secondary",children:[D+1,"-",Math.min(X,S.length)," of"," ",S.length]}),e.jsxs(n,{sx:{display:"flex",gap:.5},children:[e.jsx(h,{size:"small",disabled:m===1,onClick:()=>O(m-1),children:"Previous"}),e.jsx(h,{size:"small",disabled:m===be,onClick:()=>O(m+1),children:"Next"})]})]})]})}),e.jsxs(Ge,{open:ie,onClose:y,maxWidth:"sm",fullWidth:!0,children:[e.jsx(Ne,{children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(a,{variant:"h6",sx:{fontWeight:600},children:"New auto-statement"}),e.jsx(j,{onClick:y,children:e.jsx(Ce,{size:20})})]})}),e.jsx(Pe,{children:e.jsxs(n,{sx:{display:"flex",flexDirection:"column",gap:3,mt:2},children:[e.jsxs(n,{children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(a,{variant:"body2",children:"Auto-statement name *"}),e.jsx(N,{size:16,color:"#666"})]}),e.jsx(x,{fullWidth:!0,placeholder:"Enter auto-statement name...",value:c.autoStatementName,onChange:t=>C("autoStatementName",t.target.value),required:!0})]}),e.jsx(x,{fullWidth:!0,label:"Description",placeholder:"Enter description...",multiline:!0,rows:3,value:c.description,onChange:t=>C("description",t.target.value)}),e.jsxs(n,{children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(a,{variant:"body2",children:"Assign owner"}),e.jsx(N,{size:16,color:"#666"})]}),e.jsx(x,{fullWidth:!0,placeholder:"Select owner...",value:c.assignOwner,onChange:t=>C("assignOwner",t.target.value),InputProps:{endAdornment:e.jsx(k,{position:"end",children:e.jsx(a,{variant:"body2",children:"▼"})})}})]}),e.jsxs(n,{children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(a,{variant:"body2",children:"Select who can access statements created from this auto-statement"}),e.jsx(N,{size:16,color:"#666"})]}),e.jsx(x,{fullWidth:!0,placeholder:"Team | Domus",value:c.selectWhoCanAccess,onChange:t=>C("selectWhoCanAccess",t.target.value),InputProps:{endAdornment:e.jsx(k,{position:"end",children:e.jsx(a,{variant:"body2",children:"▼"})})}})]})]})}),e.jsxs(Oe,{children:[e.jsx(h,{onClick:y,children:"Cancel"}),e.jsx(h,{variant:"contained",onClick:de,children:"Create"})]})]}),e.jsxs(qe,{anchorEl:H,open:!!H,onClose:g,children:[e.jsxs(w,{onClick:g,children:[e.jsx(_,{size:16,style:{marginRight:8}}),"Edit"]}),e.jsx(w,{onClick:g,children:"Duplicate"}),e.jsxs(w,{onClick:g,children:[e.jsx($,{size:16,style:{marginRight:8}}),"Run Now"]}),e.jsx(w,{onClick:g,sx:{color:"error.main"},children:"Delete"})]}),e.jsx(Se,{open:!!E,anchorEl:E,onClose:me,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:e.jsxs(n,{sx:{p:2,minWidth:200},children:[e.jsx(a,{variant:"subtitle2",sx:{mb:2,fontWeight:600},children:"Column Settings"}),e.jsx(x,{size:"small",placeholder:"Search columns...",value:F,onChange:t=>ne(t.target.value),InputProps:{startAdornment:e.jsx(k,{position:"start",children:e.jsx(Y,{size:16})})},sx:{width:"100%",mb:2}}),e.jsx(n,{sx:{display:"flex",flexDirection:"column",gap:1},children:P.filter(t=>t.label.toLowerCase().includes(F.toLowerCase())).map(t=>e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(G,{checked:l.includes(t.key),onChange:()=>ue(t.key),size:"small"}),e.jsx(a,{variant:"body2",children:t.label})]},t.key))})]})})]})}export{lt as AutoStatementsView};
