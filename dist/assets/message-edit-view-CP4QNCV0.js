import{D as ne,r as n,j as e,B as s,I as r,T as a,a as i,a5 as A,e as P,g as B,x as ie}from"./index-DlK49mD9.js";import{D as le}from"./content-BncdO-AK.js";import{A as oe}from"./arrow-left-oo0y3C6Y.js";import{S as re}from"./send-DaTpFara.js";import{S as ce}from"./save-CQZiseXE.js";import{P as de}from"./pause-BXg5v9Yi.js";import{C as F}from"./Card-C2DhIU3E.js";import{F as he}from"./FormControlLabel-DYCM3_AA.js";import{S as xe}from"./Switch-Bj_iObyt.js";import{T as d}from"./TextField-DGQVylbQ.js";import{F as L}from"./FormControl-DsPW8NaL.js";import{I as N}from"./InputLabel-vBrrCZYs.js";import{S as R}from"./Select-hkki-_gR.js";import{C as ue}from"./calendar-CbJ8GKpQ.js";import{C as me}from"./clock-CN5hGvjT.js";import{I as pe}from"./info-LH2MLhPO.js";import{D as p,a as g,b as j,c as f}from"./DialogContent-BrwwiAlS.js";import"./SwitchBase-D6K1hBX3.js";import"./Menu-Cd2TK2zY.js";const ge={1:{id:1,title:"GENERICO - chiavi al sicuro",subject:"Keys safely stored!",message:`Dear {{guest_first_name}},

Just a friendly reminder to leave the keys safely in the place where you found them at the end of your stay. This is essential for us to manage the keys effectively.

If you found the keys in the lockbox, please remember to return them after use.

There's no need to reset the code — just place the keys back inside and scramble the combination to lock it securely.

Additionally, we kindly ask that you turn off all lights and air conditioners before your departure.

Check-out is at 10:00; any delays may result in additional charges.

Thank you for your cooperation, and I hope you had a wonderful stay. ❤️

Best regards.`,ccEmail1:"host@example.com",ccEmail2:"manager@example.com",scheduledDate:"2025-10-08",scheduledTime:"10:00",guest:{name:"Lynda Leclerc",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=40&h=40&fit=crop&crop=face"},checkIn:"05 Oct",checkOut:"08 Oct",listing:"Elegant Roman Escape • Wa...",channel:"Airbnb",scheduledBy:"08 Oct 2025, 10:00 am",status:"Scheduled"},2:{id:2,title:"Welcome Message",subject:"Welcome to your stay!",message:`Dear {{guest_first_name}},

Welcome to your stay! We hope you have a wonderful time.

Please find the check-in instructions below:
- Check-in time: 3:00 PM
- Check-out time: 11:00 AM
- Keys are in the lockbox

If you need anything, please don't hesitate to contact us.

Best regards.`,ccEmail1:"welcome@example.com",ccEmail2:"",scheduledDate:"2024-12-19",scheduledTime:"14:00",guest:{name:"Sarah Johnson",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=40&h=40&fit=crop&crop=face"},checkIn:"20 Dec",checkOut:"25 Dec",listing:"Beach House Villa",channel:"Booking.com",scheduledBy:"19 Dec 2024, 2:00 PM",status:"Scheduled"}};function Be(){const c=ne(),[J,_]=n.useState(null),[l,y]=n.useState(null),[k,w]=n.useState(""),[D,I]=n.useState(""),[W,M]=n.useState(""),[z,O]=n.useState(""),[b,v]=n.useState(""),[C,T]=n.useState(""),[K,$]=n.useState(!0),[V,h]=n.useState(!1),[G,x]=n.useState(!1),[H,u]=n.useState(!1),[U,m]=n.useState(!1);n.useEffect(()=>{const t=window.location.pathname.split("/"),S=parseInt(t[t.length-1]);_(S);const o=ge[S];o?(y(o),w(o.subject),I(o.message),M(o.ccEmail1||""),O(o.ccEmail2||""),v(o.scheduledDate||""),T(o.scheduledTime||"")):c.push("/inbox/manage")},[c]);const X=()=>{c.push("/inbox/manage")},q=()=>{h(!0)},Q=()=>{x(!0)},Y=()=>{u(!0)},Z=()=>{m(!0)},ee=()=>{y(t=>({...t,status:"Sent"})),h(!1),setTimeout(()=>{c.push("/inbox/manage")},1e3)},se=()=>{const t={...l,subject:k,message:D,ccEmail1:W,ccEmail2:z,scheduledDate:b,scheduledTime:C,schedule:`${b} ${C}`},o=JSON.parse(localStorage.getItem("manageMessages")||"[]").map(E=>E.id===J?t:E);localStorage.setItem("manageMessages",JSON.stringify(o)),x(!1),c.push("/inbox/manage")},ae=()=>{y(t=>({...t,status:"Paused"})),u(!1)},te=()=>{m(!1),c.push("/inbox/manage")};return l?e.jsxs(le,{maxWidth:"xl",children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(r,{onClick:X,sx:{p:1},children:e.jsx(oe,{size:20})}),e.jsx(a,{variant:"h4",children:l.title})]}),e.jsxs(s,{sx:{display:"flex",gap:2},children:[e.jsx(i,{variant:"contained",startIcon:e.jsx(re,{size:20}),onClick:q,sx:{bgcolor:"#23c6c8","&:hover":{bgcolor:"#1fb3b5"}},children:"Send now"}),e.jsx(i,{variant:"outlined",startIcon:e.jsx(ce,{size:20}),onClick:Q,sx:{borderColor:"#e0e0e0",color:"#666"},children:"Save"}),e.jsx(i,{variant:"outlined",startIcon:e.jsx(de,{size:20}),onClick:Y,sx:{borderColor:"#e0e0e0",color:"#666"},children:"Pause"}),e.jsx(i,{variant:"outlined",startIcon:e.jsx(A,{size:20}),onClick:Z,sx:{borderColor:"#f44336",color:"#f44336"},children:"Cancel"})]})]}),e.jsxs(s,{sx:{display:"flex",gap:3,flexDirection:{xs:"column",lg:"row"}},children:[e.jsx(s,{sx:{flex:2,minWidth:0},children:e.jsxs(F,{sx:{p:3,mb:3},children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(a,{variant:"h6",children:"Content"}),e.jsx(he,{control:e.jsx(xe,{checked:K,onChange:t=>$(t.target.checked),color:"primary"}),label:"Override manual changes if reservation updates"})]}),e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(s,{children:[e.jsx(a,{variant:"body2",sx:{mb:1,fontWeight:500},children:"Subject *"}),e.jsxs(s,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(d,{value:k,onChange:t=>w(t.target.value),fullWidth:!0,variant:"outlined",size:"small"}),e.jsx(r,{size:"small",sx:{border:"1px solid #e0e0e0"},children:e.jsx(a,{variant:"body2",sx:{fontFamily:"monospace"}})})]}),e.jsxs(L,{size:"small",sx:{mt:1,minWidth:200},children:[e.jsx(N,{children:"Subject preview"}),e.jsx(R,{label:"Subject preview",children:e.jsx(P,{value:"preview",children:"Subject preview"})})]})]}),e.jsxs(s,{children:[e.jsx(a,{variant:"body2",sx:{mb:1,fontWeight:500},children:"Message *"}),e.jsxs(s,{sx:{display:"flex",gap:1,alignItems:"flex-start"},children:[e.jsx(d,{value:D,onChange:t=>I(t.target.value),fullWidth:!0,multiline:!0,rows:12,variant:"outlined",size:"small"}),e.jsx(r,{size:"small",sx:{border:"1px solid #e0e0e0",mt:1},children:e.jsx(a,{variant:"body2",sx:{fontFamily:"monospace"}})})]}),e.jsxs(L,{size:"small",sx:{mt:1,minWidth:200},children:[e.jsx(N,{children:"Message preview"}),e.jsx(R,{label:"Message preview",children:e.jsx(P,{value:"preview",children:"Message preview"})})]})]}),e.jsxs(s,{children:[e.jsx(a,{variant:"h6",sx:{mb:2},children:"Add any address you wish to include as a CC for outgoing messages"}),e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(d,{label:"CC email 1 (Optional)",placeholder:"CC email 1",value:W,onChange:t=>M(t.target.value),fullWidth:!0,variant:"outlined",size:"small"}),e.jsx(d,{label:"CC email 2 (Optional)",placeholder:"CC email 2",value:z,onChange:t=>O(t.target.value),fullWidth:!0,variant:"outlined",size:"small"})]})]}),e.jsxs(s,{children:[e.jsx(a,{variant:"h6",sx:{mb:2},children:"Scheduled by"}),e.jsxs(s,{sx:{display:"flex",gap:2},children:[e.jsxs(s,{sx:{flex:1},children:[e.jsx(a,{variant:"body2",sx:{mb:1,fontWeight:500},children:"Date *"}),e.jsx(d,{type:"date",value:b,onChange:t=>v(t.target.value),fullWidth:!0,variant:"outlined",size:"small",InputProps:{endAdornment:e.jsx(B,{position:"end",children:e.jsxs(s,{sx:{display:"flex",gap:.5},children:[e.jsx(r,{size:"small",onClick:()=>v(""),children:e.jsx(A,{size:16})}),e.jsx(r,{size:"small",children:e.jsx(ue,{size:16})})]})})}})]}),e.jsxs(s,{sx:{flex:1},children:[e.jsx(a,{variant:"body2",sx:{mb:1,fontWeight:500},children:"Time *"}),e.jsx(d,{type:"time",value:C,onChange:t=>T(t.target.value),fullWidth:!0,variant:"outlined",size:"small",InputProps:{endAdornment:e.jsx(B,{position:"end",children:e.jsx(r,{size:"small",children:e.jsx(me,{size:16})})})}})]})]})]}),e.jsxs(s,{children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(a,{variant:"h6",children:"Attachments (up to 10 files)"}),e.jsx(ie,{title:"Upload files to attach to your message",children:e.jsx(r,{size:"small",children:e.jsx(pe,{size:16})})})]}),e.jsxs(s,{sx:{display:"flex",gap:2},children:[e.jsxs(s,{sx:{flex:1,border:"2px dashed #e0e0e0",borderRadius:2,p:3,textAlign:"center",cursor:"pointer","&:hover":{borderColor:"#23c6c8",bgcolor:"#f0f9ff"}},children:[e.jsx(a,{variant:"body2",color:"text.secondary",children:"Drop files to upload or"}),e.jsx(a,{variant:"body2",color:"primary",sx:{textDecoration:"underline",cursor:"pointer"},children:"Browse"})]}),e.jsx(s,{sx:{display:"flex",alignItems:"center"},children:e.jsx(a,{variant:"body2",color:"text.secondary",children:"No attached files"})})]})]})]})]})}),e.jsx(s,{sx:{flex:1,minWidth:300},children:e.jsxs(F,{sx:{p:3},children:[e.jsx(a,{variant:"h6",sx:{mb:3},children:"Reservation info"}),e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(s,{sx:{width:40,height:40,borderRadius:"50%",backgroundImage:`url('${l.guest.avatar}')`,backgroundSize:"cover",backgroundPosition:"center",flexShrink:0}}),e.jsx(s,{children:e.jsx(a,{variant:"body2",sx:{fontWeight:500},children:l.guest.name})})]}),e.jsxs(s,{children:[e.jsx(a,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"Check-in / Check-out"}),e.jsxs(a,{variant:"body2",children:[l.checkIn," / ",l.checkOut]})]}),e.jsxs(s,{children:[e.jsx(a,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"Listing"}),e.jsx(a,{variant:"body2",children:l.listing})]}),e.jsxs(s,{children:[e.jsx(a,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"Channel"}),e.jsx(a,{variant:"body2",children:l.channel})]}),e.jsxs(s,{children:[e.jsx(a,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"Scheduled by"}),e.jsx(a,{variant:"body2",children:l.scheduledBy})]})]})]})})]}),e.jsxs(p,{open:V,onClose:()=>h(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(g,{children:"Send Message Now"}),e.jsx(j,{children:e.jsx(a,{children:"Are you sure you want to send this message now? This message will be sent immediately instead of at the scheduled time."})}),e.jsxs(f,{children:[e.jsx(i,{onClick:()=>h(!1),color:"inherit",children:"Cancel"}),e.jsx(i,{onClick:ee,color:"primary",variant:"contained",children:"Send Now"})]})]}),e.jsxs(p,{open:G,onClose:()=>x(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(g,{children:"Save Changes"}),e.jsx(j,{children:e.jsx(a,{children:"Are you sure you want to save the changes to this message?"})}),e.jsxs(f,{children:[e.jsx(i,{onClick:()=>x(!1),color:"inherit",children:"Cancel"}),e.jsx(i,{onClick:se,color:"primary",variant:"contained",children:"Save"})]})]}),e.jsxs(p,{open:H,onClose:()=>u(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(g,{children:"Pause Message"}),e.jsx(j,{children:e.jsx(a,{children:"Are you sure you want to pause this message? The message will not be sent at the scheduled time."})}),e.jsxs(f,{children:[e.jsx(i,{onClick:()=>u(!1),color:"inherit",children:"Cancel"}),e.jsx(i,{onClick:ae,color:"warning",variant:"contained",children:"Pause"})]})]}),e.jsxs(p,{open:U,onClose:()=>m(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(g,{children:"Cancel Message"}),e.jsx(j,{children:e.jsx(a,{children:"Are you sure you want to cancel this message? This action cannot be undone."})}),e.jsxs(f,{children:[e.jsx(i,{onClick:()=>m(!1),color:"inherit",children:"Keep Message"}),e.jsx(i,{onClick:te,color:"error",variant:"contained",children:"Cancel Message"})]})]})]}):e.jsx("div",{children:"Loading..."})}export{Be as MessageEditView};
