import{c as Z,af as X,bk as ee,bn as de,r as J,j as e,B as n,T as a,a as Y,O as x,a7 as te,A as N,C as b,a1 as se,u as he,I as pe}from"./index-DlK49mD9.js";import{D as re}from"./content-BncdO-AK.js";import{u as $,C as L}from"./use-chart-X_AI3Ehl.js";import{R as me}from"./quality-indicator-BWkWEjpv.js";import{G as m}from"./Grid-CFPLP85A.js";import{C as h}from"./Card-C2DhIU3E.js";import{C as p}from"./CardContent-CO_bIGDJ.js";import{M as ae}from"./message-square-CRINAJPU.js";import{T as ie}from"./trending-up-Dyf_uQEU.js";import{T as ne}from"./target-BG0xf5Rt.js";import{C as oe}from"./clock-CN5hGvjT.js";import{U as K}from"./users-4d2Tl7H_.js";import{C as S}from"./CardHeader-Gq3jQEdX.js";import{T as P}from"./TableContainer-1FovwQIv.js";import{T as G,a as U,b as W,c as o,d as B}from"./TableHead-BbeVJGli.js";import{C as ge}from"./chart-no-axes-column-increasing-DgF2wTIn.js";import{C as ye}from"./calendar-CbJ8GKpQ.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],le=Z("activity",fe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],je=Z("award",ue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ce=Z("zap",be);function ve({worker:i,onBack:q}){const r=X(),{recentMessages:A,getAllWorkersPerformance:E}=ee(),{properties:M,guests:I,reservations:w}=he(),k=[{id:1,name:"Sunset Beach Villa",city:"Miami",country:"USA",type:"Villa",status:"Active"},{id:2,name:"Downtown Luxury Apartment",city:"New York",country:"USA",type:"Apartment",status:"Active"},{id:3,name:"Mountain View Cabin",city:"Aspen",country:"USA",type:"Cabin",status:"Active"},{id:4,name:"Oceanfront Condo",city:"San Diego",country:"USA",type:"Condo",status:"Active"},{id:5,name:"Urban Loft",city:"San Francisco",country:"USA",type:"Loft",status:"Active"}],O=[{id:1,firstName:"John",lastName:"Smith",email:"john.smith@example.com",phone:"+1-555-0123",country:"USA"},{id:2,firstName:"Sarah",lastName:"Johnson",email:"sarah.j@example.com",phone:"+1-555-0456",country:"Canada"},{id:3,firstName:"Michael",lastName:"Brown",email:"m.brown@example.com",phone:"+1-555-0789",country:"USA"},{id:4,firstName:"Emma",lastName:"Davis",email:"emma.davis@example.com",phone:"+1-555-0321",country:"UK"},{id:5,firstName:"David",lastName:"Wilson",email:"d.wilson@example.com",phone:"+1-555-0654",country:"Australia"}],D=M.length>0?M:k,z=I.length>0?I:O,c=A.filter(t=>t.workerId===i.workerId),v=c.reduce((t,l)=>(t[l.conversationId]||(t[l.conversationId]=[]),t[l.conversationId].push(l),t),{});Object.entries(v).map(([t,l])=>({conversationId:t,messages:l,lastMessage:l[0],totalMessages:l.length})).sort((t,l)=>l.lastMessage.sentAt.getTime()-t.lastMessage.sentAt.getTime());const f=E(),R=i.role==="manager"?f.filter(t=>t.role==="supervisor"||t.role==="associate"):i.role==="supervisor"?f.filter(t=>t.role==="associate"):[],_=t=>{const l=new Date;return l.setDate(l.getDate()-t),l},C=Array.from({length:7},(t,l)=>{const j=_(6-l),s=c.filter(g=>new Date(g.sentAt).toDateString()===j.toDateString()),d=s.length>0?Math.round(s.reduce((g,y)=>g+y.qualityMetrics.overallScore,0)/s.length):0,T=s.length>0?Math.round(s.reduce((g,y)=>g+y.responseTimeMs,0)/s.length/(1e3*60)):0;return{date:j.toLocaleDateString("en-US",{month:"short",day:"numeric"}),messages:s.length,avgQuality:d,avgResponseTime:T}});$({colors:[r.palette.primary.main,r.palette.warning.main,r.palette.success.main],xaxis:{categories:C.map(t=>t.date),labels:{style:{fontSize:"12px",fontWeight:600}}},yaxis:[{title:{text:"Quality Score (%)",style:{fontSize:"12px",fontWeight:600}},min:0,max:100},{opposite:!0,title:{text:"Messages / Response Time (min)",style:{fontSize:"12px",fontWeight:600}}}],legend:{show:!0,position:"top",horizontalAlign:"right",fontSize:"14px",fontWeight:500},tooltip:{shared:!0,intersect:!1},stroke:{width:[3,2,2],curve:"smooth"},markers:{size:5}});const F=c.length>0?Math.round(c.reduce((t,l)=>t+l.qualityMetrics.responseTimeScore,0)/c.length):0,V=c.length>0?Math.round(c.reduce((t,l)=>t+l.qualityMetrics.sentimentScore,0)/c.length):0,H=c.length>0?Math.round(c.reduce((t,l)=>t+l.qualityMetrics.completenessScore,0)/c.length):0,u=c.length>0?Math.round(c.reduce((t,l)=>t+l.qualityMetrics.grammarScore,0)/c.length):0,Q=c.length>0?Math.round(c.reduce((t,l)=>t+l.qualityMetrics.templateComplianceScore,0)/c.length):0;return C.reduce((t,l)=>t+l.messages,0)/7,C.reduce((t,l)=>l.messages>t.messages?l:t,C[0]),e.jsxs(re,{maxWidth:"xl",children:[e.jsx(n,{sx:{mb:4},children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[e.jsx(pe,{onClick:q,sx:{mr:1,backgroundColor:x(r.palette.grey[500],.1),"&:hover":{backgroundColor:x(r.palette.grey[500],.2)}},children:"â†"}),e.jsx(N,{sx:{width:56,height:56,bgcolor:r.palette.primary.main,fontSize:"1.25rem",fontWeight:700},children:i.workerName.charAt(0)}),e.jsxs(n,{children:[e.jsx(a,{variant:"h4",sx:{fontWeight:600,color:"text.primary"},children:i.workerName}),e.jsxs(a,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:[i.role.charAt(0).toUpperCase()+i.role.slice(1)," â€¢ Last active: ",i.lastActive.toLocaleDateString()]})]})]})}),e.jsxs(m,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(m,{size:{xs:12,sm:6,md:3},children:e.jsx(h,{sx:{borderRadius:2,overflow:"hidden",height:"100%"},children:e.jsxs(p,{sx:{p:3},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(a,{variant:"body2",color:"text.secondary",sx:{fontWeight:500},children:"Quality Score"}),e.jsx(n,{sx:{p:1,bgcolor:x(r.palette.success.main,.1),borderRadius:1},children:e.jsx(ne,{size:20,color:r.palette.success.main})})]}),e.jsxs(a,{variant:"h3",sx:{fontWeight:700,color:"success.main",mb:1},children:[Math.round(i.averageQualityScore),"%"]}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(te,{size:16,color:r.palette.success.main}),e.jsx(a,{variant:"caption",color:"success.main",sx:{fontWeight:600},children:i.averageQualityScore>=80?"Excellent":i.averageQualityScore>=60?"Good":"Needs Improvement"})]})]})})}),e.jsx(m,{size:{xs:12,sm:6,md:3},children:e.jsx(h,{sx:{borderRadius:2,overflow:"hidden",height:"100%"},children:e.jsxs(p,{sx:{p:3},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(a,{variant:"body2",color:"text.secondary",sx:{fontWeight:500},children:"Avg Response Time"}),e.jsx(n,{sx:{p:1,bgcolor:x(r.palette.warning.main,.1),borderRadius:1},children:e.jsx(oe,{size:20,color:r.palette.warning.main})})]}),e.jsxs(a,{variant:"h3",sx:{fontWeight:700,color:"warning.main",mb:1},children:[Math.round(i.averageResponseTime/(1e3*60)),"m"]}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ce,{size:16,color:r.palette.warning.main}),e.jsx(a,{variant:"caption",color:"warning.main",sx:{fontWeight:600},children:i.averageResponseTime<6e5?"Fast":i.averageResponseTime<18e5?"Good":"Slow"})]})]})})}),e.jsx(m,{size:{xs:12,sm:6,md:3},children:e.jsx(h,{sx:{borderRadius:2,overflow:"hidden",height:"100%"},children:e.jsxs(p,{sx:{p:3},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(a,{variant:"body2",color:"text.secondary",sx:{fontWeight:500},children:"Total Messages"}),e.jsx(n,{sx:{p:1,bgcolor:x(r.palette.info.main,.1),borderRadius:1},children:e.jsx(ae,{size:20,color:r.palette.info.main})})]}),e.jsx(a,{variant:"h3",sx:{fontWeight:700,color:"info.main",mb:1},children:i.totalMessages}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(le,{size:16,color:r.palette.info.main}),e.jsx(a,{variant:"caption",color:"info.main",sx:{fontWeight:600},children:"Active Worker"})]})]})})}),e.jsx(m,{size:{xs:12,sm:6,md:3},children:e.jsx(h,{sx:{borderRadius:2,overflow:"hidden",height:"100%"},children:e.jsxs(p,{sx:{p:3},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(a,{variant:"body2",color:"text.secondary",sx:{fontWeight:500},children:"Quality Rate"}),e.jsx(n,{sx:{p:1,bgcolor:x(r.palette.primary.main,.1),borderRadius:1},children:e.jsx(je,{size:20,color:r.palette.primary.main})})]}),e.jsxs(a,{variant:"h3",sx:{fontWeight:700,color:"primary.main",mb:1},children:[Math.round((i.excellentResponses+i.goodResponses)/i.totalMessages*100),"%"]}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ie,{size:16,color:r.palette.primary.main}),e.jsxs(a,{variant:"caption",color:"primary.main",sx:{fontWeight:600},children:[i.excellentResponses+i.goodResponses," quality messages"]})]})]})})})]}),e.jsxs(h,{sx:{mb:3,borderRadius:2,overflow:"hidden"},children:[e.jsx(S,{title:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ge,{size:20,color:r.palette.primary.main}),e.jsx(a,{variant:"h6",sx:{fontWeight:600},children:"Performance Breakdown"})]}),subheader:"Detailed quality metrics across different categories"}),e.jsxs(p,{sx:{p:3},children:[e.jsx(L,{type:"bar",series:[{name:"Performance Score (%)",type:"column",data:[{x:"Response Time",y:F,fillColor:r.palette.primary.main},{x:"Sentiment",y:V,fillColor:r.palette.success.main},{x:"Completeness",y:H,fillColor:r.palette.info.main},{x:"Grammar",y:u,fillColor:r.palette.warning.main},{x:"Template",y:Q,fillColor:r.palette.secondary.main}]},{name:"Target (80%)",type:"line",data:[{x:"Response Time",y:80},{x:"Sentiment",y:80},{x:"Completeness",y:80},{x:"Grammar",y:80},{x:"Template",y:80}]}],options:{colors:[r.palette.primary.main,r.palette.success.main,r.palette.info.main,r.palette.warning.main,r.palette.secondary.main,r.palette.grey[400]],xaxis:{categories:["Response Time","Sentiment","Completeness","Grammar","Template"],labels:{style:{fontSize:"13px",fontWeight:600},rotate:-15}},yaxis:{title:{text:"Performance Score (%)",style:{fontSize:"13px",fontWeight:600}},min:0,max:100,tickAmount:5,labels:{style:{fontSize:"12px",fontWeight:500},formatter:t=>`${t}%`}},legend:{show:!0,position:"top",horizontalAlign:"right",fontSize:"13px",fontWeight:600,labels:{colors:[r.palette.text.primary]},markers:{size:12,strokeWidth:2}},tooltip:{shared:!0,intersect:!1,style:{fontSize:"12px"},y:{formatter:t=>`${t}%`},custom:({series:t,seriesIndex:l,dataPointIndex:j,w:s})=>{const T=["Response Time","Sentiment","Completeness","Grammar","Template Compliance"][j],g=t[0][j],y=t[1][j];return`
                    <div style="padding: 8px; background: white; border-radius: 6px;">
                      <div style="font-weight: 600; margin-bottom: 4px; font-size: 13px;">${T}</div>
                      <div style="display: flex; justify-content: space-between; margin-top: 4px;">
                        <span style="color: ${r.palette.text.secondary};">Actual:</span>
                        <span style="font-weight: 600;">${g}%</span>
                      </div>
                      <div style="display: flex; justify-content: space-between; margin-top: 2px;">
                        <span style="color: ${r.palette.text.secondary};">Target:</span>
                        <span style="font-weight: 600;">${y}%</span>
                      </div>
                      <div style="margin-top: 4px; padding-top: 4px; border-top: 1px solid #eee; font-size: 11px; color: ${r.palette.text.secondary};">
                        ${g>=y?"âœ“ Meeting target":"âš  Below target"}
                      </div>
                    </div>
                  `}},plotOptions:{bar:{horizontal:!1,columnWidth:"60%",borderRadius:6,borderRadiusApplication:"end",colors:{ranges:[{from:0,to:100,color:r.palette.primary.main}]}}},stroke:{curve:"smooth",width:2,dashArray:5},fill:{type:"solid",opacity:[.85,1]},dataLabels:{enabled:!0,offsetY:-20,style:{fontSize:"11px",fontWeight:700,colors:[r.palette.text.primary]},formatter:(t,l)=>l.seriesIndex===0?`${t}%`:"",background:{enabled:!1},dropShadow:{enabled:!0,top:1,left:1,blur:1,opacity:.35}},grid:{strokeDashArray:3,borderColor:x(r.palette.divider,.8),xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}}},chart:{toolbar:{show:!1}}},sx:{height:450}}),e.jsxs(n,{sx:{mt:3,p:2,bgcolor:x(r.palette.info.main,.05),borderRadius:2,border:`1px solid ${x(r.palette.info.main,.2)}`},children:[e.jsx(a,{variant:"subtitle2",sx:{fontWeight:600,mb:1,color:"info.main"},children:"ðŸ“Š Chart Explanation"}),e.jsxs(a,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[e.jsx("strong",{children:"Bar Chart:"})," Shows your actual performance scores across 5 key quality metrics"]}),e.jsxs(a,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[e.jsx("strong",{children:"Dashed Line:"})," The 80% target to aim for in all categories"]}),e.jsxs(a,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Colors:"})," Each metric has its own color - Response Time (Blue), Sentiment (Green), Completeness (Teal), Grammar (Orange), Template (Purple)"]})]})]})]}),i.role==="associate"&&e.jsxs(e.Fragment,{children:[e.jsxs(h,{sx:{borderRadius:2,overflow:"hidden",mb:4},children:[e.jsx(S,{title:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ye,{size:20,color:r.palette.primary.main}),e.jsx(a,{variant:"h6",sx:{fontWeight:600},children:"Assigned Properties"})]}),subheader:`${D.length} properties available to manage`}),e.jsx(p,{sx:{p:0},children:e.jsx(P,{children:e.jsxs(G,{children:[e.jsx(U,{children:e.jsxs(W,{sx:{backgroundColor:x(r.palette.grey[500],.04)},children:[e.jsx(o,{sx:{fontWeight:600,color:"text.primary",py:2},children:"Property"}),e.jsx(o,{sx:{fontWeight:600,color:"text.primary",py:2},children:"Location"}),e.jsx(o,{sx:{fontWeight:600,color:"text.primary",py:2},children:"Type"}),e.jsx(o,{sx:{fontWeight:600,color:"text.primary",py:2},children:"Status"})]})}),e.jsx(B,{children:D.slice(0,10).map(t=>e.jsxs(W,{hover:!0,sx:{"&:nth-of-type(even)":{backgroundColor:x(r.palette.grey[500],.02)}},children:[e.jsx(o,{children:e.jsx(a,{variant:"subtitle2",sx:{fontWeight:600},children:t.name})}),e.jsx(o,{children:e.jsxs(a,{variant:"body2",color:"text.secondary",children:[t.city,", ",t.country]})}),e.jsx(o,{children:e.jsx(b,{label:t.type||"Apartment",size:"small",sx:{fontWeight:600}})}),e.jsx(o,{children:e.jsx(b,{label:t.status||"Active",size:"small",color:t.status==="Active"?"success":"default",sx:{fontWeight:600}})})]},t.id))})]})})})]}),e.jsxs(h,{sx:{borderRadius:2,overflow:"hidden",mb:4},children:[e.jsx(S,{title:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(K,{size:20,color:r.palette.primary.main}),e.jsx(a,{variant:"h6",sx:{fontWeight:600},children:"Recent Clients"})]}),subheader:`${z.length} guests in the system`}),e.jsx(p,{sx:{p:0},children:e.jsx(P,{children:e.jsxs(G,{children:[e.jsx(U,{children:e.jsxs(W,{sx:{backgroundColor:x(r.palette.grey[500],.04)},children:[e.jsx(o,{sx:{fontWeight:600,color:"text.primary",py:2},children:"Guest"}),e.jsx(o,{sx:{fontWeight:600,color:"text.primary",py:2},children:"Email"}),e.jsx(o,{sx:{fontWeight:600,color:"text.primary",py:2},children:"Phone"}),e.jsx(o,{sx:{fontWeight:600,color:"text.primary",py:2},children:"Country"}),e.jsx(o,{sx:{fontWeight:600,color:"text.primary",py:2},children:"Reservations"})]})}),e.jsx(B,{children:z.slice(0,10).map(t=>{const l=w.length>0?w.filter(j=>j.guestEmail===t.email):Array(Math.floor(Math.random()*5)+1);return e.jsxs(W,{hover:!0,sx:{"&:nth-of-type(even)":{backgroundColor:x(r.palette.grey[500],.02)}},children:[e.jsx(o,{children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(N,{sx:{width:36,height:36,bgcolor:r.palette.primary.main,fontWeight:600,fontSize:"0.9rem"},children:t.firstName.charAt(0)}),e.jsxs(a,{variant:"subtitle2",sx:{fontWeight:600},children:[t.firstName," ",t.lastName]})]})}),e.jsx(o,{children:e.jsx(a,{variant:"body2",color:"text.secondary",children:t.email})}),e.jsx(o,{children:e.jsx(a,{variant:"body2",color:"text.secondary",children:t.phone||"N/A"})}),e.jsx(o,{children:e.jsx(b,{label:t.country,size:"small",sx:{fontWeight:600}})}),e.jsx(o,{children:e.jsx(b,{label:l.length,size:"small",color:"primary",sx:{fontWeight:600}})})]},t.id)})})]})})})]})]}),R.length>0&&e.jsxs(h,{sx:{borderRadius:2,overflow:"hidden",mb:4},children:[e.jsx(S,{title:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(K,{size:20,color:r.palette.primary.main}),e.jsxs(a,{variant:"h6",sx:{fontWeight:600},children:["Team Members (",R.length,")"]})]}),subheader:`${i.role.charAt(0).toUpperCase()+i.role.slice(1)} oversees ${R.length} team member${R.length!==1?"s":""}`}),e.jsx(p,{sx:{p:0},children:e.jsx(P,{children:e.jsxs(G,{children:[e.jsx(U,{children:e.jsxs(W,{sx:{backgroundColor:x(r.palette.grey[500],.04)},children:[e.jsx(o,{sx:{fontWeight:600,color:"text.primary",py:2},children:"Team Member"}),e.jsx(o,{sx:{fontWeight:600,color:"text.primary",py:2},children:"Role"}),e.jsx(o,{sx:{fontWeight:600,color:"text.primary",py:2},children:"Messages"}),e.jsx(o,{sx:{fontWeight:600,color:"text.primary",py:2},children:"Quality Score"}),e.jsx(o,{sx:{fontWeight:600,color:"text.primary",py:2},children:"Response Time"})]})}),e.jsx(B,{children:R.map(t=>e.jsxs(W,{hover:!0,sx:{"&:nth-of-type(even)":{backgroundColor:x(r.palette.grey[500],.02)}},children:[e.jsx(o,{children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(N,{sx:{width:40,height:40,bgcolor:r.palette.primary.main,fontWeight:600},children:t.workerName.charAt(0)}),e.jsxs(n,{children:[e.jsx(a,{variant:"subtitle2",sx:{fontWeight:600},children:t.workerName}),e.jsxs(a,{variant:"caption",color:"text.secondary",children:["Last active: ",t.lastActive.toLocaleDateString()]})]})]})}),e.jsx(o,{children:e.jsx(b,{label:t.role.charAt(0).toUpperCase()+t.role.slice(1),size:"small",color:t.role==="supervisor"?"secondary":"primary",sx:{fontWeight:600}})}),e.jsx(o,{children:e.jsx(a,{variant:"body2",sx:{fontWeight:600},children:t.totalMessages})}),e.jsx(o,{children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(se,{variant:"determinate",value:t.averageQualityScore,sx:{width:60,height:6,borderRadius:3,bgcolor:x(r.palette.grey[300],.3),"& .MuiLinearProgress-bar":{bgcolor:t.averageQualityScore>=80?r.palette.success.main:t.averageQualityScore>=60?r.palette.warning.main:r.palette.error.main}}}),e.jsxs(a,{variant:"body2",sx:{fontWeight:600,minWidth:35},children:[Math.round(t.averageQualityScore),"%"]})]})}),e.jsx(o,{children:e.jsxs(a,{variant:"body2",sx:{fontWeight:600},children:[Math.round(t.averageResponseTime/(1e3*60)),"m"]})})]},t.workerId))})]})})})]})]})}function Ge(){const i=X(),{getAllWorkersPerformance:q,getRolePerformance:r,performanceStats:A}=ee(),{getWorkerRatings:E}=de(),[M,I]=J.useState("all"),[w,k]=J.useState(null),[O,D]=J.useState("monthly"),z=q(),c=r("associate"),v=r("supervisor"),f=r("manager"),_=(()=>{switch(M){case"associate":return c;case"supervisor":return v;case"manager":return f;default:return z}})(),C=z.length,F=Math.round(A.averageResponseTime/(1e3*60)),V=Math.round(A.averageQualityScore),H=A.totalMessages,u=z.reduce((s,d)=>(s.excellent+=d.excellentResponses,s.good+=d.goodResponses,s.average+=d.averageResponses,s.poor+=d.poorResponses,s),{excellent:0,good:0,average:0,poor:0}),Q=u.excellent+u.good+u.average+u.poor,t=$({colors:["#4caf50","#8bc34a","#ff9800","#f44336"],labels:["Excellent","Good","Average","Poor"],legend:{show:!0,position:"bottom",horizontalAlign:"center",fontSize:"14px",fontWeight:500,markers:{size:12},itemMargin:{horizontal:12,vertical:8}},plotOptions:{pie:{donut:{size:"70%",labels:{show:!0,total:{show:!0,label:"Total Responses",fontSize:"16px",fontWeight:600,color:i.palette.text.primary,formatter:()=>Q.toLocaleString()},value:{show:!0,fontSize:"24px",fontWeight:700,color:i.palette.text.primary,formatter:s=>s}}}}},tooltip:{y:{formatter:(s,{seriesIndex:d})=>{const T=["Excellent","Good","Average","Poor"],g=Math.round(s/Q*100);return`${T[d]}: ${s} (${g}%)`}}},dataLabels:{enabled:!1}}),l=$({colors:[i.palette.primary.main,i.palette.warning.main],xaxis:{categories:["Associates","Supervisors","Managers"],labels:{style:{fontSize:"14px",fontWeight:600}}},yaxis:[{title:{text:"Quality Score (%)",style:{fontSize:"12px",fontWeight:600}},min:0,max:100},{opposite:!0,title:{text:"Response Time (min)",style:{fontSize:"12px",fontWeight:600}}}],legend:{show:!0,position:"top",horizontalAlign:"right",fontSize:"14px",fontWeight:500},tooltip:{shared:!0,intersect:!1,y:[{formatter:s=>`${s}%`,title:{formatter:()=>"Quality Score: "}},{formatter:s=>`${s} min`,title:{formatter:()=>"Response Time: "}}]},plotOptions:{bar:{horizontal:!1,columnWidth:"60%",borderRadius:4}},dataLabels:{enabled:!1}}),j=$({colors:[i.palette.primary.main,i.palette.error.main],xaxis:{categories:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],labels:{style:{fontSize:"14px",fontWeight:600}}},yaxis:{title:{text:"Response Time (minutes)",style:{fontSize:"12px",fontWeight:600}},min:0,max:30},legend:{show:!0,position:"top",horizontalAlign:"right",fontSize:"14px",fontWeight:500},tooltip:{y:{formatter:s=>`${s} min`}},stroke:{width:3,curve:"smooth"},markers:{size:6,strokeWidth:2,hover:{size:8}},grid:{strokeDashArray:3,borderColor:i.palette.divider}});return w?e.jsx(ve,{worker:w,onBack:()=>k(null)}):e.jsxs(re,{maxWidth:"xl",children:[e.jsx(n,{sx:{mb:4},children:e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(n,{children:[e.jsx(a,{variant:"h4",sx:{fontWeight:600,color:"text.primary",mb:1},children:"Performance Analytics"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Monitor team performance and message quality metrics"})]}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(a,{variant:"body2",color:"text.secondary",children:"Timeframe:"}),e.jsx(n,{sx:{display:"flex",gap:1},children:["daily","weekly","monthly"].map(s=>e.jsx(Y,{variant:O===s?"contained":"outlined",size:"small",onClick:()=>D(s),sx:{textTransform:"capitalize",fontWeight:600,minWidth:80},children:s},s))})]})]})}),e.jsxs(m,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(m,{size:{xs:12,sm:6,md:3},children:e.jsx(h,{sx:{borderRadius:2,overflow:"hidden",height:"100%"},children:e.jsxs(p,{sx:{p:3},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(a,{variant:"body2",color:"text.secondary",sx:{fontWeight:500},children:"Total Messages"}),e.jsx(n,{sx:{p:1,bgcolor:x(i.palette.primary.main,.1),borderRadius:1},children:e.jsx(ae,{size:20,color:i.palette.primary.main})})]}),e.jsx(a,{variant:"h3",sx:{fontWeight:700,color:"text.primary",mb:1},children:H.toLocaleString()}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ie,{size:16,color:i.palette.success.main}),e.jsx(a,{variant:"caption",color:"success.main",sx:{fontWeight:600},children:"+12% from last month"})]})]})})}),e.jsx(m,{size:{xs:12,sm:6,md:3},children:e.jsx(h,{sx:{borderRadius:2,overflow:"hidden",height:"100%"},children:e.jsxs(p,{sx:{p:3},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(a,{variant:"body2",color:"text.secondary",sx:{fontWeight:500},children:"Avg Quality Score"}),e.jsx(n,{sx:{p:1,bgcolor:x(i.palette.success.main,.1),borderRadius:1},children:e.jsx(ne,{size:20,color:i.palette.success.main})})]}),e.jsxs(a,{variant:"h3",sx:{fontWeight:700,color:"success.main",mb:1},children:[V,"%"]}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(te,{size:16,color:i.palette.success.main}),e.jsx(a,{variant:"caption",color:"success.main",sx:{fontWeight:600},children:"Excellent performance"})]})]})})}),e.jsx(m,{size:{xs:12,sm:6,md:3},children:e.jsx(h,{sx:{borderRadius:2,overflow:"hidden",height:"100%"},children:e.jsxs(p,{sx:{p:3},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(a,{variant:"body2",color:"text.secondary",sx:{fontWeight:500},children:"Avg Response Time"}),e.jsx(n,{sx:{p:1,bgcolor:x(i.palette.warning.main,.1),borderRadius:1},children:e.jsx(oe,{size:20,color:i.palette.warning.main})})]}),e.jsxs(a,{variant:"h3",sx:{fontWeight:700,color:"warning.main",mb:1},children:[F,"m"]}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ce,{size:16,color:i.palette.warning.main}),e.jsx(a,{variant:"caption",color:"warning.main",sx:{fontWeight:600},children:"Fast response time"})]})]})})}),e.jsx(m,{size:{xs:12,sm:6,md:3},children:e.jsx(h,{sx:{borderRadius:2,overflow:"hidden",height:"100%"},children:e.jsxs(p,{sx:{p:3},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(a,{variant:"body2",color:"text.secondary",sx:{fontWeight:500},children:"Active Workers"}),e.jsx(n,{sx:{p:1,bgcolor:x(i.palette.info.main,.1),borderRadius:1},children:e.jsx(K,{size:20,color:i.palette.info.main})})]}),e.jsx(a,{variant:"h3",sx:{fontWeight:700,color:"info.main",mb:1},children:C}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(le,{size:16,color:i.palette.info.main}),e.jsx(a,{variant:"caption",color:"info.main",sx:{fontWeight:600},children:"All systems active"})]})]})})})]}),e.jsxs(m,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(m,{size:{xs:12,md:6},children:e.jsxs(h,{sx:{borderRadius:2,overflow:"hidden",height:"100%"},children:[e.jsx(S,{title:e.jsx(a,{variant:"h6",sx:{fontWeight:600},children:"Message Quality Distribution"}),subheader:"Quality breakdown by response type"}),e.jsx(p,{sx:{p:3},children:e.jsx(L,{type:"donut",series:[u.excellent,u.good,u.average,u.poor],options:t,sx:{height:400}})})]})}),e.jsx(m,{size:{xs:12,md:6},children:e.jsxs(h,{sx:{borderRadius:2,overflow:"hidden",height:"100%"},children:[e.jsx(S,{title:e.jsx(a,{variant:"h6",sx:{fontWeight:600},children:"Role Performance Overview"}),subheader:"Performance metrics by team role"}),e.jsx(p,{sx:{p:3},children:e.jsx(L,{type:"bar",series:[{name:"Average Quality Score",data:[c.length>0?Math.round(c.reduce((s,d)=>s+d.averageQualityScore,0)/c.length):0,v.length>0?Math.round(v.reduce((s,d)=>s+d.averageQualityScore,0)/v.length):0,f.length>0?Math.round(f.reduce((s,d)=>s+d.averageQualityScore,0)/f.length):0]},{name:"Average Response Time (min)",data:[c.length>0?Math.round(c.reduce((s,d)=>s+d.averageResponseTime,0)/c.length/(1e3*60)):0,v.length>0?Math.round(v.reduce((s,d)=>s+d.averageResponseTime,0)/v.length/(1e3*60)):0,f.length>0?Math.round(f.reduce((s,d)=>s+d.averageResponseTime,0)/f.length/(1e3*60)):0]}],options:l,sx:{height:400}})})]})})]}),e.jsx(m,{container:!0,spacing:3,sx:{mb:4},children:e.jsx(m,{size:{xs:12},children:e.jsxs(h,{sx:{borderRadius:2,overflow:"hidden"},children:[e.jsx(S,{title:e.jsx(a,{variant:"h6",sx:{fontWeight:600},children:"Response Time Trends"}),subheader:"Daily response time performance over the last 7 days"}),e.jsx(p,{sx:{p:3},children:e.jsx(L,{type:"line",series:[{name:"Average Response Time (min)",data:[12,15,18,14,16,13,11]},{name:"Target Response Time (min)",data:[15,15,15,15,15,15,15]}],options:j,sx:{height:350}})})]})})}),e.jsxs(h,{sx:{borderRadius:2,overflow:"hidden"},children:[e.jsx(S,{title:e.jsx(a,{variant:"h6",sx:{fontWeight:600},children:"Worker Performance Details"}),action:e.jsx(n,{sx:{display:"flex",gap:1},children:[{key:"all",label:"All Workers"},{key:"associate",label:"Associates"},{key:"supervisor",label:"Supervisors"},{key:"manager",label:"Managers"}].map(s=>e.jsx(Y,{variant:M===s.key?"contained":"outlined",size:"small",onClick:()=>I(s.key),sx:{fontWeight:600,textTransform:"none",minWidth:100},children:s.label},s.key))})}),e.jsx(p,{sx:{p:0},children:e.jsx(P,{children:e.jsxs(G,{children:[e.jsx(U,{children:e.jsxs(W,{sx:{backgroundColor:x(i.palette.grey[500],.04)},children:[e.jsx(o,{sx:{fontWeight:600,color:"text.primary",py:2},children:"Worker"}),e.jsx(o,{sx:{fontWeight:600,color:"text.primary",py:2},children:"Role"}),e.jsx(o,{sx:{fontWeight:600,color:"text.primary",py:2},children:"Quality Score"}),e.jsx(o,{sx:{fontWeight:600,color:"text.primary",py:2},children:"Response Time"}),e.jsx(o,{sx:{fontWeight:600,color:"text.primary",py:2},children:"Messages"}),e.jsx(o,{sx:{fontWeight:600,color:"text.primary",py:2},children:"Manager Rating"}),e.jsx(o,{sx:{fontWeight:600,color:"text.primary",py:2},children:"Quality Breakdown"}),e.jsx(o,{sx:{fontWeight:600,color:"text.primary",py:2},children:"Actions"})]})}),e.jsx(B,{children:_.map((s,d)=>e.jsxs(W,{hover:!0,sx:{"&:nth-of-type(even)":{backgroundColor:x(i.palette.grey[500],.02)},"&:hover":{backgroundColor:x(i.palette.primary.main,.04)}},children:[e.jsx(o,{sx:{py:2},children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(N,{sx:{width:40,height:40,bgcolor:i.palette.primary.main,fontWeight:600,fontSize:"1rem"},children:s.workerName.charAt(0)}),e.jsxs(n,{children:[e.jsx(a,{variant:"subtitle2",sx:{fontWeight:600},children:s.workerName}),e.jsxs(a,{variant:"caption",color:"text.secondary",children:["Last active: ",s.lastActive.toLocaleDateString()]})]})]})}),e.jsx(o,{sx:{py:2},children:e.jsx(b,{label:s.role.charAt(0).toUpperCase()+s.role.slice(1),size:"small",color:s.role==="manager"?"success":s.role==="supervisor"?"secondary":"primary",sx:{fontWeight:600}})}),e.jsx(o,{sx:{py:2},children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(n,{sx:{width:80},children:e.jsx(se,{variant:"determinate",value:s.averageQualityScore,sx:{height:8,borderRadius:4,backgroundColor:x(i.palette.grey[300],.3),"& .MuiLinearProgress-bar":{backgroundColor:s.averageQualityScore>=80?i.palette.success.main:s.averageQualityScore>=60?i.palette.warning.main:i.palette.error.main}}})}),e.jsxs(a,{variant:"body2",sx:{fontWeight:600,minWidth:40},children:[Math.round(s.averageQualityScore),"%"]})]})}),e.jsx(o,{sx:{py:2},children:e.jsx(me,{responseTimeMs:s.averageResponseTime,size:"small"})}),e.jsx(o,{sx:{py:2},children:e.jsx(a,{variant:"body2",sx:{fontWeight:600},children:s.totalMessages})}),e.jsx(o,{sx:{py:2},children:(()=>{const g=E(s.workerId).sort((y,xe)=>xe.timestamp.getTime()-y.timestamp.getTime())[0];return g?e.jsxs(n,{children:[e.jsx(n,{sx:{display:"flex",gap:.5,mb:.5},children:[1,2,3,4,5].map(y=>e.jsx(n,{sx:{fontSize:"0.875rem",color:g.rating>=y?i.palette.warning.main:i.palette.grey[300]},children:"â˜…"},y))}),e.jsxs(a,{variant:"caption",color:"text.secondary",children:["by ",g.ratedByName]})]}):e.jsx(a,{variant:"body2",color:"text.secondary",children:"No rating"})})()}),e.jsx(o,{sx:{py:2},children:e.jsxs(n,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:[e.jsx(b,{label:s.excellentResponses,size:"small",sx:{bgcolor:"#4caf50",color:"white",fontSize:"0.7rem",height:24,fontWeight:600}}),e.jsx(b,{label:s.goodResponses,size:"small",sx:{bgcolor:"#8bc34a",color:"white",fontSize:"0.7rem",height:24,fontWeight:600}}),e.jsx(b,{label:s.averageResponses,size:"small",sx:{bgcolor:"#ff9800",color:"white",fontSize:"0.7rem",height:24,fontWeight:600}}),e.jsx(b,{label:s.poorResponses,size:"small",sx:{bgcolor:"#f44336",color:"white",fontSize:"0.7rem",height:24,fontWeight:600}})]})}),e.jsx(o,{sx:{py:2},children:e.jsx(Y,{variant:"outlined",size:"small",onClick:()=>k(s),sx:{fontWeight:600,textTransform:"none","&:hover":{backgroundColor:x(i.palette.primary.main,.1),borderColor:i.palette.primary.main}},children:"View Details"})})]},s.workerId))})]})})})]})]})}export{Ge as SuperAdminAnalyticsPage};
