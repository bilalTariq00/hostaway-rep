import{D as K,r as a,j as e,B as n,T as o,a as l,a4 as y,g as Q,I as T,a5 as E,V}from"./index-DlK49mD9.js";import{D as Y}from"./content-BncdO-AK.js";import{T as Z,a as m}from"./Tabs-CawWx8bN.js";import{T as I}from"./TextField-DGQVylbQ.js";import{S as _}from"./search-C7TcvOao.js";import{T as $}from"./TableContainer-1FovwQIv.js";import{T as ee,a as se,b as W,c as p,d as te}from"./TableHead-BbeVJGli.js";import{P as ae}from"./pencil-Cv1S77MX.js";import{P as ne}from"./Pagination-BTzUsZhy.js";import{D as re,a as ie,b as oe,c as le}from"./DialogContent-BrwwiAlS.js";import"./KeyboardArrowRight-B0juUeOl.js";import"./Select-hkki-_gR.js";import"./Menu-Cd2TK2zY.js";import"./InputLabel-vBrrCZYs.js";import"./FormControl-DsPW8NaL.js";import"./LastPage-lp5Gj61X.js";const ce=[{id:1,name:"Pulizia Aggiuntiva"},{id:2,name:"TV"}];function ke(){const g=K(),[z,B]=a.useState(2),[v,M]=a.useState(1),[u]=a.useState(25),[D,O]=a.useState(""),[R,c]=a.useState(!1),[S,j]=a.useState(ce),[d,x]=a.useState(null),[L,C]=a.useState(!1),[r,f]=a.useState(null),[h,i]=a.useState(""),N=(s,t)=>{B(t),t===0&&g.push("/expenses-extras/expenses"),t===1&&g.push("/expenses-extras/extras"),t===3&&g.push("/expenses-extras/automations")},q=()=>{x(null),i(""),c(!0)},k=s=>{x(s),i(s.name),c(!0)},F=()=>{if(h.trim()){if(d)j(s=>s.map(t=>t.id===d.id?{...t,name:h.trim()}:t));else{const s={id:Math.max(...S.map(t=>t.id))+1,name:h.trim()};j(t=>[...t,s])}c(!1),x(null),i("")}},b=()=>{c(!1),x(null),i("")},H=s=>{f(s),C(!0)},U=()=>{r&&j(s=>s.filter(t=>t.id!==r.id)),C(!1),f(null)},P=()=>{C(!1),f(null)},w=S.filter(s=>s.name.toLowerCase().includes(D.toLowerCase())),X=Math.ceil(w.length/u),A=(v-1)*u,G=A+u,J=w.slice(A,G);return e.jsxs(Y,{maxWidth:"xl",children:[e.jsxs(n,{sx:{mb:3},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(o,{variant:"h4",sx:{fontWeight:600},children:"Expenses and Extras"}),e.jsx(l,{variant:"contained",onClick:q,children:"Add Category"})]}),e.jsxs(Z,{value:z,onChange:N,sx:{borderBottom:1,borderColor:"divider","& .MuiTab-root":{textTransform:"none",fontWeight:500},"& .Mui-selected":{color:"primary.main",fontWeight:600},"& .MuiTabs-indicator":{bgcolor:"primary.main"}},children:[e.jsx(m,{label:"Expenses"}),e.jsx(m,{label:"Extras"}),e.jsx(m,{label:"Categories"}),e.jsx(m,{label:"Automations"})]})]}),e.jsx(y,{sx:{p:2,mb:3},children:e.jsx(I,{size:"small",placeholder:"Search by name...",value:D,onChange:s=>O(s.target.value),InputProps:{startAdornment:e.jsx(Q,{position:"start",children:e.jsx(_,{size:16,color:"#666"})})},sx:{minWidth:250}})}),e.jsx(y,{sx:{mb:3},children:e.jsx($,{children:e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(W,{children:[e.jsx(p,{children:"Category name"}),e.jsx(p,{align:"center"})]})}),e.jsx(te,{children:J.map(s=>e.jsxs(W,{children:[e.jsx(p,{children:e.jsx(o,{variant:"body2",sx:{fontWeight:500,color:"primary.main",cursor:"pointer","&:hover":{textDecoration:"underline"}},onClick:()=>k(s),children:s.name})}),e.jsx(p,{align:"right",children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(T,{size:"small",onClick:()=>k(s),sx:{"&:hover":{bgcolor:"primary.lighter"}},children:e.jsx(ae,{size:16})}),e.jsx(T,{size:"small",onClick:()=>H(s),sx:{"&:hover":{bgcolor:"error.lighter"}},children:e.jsx(E,{size:16,color:"#ef4444"})})]})})]},s.id))})]})})}),e.jsx(y,{sx:{p:2},children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(o,{variant:"body2",color:"text.secondary",children:"Show 25 per page"}),e.jsx(ne,{count:X,page:v,onChange:(s,t)=>M(t),color:"primary"})]})}),e.jsxs(V,{anchor:"right",open:R,onClose:b,sx:{"& .MuiDrawer-paper":{width:400,p:3}},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[e.jsx(o,{variant:"h6",sx:{fontWeight:600},children:d?"Edit category":"Add new category"}),e.jsx(T,{onClick:b,children:e.jsx(E,{size:20})})]}),e.jsxs(n,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsx(I,{fullWidth:!0,label:"Category name *",placeholder:"Enter category name...",value:h,onChange:s=>i(s.target.value),required:!0}),e.jsxs(n,{sx:{display:"flex",gap:2,mt:4},children:[e.jsx(l,{fullWidth:!0,variant:"outlined",onClick:b,children:"Cancel"}),e.jsx(l,{fullWidth:!0,variant:"contained",onClick:F,sx:{bgcolor:"primary.main","&:hover":{bgcolor:"primary.dark"}},children:d?"Update":"Create"})]})]})]}),e.jsxs(re,{open:L,onClose:P,children:[e.jsx(ie,{children:"Delete Category"}),e.jsx(oe,{children:e.jsxs(o,{children:['Are you sure you want to delete "',r==null?void 0:r.name,'"? This action cannot be undone.']})}),e.jsxs(le,{children:[e.jsx(l,{onClick:P,children:"Cancel"}),e.jsx(l,{onClick:U,color:"error",variant:"contained",children:"Delete"})]})]})]})}export{ke as CategoriesView};
