import{r as h,j as e,B as m,T as l,a as v,g as se,a4 as ae,C as ne,I as A}from"./index-DlK49mD9.js";import{D as re}from"./content-BncdO-AK.js";import{P as oe}from"./plus-C-Pm_q2r.js";import{T as p}from"./TextField-DGQVylbQ.js";import{S as le}from"./search-C7TcvOao.js";import{C as ie}from"./Card-C2DhIU3E.js";import{T as de}from"./TableContainer-1FovwQIv.js";import{T as ce,a as he,b as E,c as d,d as ue}from"./TableHead-BbeVJGli.js";import{C as N}from"./Checkbox-Cws__oH0.js";import{E as xe}from"./eye-CNWiU7qj.js";import{S as me}from"./square-pen-ClrXFKJK.js";import{T as pe}from"./trash-2-CA6qpQWl.js";import{F as ge}from"./FormControlLabel-DYCM3_AA.js";import{a as fe}from"./TablePagination-DMzL_IVa.js";import{D as T,b as k,a as je,c as Ce}from"./DialogContent-BrwwiAlS.js";import"./Select-hkki-_gR.js";import"./Menu-Cd2TK2zY.js";import"./InputLabel-vBrrCZYs.js";import"./FormControl-DsPW8NaL.js";import"./SwitchBase-D6K1hBX3.js";import"./KeyboardArrowRight-B0juUeOl.js";import"./LastPage-lp5Gj61X.js";function L({client:s,viewMode:i=!1,onClose:j,onSave:C}){const[c,P]=h.useState({name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",company:(s==null?void 0:s.company)||"",address:(s==null?void 0:s.address)||"",city:(s==null?void 0:s.city)||"",state:(s==null?void 0:s.state)||"",country:(s==null?void 0:s.country)||"United States",zipCode:(s==null?void 0:s.zipCode)||"",status:(s==null?void 0:s.status)||"active"}),[w,g]=h.useState(""),x=(a,u)=>{P(D=>({...D,[a]:u})),g("")},S=()=>c.name.trim()?c.email.trim()?c.email.includes("@")?!0:(g("Please enter a valid email address"),!1):(g("Email is required"),!1):(g("Client name is required"),!1),I=a=>{a.preventDefault(),S()&&C(c)};return e.jsxs(m,{component:"form",onSubmit:I,sx:{p:3},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:s?i?"View Client":"Edit Client":"Create New Client"}),w&&e.jsx(m,{sx:{mb:2,p:2,bgcolor:"error.light",borderRadius:1},children:e.jsx(l,{variant:"body2",color:"error.contrastText",children:w})}),e.jsxs(m,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gap:2,mb:3},children:[e.jsx(p,{fullWidth:!0,disabled:i,label:"Client Name",value:c.name,onChange:a=>x("name",a.target.value),required:!0}),e.jsx(p,{fullWidth:!0,disabled:i,label:"Email",type:"email",value:c.email,onChange:a=>x("email",a.target.value),required:!0}),e.jsx(p,{fullWidth:!0,disabled:i,label:"Phone",value:c.phone,onChange:a=>x("phone",a.target.value)}),e.jsx(p,{fullWidth:!0,disabled:i,label:"Company",value:c.company,onChange:a=>x("company",a.target.value)})]}),e.jsxs(m,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gap:2,mb:3},children:[e.jsx(p,{fullWidth:!0,disabled:i,label:"Address",value:c.address,onChange:a=>x("address",a.target.value)}),e.jsx(p,{fullWidth:!0,disabled:i,label:"City",value:c.city,onChange:a=>x("city",a.target.value)}),e.jsx(p,{fullWidth:!0,disabled:i,label:"State",value:c.state,onChange:a=>x("state",a.target.value)}),e.jsx(p,{fullWidth:!0,disabled:i,label:"Country",value:c.country,onChange:a=>x("country",a.target.value)}),e.jsx(p,{fullWidth:!0,disabled:i,label:"Zip Code",value:c.zipCode,onChange:a=>x("zipCode",a.target.value)})]}),!i&&e.jsxs(m,{sx:{display:"flex",gap:2,justifyContent:"flex-end",mt:3},children:[e.jsx(v,{onClick:j,variant:"outlined",children:"Cancel"}),e.jsx(v,{type:"submit",variant:"contained",children:s?"Update Client":"Create Client"})]}),i&&e.jsx(m,{sx:{display:"flex",gap:2,justifyContent:"flex-end",mt:3},children:e.jsx(v,{onClick:j,variant:"contained",children:"Close"})})]})}function Je(){const[s,i]=h.useState([]),[j,C]=h.useState(null),[c,P]=h.useState(!1),[w,g]=h.useState(!1),[x,S]=h.useState(!1),[I,a]=h.useState(!1),[u,D]=h.useState([]),[O,R]=h.useState(0),[W,J]=h.useState(5),[B,V]=h.useState(!1),[F,z]=h.useState(null),[b,U]=h.useState("");h.useEffect(()=>{const t=JSON.parse(localStorage.getItem("clients")||"[]");i(t)},[]);const H=t=>{C(t),P(!0)},Z=t=>{C(t),g(!0)},_=t=>{z(t),a(!0)},G=()=>{if(F){const t=s.filter(r=>r.id!==F);i(t),localStorage.setItem("clients",JSON.stringify(t)),a(!1),z(null)}},q=t=>{const r=new Date().toISOString();if(j){const o=s.map(n=>n.id===j.id?{...n,...t,updatedAt:r}:n);i(o),localStorage.setItem("clients",JSON.stringify(o)),g(!1)}else{const o={...t,id:`client_${Date.now()}`,createdAt:r,updatedAt:r},n=[...s,o];i(n),localStorage.setItem("clients",JSON.stringify(n)),S(!1)}C(null)},f=()=>{P(!1),g(!1),S(!1),a(!1),C(null),z(null)},K=t=>{if(t.target.checked){const r=y.map(o=>o.id);D(r);return}D([])},Q=(t,r)=>{const o=u.indexOf(r);let n=[];o===-1?n=n.concat(u,r):o===0?n=n.concat(u.slice(1)):o===u.length-1?n=n.concat(u.slice(0,-1)):o>0&&(n=n.concat(u.slice(0,o),u.slice(o+1))),D(n)},X=(t,r)=>{R(r)},Y=t=>{J(parseInt(t.target.value,10)),R(0)},M=t=>u.indexOf(t)!==-1,ee=t=>{switch(t){case"active":return"success";case"inactive":return"warning";case"suspended":return"error";default:return"default"}},te=t=>{switch(t){case"active":return"Active";case"inactive":return"Inactive";case"suspended":return"Suspended";default:return"Active"}},y=s.filter(t=>{var r,o;return t.name.toLowerCase().includes(b.toLowerCase())||t.email.toLowerCase().includes(b.toLowerCase())||((r=t.company)==null?void 0:r.toLowerCase().includes(b.toLowerCase()))||((o=t.phone)==null?void 0:o.includes(b))}),$=y.slice(O*W,O*W+W);return e.jsxs(re,{maxWidth:"xl",children:[e.jsxs(m,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(m,{children:[e.jsx(l,{variant:"h4",gutterBottom:!0,children:"Client Management"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Manage client accounts and their information"})]}),e.jsx(v,{variant:"contained",startIcon:e.jsx(oe,{size:20}),onClick:()=>S(!0),sx:{height:"fit-content"},children:"Create Client"})]}),e.jsx(m,{sx:{mb:3},children:e.jsx(p,{fullWidth:!0,placeholder:"Search clients by name, email, company, or phone...",value:b,onChange:t=>U(t.target.value),InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(le,{size:20})})}})}),e.jsxs(ie,{children:[e.jsx(de,{component:ae,sx:{boxShadow:"none"},children:e.jsxs(ce,{size:B?"small":"medium",children:[e.jsx(he,{children:e.jsxs(E,{children:[e.jsx(d,{padding:"checkbox",children:e.jsx(N,{indeterminate:u.length>0&&u.length<y.length,checked:y.length>0&&u.length===y.length,onChange:K})}),e.jsx(d,{children:e.jsx(l,{variant:"subtitle2",sx:{fontWeight:600},children:"Name"})}),e.jsx(d,{children:e.jsx(l,{variant:"subtitle2",sx:{fontWeight:600},children:"Email"})}),e.jsx(d,{children:e.jsx(l,{variant:"subtitle2",sx:{fontWeight:600},children:"Phone"})}),e.jsx(d,{children:e.jsx(l,{variant:"subtitle2",sx:{fontWeight:600},children:"Company"})}),e.jsx(d,{children:e.jsx(l,{variant:"subtitle2",sx:{fontWeight:600},children:"Location"})}),e.jsx(d,{children:e.jsx(l,{variant:"subtitle2",sx:{fontWeight:600},children:"Status"})}),e.jsx(d,{align:"right",children:e.jsx(l,{variant:"subtitle2",sx:{fontWeight:600},children:"Actions"})})]})}),e.jsx(ue,{children:$.length===0?e.jsx(E,{children:e.jsx(d,{colSpan:8,align:"center",sx:{py:8},children:e.jsx(l,{variant:"body2",color:"text.secondary",children:b?"No clients found matching your search.":"No clients created yet. Create your first client to get started."})})}):$.map(t=>{const r=M(t.id),o=`enhanced-table-checkbox-${t.id}`;return e.jsxs(E,{hover:!0,onClick:n=>Q(n,t.id),role:"checkbox","aria-checked":r,selected:r,sx:{cursor:"pointer"},children:[e.jsx(d,{padding:"checkbox",children:e.jsx(N,{checked:r,inputProps:{"aria-labelledby":o}})}),e.jsx(d,{component:"th",id:o,scope:"row",children:e.jsx(l,{variant:"body2",sx:{fontWeight:500},children:t.name})}),e.jsx(d,{children:e.jsx(l,{variant:"body2",children:t.email})}),e.jsx(d,{children:e.jsx(l,{variant:"body2",color:"text.secondary",children:t.phone||"No phone"})}),e.jsx(d,{children:e.jsx(l,{variant:"body2",color:"text.secondary",children:t.company||"No company"})}),e.jsx(d,{children:e.jsx(l,{variant:"body2",color:"text.secondary",children:[t.city,t.state,t.country].filter(Boolean).join(", ")||"No location"})}),e.jsx(d,{children:e.jsx(ne,{label:te(t.status),color:ee(t.status),size:"small"})}),e.jsx(d,{align:"right",children:e.jsxs(m,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(A,{size:"small",onClick:n=>{n.stopPropagation(),H(t)},color:"primary",children:e.jsx(xe,{size:16})}),e.jsx(A,{size:"small",onClick:n=>{n.stopPropagation(),Z(t)},color:"primary",children:e.jsx(me,{size:16})}),e.jsx(A,{size:"small",onClick:n=>{n.stopPropagation(),_(t.id)},color:"error",children:e.jsx(pe,{size:16})})]})})]},t.id)})})]})}),e.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2},children:[e.jsx(ge,{control:e.jsx(N,{checked:B,onChange:t=>V(t.target.checked)}),label:"Dense"}),e.jsx(fe,{rowsPerPageOptions:[5,10,25],component:"div",count:y.length,rowsPerPage:W,page:O,onPageChange:X,onRowsPerPageChange:Y,labelRowsPerPage:"Rows per page:",labelDisplayedRows:({from:t,to:r,count:o})=>`${t}-${r} of ${o}`})]})]}),e.jsx(T,{open:c,onClose:f,maxWidth:"md",fullWidth:!0,children:e.jsx(k,{sx:{p:0},children:e.jsx(L,{client:j||void 0,viewMode:!0,onClose:f,onSave:()=>{}})})}),e.jsx(T,{open:w,onClose:f,maxWidth:"md",fullWidth:!0,children:e.jsx(k,{sx:{p:0},children:e.jsx(L,{client:j||void 0,viewMode:!1,onClose:f,onSave:q})})}),e.jsx(T,{open:x,onClose:f,maxWidth:"md",fullWidth:!0,children:e.jsx(k,{sx:{p:0},children:e.jsx(L,{onClose:f,onSave:q})})}),e.jsxs(T,{open:I,onClose:f,children:[e.jsx(je,{children:"Confirm Delete"}),e.jsx(k,{children:e.jsx(l,{children:"Are you sure you want to delete this client? This action cannot be undone."})}),e.jsxs(Ce,{children:[e.jsx(v,{onClick:f,children:"Cancel"}),e.jsx(v,{onClick:G,color:"error",variant:"contained",children:"Delete"})]})]})]})}export{Je as ClientManagementPage};
