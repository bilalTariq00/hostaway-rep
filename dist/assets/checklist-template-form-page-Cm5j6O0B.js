import{D as O,a3 as W,bh as J,r as f,j as e,B as n,I as g,d as m,T as c,a as p}from"./index-DlK49mD9.js";import{D as A}from"./content-BncdO-AK.js";import{T as j}from"./TextField-DGQVylbQ.js";import{F as E}from"./FormControlLabel-DYCM3_AA.js";import{S as P}from"./Switch-Bj_iObyt.js";import{D as F,a as R,b as z,c as B}from"./DialogContent-BrwwiAlS.js";import"./Select-hkki-_gR.js";import"./Menu-Cd2TK2zY.js";import"./InputLabel-vBrrCZYs.js";import"./FormControl-DsPW8NaL.js";import"./SwitchBase-D6K1hBX3.js";const v=[{id:1,name:"Property Inspection Checklist",description:"This is an example checklist template for property inspection tasks. Feel free to edit the items below.",tasks:["Check all lights and switches","Test air conditioning","Inspect bathroom fixtures","Check kitchen appliances","Verify internet connection","Test door locks and keys"],active:!0},{id:2,name:"Guest Welcome Checklist",description:"This checklist ensures all guest welcome procedures are completed properly.",tasks:["Prepare welcome package","Set up guest information folder","Check cleanliness standards","Verify amenities are working","Prepare local recommendations","Set up contact information"],active:!0},{id:3,name:"Post-Checkout Cleanup",description:"Complete cleanup checklist after guest checkout.",tasks:["Remove all trash","Clean all surfaces","Wash and replace linens","Restock amenities","Check for damages","Prepare for next guests"],active:!1}];function U(){const x=O(),{id:r}=W(),T=J(),d=T.pathname.includes("/edit"),h=T.pathname.includes("/duplicate"),[a,o]=f.useState({name:"",description:"",tasks:[],active:!1}),[C,k]=f.useState(!1);f.useEffect(()=>{const t=(()=>{const l=localStorage.getItem("checklistTemplates");return l?JSON.parse(l):v})().find(l=>l.id===parseInt(r||"0"));d&&t?o({name:t.name||"",description:t.description||"",tasks:t.tasks||[],active:t.active||!1}):h&&t&&o({name:`${t.name} (Copy)`,description:t.description||"",tasks:t.tasks||[],active:t.active||!1})},[r,d,h]);const u=(s,i)=>{o(t=>({...t,[s]:i}))},y=()=>{o(s=>({...s,tasks:[...s.tasks,""]}))},b=(s,i)=>{o(t=>({...t,tasks:t.tasks.map((l,N)=>N===s?i:l)}))},D=s=>{o(i=>({...i,tasks:i.tasks.filter((t,l)=>l!==s)}))},S=()=>{const s=JSON.parse(localStorage.getItem("checklistTemplates")||JSON.stringify(v));if(h){const i={id:Date.now(),name:a.name,description:a.description,tasks:a.tasks.filter(l=>l.trim()!==""),active:a.active},t=[...s,i];localStorage.setItem("checklistTemplates",JSON.stringify(t))}else if(d&&r){const i=s.map(t=>t.id===parseInt(r)?{...t,name:a.name,description:a.description,tasks:a.tasks.filter(l=>l.trim()!==""),active:a.active}:t);localStorage.setItem("checklistTemplates",JSON.stringify(i))}else{const i={id:Date.now(),name:a.name,description:a.description,tasks:a.tasks.filter(l=>l.trim()!==""),active:a.active},t=[...s,i];localStorage.setItem("checklistTemplates",JSON.stringify(t))}x.push("/tasks/checklist-templates")},I=()=>{if(r){const i=JSON.parse(localStorage.getItem("checklistTemplates")||JSON.stringify(v)).filter(t=>t.id!==parseInt(r));localStorage.setItem("checklistTemplates",JSON.stringify(i))}k(!1),x.push("/tasks/checklist-templates")},w=()=>d?"Edit Checklist Template":h?"Duplicate Checklist Template":"Add Checklist Template";return e.jsxs(A,{maxWidth:"lg",children:[e.jsx(n,{sx:{mb:3},children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(g,{onClick:()=>x.push("/tasks/checklist-templates"),children:e.jsx(m,{icon:"eva:arrow-back-fill"})}),e.jsx(c,{variant:"h4",sx:{fontWeight:600},children:w()})]}),e.jsx(p,{variant:"contained",onClick:S,disabled:!a.name.trim()||a.tasks.filter(s=>s.trim()!=="").length===0,children:"Save checklist template"})]})}),e.jsxs(n,{sx:{display:"flex",gap:3},children:[e.jsxs(n,{sx:{flex:1},children:[e.jsx(n,{sx:{mb:3},children:e.jsx(j,{fullWidth:!0,label:"Task title",value:a.name,onChange:s=>u("name",s.target.value),placeholder:"Enter checklist template name...",sx:{mb:2}})}),e.jsxs(n,{sx:{mb:3},children:[e.jsx(c,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Details"}),e.jsx(c,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Description"}),e.jsx(j,{fullWidth:!0,multiline:!0,rows:4,value:a.description,onChange:s=>u("description",s.target.value),placeholder:"Enter description..."})]}),e.jsxs(n,{sx:{mb:3},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(c,{variant:"h6",sx:{fontWeight:600},children:"Checklist"}),e.jsx(p,{variant:"contained",size:"small",onClick:y,startIcon:e.jsx(m,{icon:"eva:plus-fill"}),children:"Add"})]}),a.tasks.map((s,i)=>e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(g,{size:"small",sx:{cursor:"grab"},children:e.jsx(m,{icon:"eva:menu-fill"})}),e.jsx(j,{fullWidth:!0,value:s,onChange:t=>b(i,t.target.value),placeholder:"Enter task...",size:"small"}),e.jsx(g,{size:"small",onClick:()=>D(i),sx:{color:"error.main"},children:e.jsx(m,{icon:"eva:trash-2-fill"})})]},i)),a.tasks.length===0&&e.jsx(c,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",py:2},children:'No tasks added yet. Click "Add" to create your first task.'})]})]}),e.jsxs(n,{sx:{width:300},children:[e.jsxs(n,{sx:{p:2,border:1,borderColor:"divider",borderRadius:1},children:[e.jsx(c,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Active"}),e.jsx(E,{control:e.jsx(P,{checked:a.active,onChange:s=>u("active",s.target.checked)}),label:a.active?"Yes":"No"})]}),d&&e.jsx(n,{sx:{mt:2},children:e.jsx(p,{fullWidth:!0,variant:"outlined",color:"error",onClick:()=>k(!0),startIcon:e.jsx(m,{icon:"eva:trash-2-fill"}),children:"Delete Template"})})]})]}),e.jsxs(F,{open:C,onClose:()=>k(!1),children:[e.jsx(R,{children:"Delete?"}),e.jsx(z,{children:e.jsx(c,{children:"Are you sure you want to delete this checklist template? This action cannot be undone."})}),e.jsxs(B,{children:[e.jsx(p,{onClick:()=>k(!1),children:"No"}),e.jsx(p,{onClick:I,color:"error",variant:"contained",children:"Yes"})]})]})]})}export{U as ChecklistTemplateFormPage};
